
@{
    var server = $"{Request.Url.Scheme}://{Request.Url.Authority}{Url.Content("~/api/v1/printHtml")}";
}

<h2>@ViewBag.Title</h2>

<div>
    <button id="btn-printPage" class="btn btn-primary">Print page</button>&nbsp;<button id="btn-printDoc" class="btn btn-primary">Print doc</button>
</div>

@section scripts
{
    <script type="text/javascript">
        if (window.jQuery) {
            $(function() {
                MeadCo.log("Page starting with jQuery");

                try {
                    MeadCo.ScriptX.Print.HTML.connect("@server");
                    MeadCo.ScriptX.Print.HTML.pageSettings.header = "ScriptX.Print&b&b&D";
                    MeadCo.ScriptX.Print.HTML.pageSettings.footer = "Page &p of &P";

                    $("#btn-printPage").click(function(e) {
                        e.preventDefault();
                        MeadCo.ScriptX.Print.HTML.printDocument(true);
                    });

                    $("#btn-printDoc").click(function(e) {
                        e.preventDefault();
                        MeadCo.ScriptX.Print.HTML.printFromUrl("http://scriptx.meadroid.com");
                    });

                } catch (e) {
                    console.log("error in page startup: " + e.message);
                }
            });
        } else {
            MeadCo.log("Page starting without jQuery");
            try {
                MeadCo.ScriptX.Print.HTML.printFromUrl("http://scriptx.meadroid.com");
            } catch (e) {
                console.log("error in page startup: " + e.message);
            }
        }
    </script>
}
