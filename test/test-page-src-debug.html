<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page</title>
    <script type="text/javascript">
        var MeadCo = {
            logEnable: true,
            useFetch: true
        }
    </script>
    <script src="src/meadco-core.js"></script>
    <script src="src/meadco-scriptxprint.js"></script>
    <script src="src/meadco-scriptxprinthtml.js"></script>
    <script src="src/meadco-scriptxprintpdf.js"></script>
    <script src="src/meadco-scriptxprintlicensing.js"></script>
    <script src="src/meadco-scriptxfactory.js"></script>
    <script src="src/meadco-secmgr.js"></script>

    <script type="text/javascript">
        MeadCo.ScriptX.Print.reportServerError = function (txt) {
            document.getElementById("qunit-fixture").textContent = txt;
        };

        MeadCo.ScriptX.Print.reportFeatureNotImplemented = function (featureDescription) {
            document.getElementById("qunit-fixture").textContent = txt;
        };


    </script>

    <script type="text/javascript">
        // Define the runTest function if it's not already defined elsewhere
        async function runTest() {
            results = {};
            console.log("Running test on document load");
            // Add your test logic here
            const api = window.MeadCo.ScriptX.Print;

            try {
                results.result = await new Promise((resolve, reject) => {
                    api.connectTestAsync("http://127.0.0.0:12", resolve, reject);
                });
                console.log("connectTestAsync succeeded with: " + results.result);
            } catch (e) {
                console.log("connectTestAsync failed", e, document.getElementById("qunit-fixture").textContent);
                results.error = e;
            }
        }

        // Execute runTest when the document is fully loaded
        document.addEventListener("DOMContentLoaded", async function () {
            runTest();
        });
    </script>
</head>
<body>
    <div id="test-element">Initial Content</div>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
</body>
</html>
