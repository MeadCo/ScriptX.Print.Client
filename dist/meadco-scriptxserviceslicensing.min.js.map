{"version":3,"sources":["dist/meadco-scriptxserviceslicensing.min.js"],"names":["name","definition","theModule","outerScope","this","version","bLog","MeadCo","logEnable","bUseFetch","useFetch","log","str","console","warn","error","parseError","logText","jqXhr","textStatus","errorThrown","responseText","statusText","responseJSON","Message","length","extendMeadCoNamespace","namespaces","split","scope","jQuery","ender","$","i","packageName","oldscope","newscope","prop","hasOwnProperty","logEnabled","bEnable","fetchEnabled","createNS","namespace","nsparts","parent","slice","partname","s","makeApiEndPoint","serverUrl","apiLocation","p","indexOf","lastIndexOf","substring","makeServiceEndPoint","endPoint","parseAjaxError","parseFetchError","msg","message","htmlApiLocation","pdfApiLocation","directApiLocation","licenseApiLocation","printerApiLocation","printerName","magicPrintPreviewPrinter","jobNameWaitingForSend","jobNameSentWaitingResponse","jobNameHoldEnsureSpoolingStatus","enumMeasurementUnits","DEFAULT","INCHES","MM","AccessControl","cookie","deviceSettings","activePrintQueue","servicesServer","serviceUrl","pendingUrl","failedUrl","verifiedUrl","orchestratorPort","orchestratorKey","portsToTry","verifying","trustVerifiedConnection","undoTrust","url","that","verifyUrl","value","IsChangingServer","setUrlAsync","resolve","reject","bAsync","thatValue","window","setTimeout","IsFailedConnection","apiEndPoint","parseInt","ajax","method","dataType","cache","async","done","data","HttpPort","urlHelper","URL","port","protocol","host","pathname","test","urlFound","fail","fetch","then","response","ok","Error","status","json","catch","_","nHuntAllowed","href","resolvedUrl","hostname","call","sApi","oApiData","bLicensed","oPayload","jsonp","contentType","headers","Authorization","btoa","licenseGuid","IsEmptyPayload","JSON","stringify","always","dataOrjqXHR","jqXHRorErrorThrown","body","referrerPolicy","mode","credentials","redirect","keepalive","text","errorTxt","aServerUrl","currentUrl","newUrl","e","Object","keys","constructor","bConnected","bDoneAuto","availablePrinters","cachedServiceDescription","enumContentType","HTML","INNERHTML","STRING","enumResponseStatus","UNKNOWN","QUEUEDTODEVICE","QUEUEDTOFILE","SOFTERROR","OK","enumErrorAction","REPORT","THROW","errorAction","enumServiceClass","CLOUD","ONPREMISE","WINDOWSPC","enumPrintStatus","NOTSTARTED","QUEUED","STARTING","DOWNLOADING","DOWNLOADED","PRINTING","COMPLETED","PAUSED","PRINTPDF","ERROR","ABANDONED","enumCollateOptions","TRUE","FALSE","enumDuplexOptions","SIMPLEX","VERTICAL","HORIZONTAL","queueJob","push","jobIdentifier","jobName","jobCount","findJob","id","find","updateJob","j","forEach","key","removeJob","filter","previousPrintCallWasAt","progress","requestData","information","OnProgress","UserData","nextJobFileName","funcPrintHtmlAtServer","content","htmlPrintSettings","trackingData","fnDone","fnProgress","fnOnQueuedFileAvailable","devInfo","parse","ContentType","Content","Settings","Device","ProtectedContentAccess","fakeJob","Date","now","requiredOutputName","fnOnFileAvailable","printAtServer","err","ScriptX","Print","reportError","queuedToFile","monitorJob","api","queuedToDevice","softError","timeoutToJobStart","timeoutSpacingMSecs","jobGapResetTimeout","printHtmlAtServer","t","open","funcPrintPdfAtServer","document","pdfPrintSettings","Document","Description","jobDescription","jobTitle","printPdfAtServer","printDirectAtServer","PrinterName","setServer","clientLicenseGuid","connectToServer","getDeviceSettings","getFromServer","connectToServerAsync","foundUrl","responseInterface","callService","errMsg","onSuccess","onFail","httpMethod","processMonitorResponse","intervalId","jobId","timeOut","functionComplete","clearInterval","counter","interval","bWaiting","setInterval","addOrUpdateDeviceSettings","isDefault","oRequest","replace","encodeURIComponent","errTxt","getDeviceSettingsFor","sPrinterName","printerData","toLowerCase","eTxt","getDeviceSettingsForAsync","managePrinterConnection","sMethod","sShareName","sd","serviceDescription","serviceClass","serviceVersion","major","minor","managePrinterConnectionAsync","serviceDescriptionAsync","processAttributes","printHtml","printApi","licenseApi","Licensing","cloudOrOnPremise","querySelector","dataset","meadcoServer","meadcoPrinthtmlserver","meadcoSubscription","meadcoSyncinit","meadcoUsefetch","syncInit","sFetchDefined","server","connect","connectLite","wPC","meadcoLicense","meadcoLicensePath","meadcoLicenseRevision","meadcoOrchestrator","meadcoOrchestratorKey","meadcoTrustVerifiedConnection","meadcoReporterror","applyLicense","meadcoApplyLicense","apply","result","errorMessage","applyAsync","PrintStatus","ErrorAction","CollateOptions","DuplexOptions","MeasurementUnits","ServiceClasses","onErrorAction","action","orchestrator","nPort","sKey","authorisationCookie","deviceRequest","setSystemDefaultPrinterAsync","sName","serviceVersionAsync","settings","deviceSettingsFor","deviceSettingsForAsync","useAttributes","connectAsync","connectTestAsync","connectDeviceAndPrinters","deviceInfo","arPrinters","isConnected","availablePrinterNames","addPrinterConnection","removePrinterConnection","addPrinterConnectionAsync","removePrinterConnectionAsync","sPrintHtmlApi","requestHtmlPreview","fnReady","userPrinterName","printPdf","printDirect","reportServerError","alert","reportFeatureNotImplemented","featureDescription","queue","activeJobs","clientSideJobs","noJobsWaitingDelivery","every","ensureSpoolingStatus","lock","freeSpoolStatus","isSpooling","waitForSpoolingComplete","iTimeout","fnComplete","startTime","waitForDeliveryComplete","waitForDeliveryCompleteAsync","Promise","queueTimeoutSpacing","msec","queueGapResetTime","jobFileName","sname","requestService","getService","postService","getServiceAsync","postServiceAsync","moduleversion","licenseRevision","licensePath","lastError","license","slicenseGuid","getSubscriptionFromServer","errorText","revision","path","lcasePath","location","Guid","Url","Revision","company","validLicense","guid","detailOnError","License","GetLicenseAsync","PolyfillInit","PolyfillInitAsync","undefined","getElementById","object","thisSpace","logApi","extendSecMgrNamespace","secmgr"],"mappings":"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","file":"meadco-scriptxserviceslicensing.min.js","sourcesContent":["!function(e,t){var r=function(){var e=this,t=\"1.15.2.4\",r=\"undefined\"!=typeof MeadCo&&void 0!==MeadCo.logEnable&&MeadCo.logEnable,o=\"undefined\"!=typeof MeadCo&&void 0!==MeadCo.useFetch&&MeadCo.useFetch,n=function(e){r&&console.log(\"MeadCo :: \"+e)},i=function(e){console.warn(\"MeadCo :: \"+e)},a=function(e){console.error(\"MeadCo :: \"+e)};function s(e,t,r,o){return a(\"**warning: AJAX call failure in \"+e+\": [\"+r+\"], [\"+o+\"], [\"+t.responseText+\"], [\"+t.statusText+\"]\"),\"\"===o||\"Internal Server Error\"===o?o=\"error\"!==r?t.responseText||r:\"object\"==typeof t.responseJSON&&\"string\"==typeof t.responseJSON.Message?t.responseJSON.Message:\"string\"==typeof t.responseText?t.responseText:\"Server or network error\":\"object\"!=typeof t.responseJSON&&\"string\"==typeof t.responseText&&t.responseText.length>0&&(o=t.responseText),a(\" error parsed to --\\x3e [\"+o+\"]\"),o}return e.extendMeadCoNamespace=function(t,r){var o=r();n(\"MeadCo root extending namespace: \"+t);for(var i=t.split(\".\"),a=e.scope||this.jQuery||this.ender||this.$||this,s=0;s<i.length;s++){var c=i[s];if(s===i.length-1)if(void 0===a[c])n(\"installing implementation at: \"+c),a[c]=o;else{n(\"Warning - extending package: \"+c);var l=a[c];a[c]=o;var d=a[c];for(var u in n(\"preserving old scope ... \"),l)l.hasOwnProperty(u)&&(n(\"will preserve: \"+u),d[u]=l[u])}else void 0===a[c]?(n(\"initialising new: \"+c),a[c]={}):n(\"using existing package: \"+c);a=a[c]}},n(\"MeadCo root namespace \"+t+\" loaded.\"),{log:n,warn:i,error:a,get version(){return t},get logEnabled(){return r},set logEnabled(e){r=e},get fetchEnabled(){return o},set fetchEnabled(e){o=e},createNS:function(t){var r=t.split(\".\"),o=e.scope.MeadCo;\"MeadCo\"===r[0]&&(r=r.slice(1));for(var n=0;n<r.length;n++){var i=r[n];void 0===o[i]&&(o[i]={}),o=o[i]}return o},set scope(t){e.scope=t},makeApiEndPoint:function(e,t){var r=e.indexOf(\"/api\");return-1===r?(e.lastIndexOf(\"/\")!==e.length-1&&(e+=\"/\"),e+=\"api/\"+t):e=e.substring(0,r)+\"/api/\"+t,e},makeServiceEndPoint:function(e,t){var r=e.indexOf(\"/api\");return-1===r?(e.lastIndexOf(\"/\")!==e.length-1&&(e+=\"/\"),e+=t):e=e.substring(0,r)+\"/\"+t,e},parseAjaxError:function(e,t,r,o){return s(e,t,r,o)},parseFetchError:function(e,t){const r=\"string\"==typeof t?t:t.message;return a(\"**warning: FETCH call failure in \"+e+\": \"+r),r}}}(),o=this,n=null;if(void 0!==o[e]&&(n=o[e]),o[e]=r,null!==n){var i=o[e];for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])}r.scope=o}(\"MeadCo\"),extendMeadCoNamespace(\"MeadCo.ScriptX.Print\",(function(){const e=\"1.15.2.4\",t=\"v1/printHtml\",r=\"v1/printPdf\",o=\"v1/printDirect\",n=\"v1/licensing\",i=\"v1/printer\";let a=\"\";const s=\"ScriptX.Services//PrintPreview.1\",c=\"[hold.clientside]\",l=\"[wait.response]\",d=\"[hold.ensureSpoolStatus]\",u={DEFAULT:0,INCHES:1,MM:2};var f={cookie:\"\"};let p={};const g=this;let h=[];const v={serviceUrl:\"\",pendingUrl:\"\",failedUrl:\"\",verifiedUrl:\"\",orchestratorPort:0,orchestratorKey:\"\",portsToTry:10,verifying:!1,trustVerifiedConnection:!0,undoTrust:function(){this.trustVerifiedConnection||\"\"===this.serviceUrl||(this.verifiedUrl=this.serviceUrl,this.pendingUrl=this.serviceUrl,this.serviceUrl=\"\")},get url(){if(\"\"!==this.verifiedUrl)return this.verifiedUrl;if(\"\"===this.serviceUrl&&\"\"!==this.pendingUrl){MeadCo.warn(\"[GET] servicesServer.url is not ready, performing synchronous search. Recommend code re-org to resolve the server earlier and asynchronously.\");var e=this;this.verifyUrl(this.pendingUrl,!1,(function(){return e.serviceUrl}),(function(){return\"\"}))}return this.serviceUrl},set url(e){MeadCo.log(\"servicesServer::setUrl: \"+e),this.IsChangingServer(e)&&(MeadCo.log(\"note set as pending\"),this.serviceUrl=\"\",this.pendingUrl=e)},setUrlAsync:function(e,t,r){MeadCo.log(\"servicesServer::urlAsync: \"+e),this.verifyUrl(e,!0,t,r)},verifyUrl:function(e,t,r,o){if(this.verifying&&t){MeadCo.warn(\"Verify called and verify in progress ....\");var n=this,i=e;window.setTimeout((function(){n.verifyUrl(i,t,r,o)}),1e3)}else if(this.IsChangingServer(e)&&!this.IsFailedConnection(e)){var a;n=this,i=e,MeadCo.log(\"servicesServer::verifyurl: \"+e+\", async: \"+t),\"number\"!=typeof this.orchestratorPort&&(this.orchestratorPort=parseInt(\"\"+this.orchestratorPort)),this.orchestratorPort>0?(MeadCo.log(\"Using request to Orchestrator on port: \"+this.orchestratorPort),n.verifying=!0,a=\"string\"==typeof this.orchestratorKey&&this.orchestratorKey.length>0?\"/api/v2?key=\"+this.orchestratorKey:\"/api/v1\",MeadCo.log(\"servicesServer::querying orchestrator: http://127.0.0.1:\"+this.orchestratorPort+a),g.jQuery&&!MeadCo.fetchEnabled?g.jQuery.ajax(\"http://127.0.0.1:\"+this.orchestratorPort+a,{method:\"GET\",dataType:\"json\",cache:!1,async:t}).done((function(e){MeadCo.log(\"orchestrator returned ScriptX.Services port: \"+e.HttpPort);var a=new URL(i);a.port=e.HttpPort,i=a.protocol+\"//\"+a.host+a.pathname,n.test(i,0,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!0)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i,n.verifying=!1,\"function\"==typeof o&&o(e)}))})).fail((function(e,t,r){n.verifying=!1,n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i;const a=MeadCo.parseAjaxError(\"Failed to connect with Orchestrator: \",e,t,r);MeadCo.warn(a),\"function\"==typeof o&&o(\"Failed to connect with Orchestrator: \"+a)})):fetch(\"http://127.0.0.1:\"+this.orchestratorPort+a).then((e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()})).then((e=>{MeadCo.log(\"orchestrator returned ScriptX.Services port: \"+e.HttpPort);var a=new URL(i);a.port=e.HttpPort,i=a.protocol+\"//\"+a.host+a.pathname,n.test(i,0,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!0)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i,n.verifying=!1,\"function\"==typeof o&&o(e)}))})).catch((t=>{n.verifying=!1,n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i;const r=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:verifyUrl - \"+e,t);\"function\"==typeof o&&o(\"Failed to connect with Orchestrator: \"+r)}))):(n.verifying=!0,n.test(i,n.portsToTry,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!1)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.verifying=!1;try{new URL(i),n.failedUrl=i}catch(e){}\"function\"==typeof o&&o('ScriptX.Services could not be found at \"'+i+'\". Is it installed and running?')})))}else this.IsFailedConnection(e)?\"function\"==typeof o?o(\"ScriptX.Services connection to: \"+e+\" is either invalid or has already failed and will not be re-tried.\"):MeadCo.warn(\"ScriptX.Services connection to: \"+e+\" has already failed and will not be re-tried.\"):r(this.serviceUrl,this.orchestratorPort>0)},test:function(e,t,r,o,i){if(e.length>0){const a=this;let s;try{if(s=new URL(e),\"http:\"!==s.protocol&&\"https:\"!==s.protocol)return void i(\"Invalid protocol: \"+e)}catch(t){return void i(\"Invalid URL: \"+e)}MeadCo.log(\"Test server requested: \"+e+\", port: \"+s.port);const c=MeadCo.makeApiEndPoint(s.href,n+\"/ping\");g.jQuery&&!MeadCo.fetchEnabled?(MeadCo.log(\".ajax() get: \"+c),g.jQuery.ajax(c,{method:\"GET\",dataType:\"json\",cache:!1,async:r}).done((function(e){const t=s.protocol+\"//\"+s.host+s.pathname;MeadCo.log(\"Test server succeed, resolve(\"+t+\")\"),o(t)})).fail((function(e,n,c){MeadCo.log(\"Test server failed: [\"+c+\"], \"+t+\", on: \"+s.hostname),t>0&&(\"localhost\"===s.hostname||\"127.0.0.1\"==s.hostname)?(s.port++,g.setTimeout(a.test(s.protocol+\"//\"+s.host+s.pathname,--t,r,o,i),1)):(c=MeadCo.parseAjaxError(\"MeadCo.ScriptX.Print.servicesServer.test:\",e,n,c),\"function\"==typeof i?(MeadCo.log(\"rejecting with: \"+c),i(c)):MeadCo.warn(\"failed with no reject function\"))}))):(MeadCo.log(\"fetch get: \"+c),r?fetch(c).then((e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()})).then((e=>{const t=s.protocol+\"//\"+s.host+s.pathname;MeadCo.log(\"Test server succeed, resolve(\"+t+\")\"),o(t)})).catch((e=>{MeadCo.log(\"Test server failed: [\"+e+\"], \"+t+\", on: \"+s.hostname),t>0&&(\"localhost\"===s.hostname||\"127.0.0.1\"==s.hostname)?(s.port++,g.setTimeout(a.test(s.protocol+\"//\"+s.host+s.pathname,--t,r,o,i),1)):(errorThrown=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print.servicesServer.test:\",e),\"function\"==typeof i?(MeadCo.log(\"rejecting with: \"+errorThrown),i(errorThrown)):MeadCo.warn(\"failed with no reject function\"))})):(MeadCo.error(\"Synchronous Ajax calls requires jQuery\"),\"function\"==typeof i&&i(\"Synchronous Ajax calls requires jQuery\")))}},call:function(e,t,r,o,n,i,a){const s=this;if(\"\"===this.serviceUrl&&\"\"!==this.pendingUrl)this.verifyUrl(this.pendingUrl,n,(function(){\"\"!==s.url?s.call(e,t,r,o,n,i,a):\"function\"==typeof a&&a(\"Server url verification failed to set url\")}),a);else if(\"\"!==this.serviceUrl){const c=MeadCo.makeApiEndPoint(this.serviceUrl,e);MeadCo.log(\"servicesServer.call() \"+t+\": \"+c);let l={method:t,cache:!1,async:n,jsonp:!1,dataType:\"json\",contentType:\"application/json\"};if(o&&(l.headers={Authorization:\"Basic \"+btoa(C+\":\")}),this.IsEmptyPayload(r)||(MeadCo.log(\"payload defined.\"),l.data=JSON.stringify(r)),g.jQuery&&!MeadCo.fetchEnabled)g.jQuery.ajax(c,l).done((function(e){return\"function\"==typeof i&&i(e),e})).fail((function(r,o,n){if(n=MeadCo.parseAjaxError(\"MeadCo.ScriptX.Print:\"+e+t,r,o,n),\"function\"!=typeof a)throw new Error(n);a(n)})).always((function(e,t,r){s.undoTrust()}));else if(n)l.headers=o?{Authorization:\"Basic \"+btoa(C+\":\"),\"Content-type\":\"application/json\"}:{\"Content-type\":\"application/json\"},fetch(c,{method:l.method,headers:l.headers,body:l.data,referrerPolicy:\"origin-when-cross-origin\",mode:\"cors\",credentials:\"omit\",cache:\"no-store\",redirect:\"error\",keepalive:!1}).then((r=>{if(s.undoTrust(),r.ok)return r.json();if(500==r.status||404==r.status)r.text().then((r=>{const o=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:\"+e+t,r);if(\"function\"!=typeof a)throw new Error(o);a(o)}));else{if(\"function\"!=typeof a)throw new Error(r.statusText);a(r.statusText)}})).then((e=>{e&&\"function\"==typeof i&&i(e)})).catch((r=>{const o=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:\"+e+t,r);if(\"function\"!=typeof a)throw new Error(o);a(o)}));else{if(\"function\"!=typeof a)throw new Error(\"Synchronous Ajax calls requires jQuery\");a(\"Synchronous Ajax calls requires jQuery\")}}else{if(\"function\"!=typeof a)throw new Error(\"MeadCo.ScriptX.Print : server connection is not defined.\");a(\"MeadCo.ScriptX.Print : server connection is not defined.\")}return!0},IsChangingServer:function(e){if(\"\"!==this.serviceUrl)try{var t=new URL(this.serviceUrl),r=new URL(e);return t.hostname!=r.hostname||t.port!=r.port&&0==this.orchestratorPort}catch(t){return MeadCo.error(\"Failed to construct URL(): \"+t.message+\", from: \"+this.serviceUrl+\", or: \"+e),MeadCo.error(\"Many errors will ensue\"),!1}return!0},IsEmptyPayload:e=>null===e||0===Object.keys(e).length&&e.constructor===Object,IsFailedConnection:function(e){if(this.failedUrl.length>0)try{var t=new URL(this.failedUrl),r=new URL(e);return t.hostname===r.hostname&&(MeadCo.warn(\"Attempt to use: \"+e+\" is noted as a failed connection and will not be retried\"),!0)}catch(t){return MeadCo.error(\"Testing IsFailed unable to construct URL(): \"+t.message+\", from: \"+this.failedUrl+\", or: \"+e),!0}return!1}};var C=\"\",y=!1,m=!1,M=[],S=null,w={URL:1,HTML:2,INNERHTML:4,STRING:8},E={UNKNOWN:0,QUEUEDTODEVICE:1,QUEUEDTOFILE:2,SOFTERROR:3,OK:4},P={REPORT:1,THROW:2},b=P.REPORT,T={CLOUD:1,ONPREMISE:2,WINDOWSPC:3},U={NOTSTARTED:0,QUEUED:1,STARTING:2,DOWNLOADING:3,DOWNLOADED:4,PRINTING:5,COMPLETED:6,PAUSED:7,PRINTPDF:8,ERROR:-1,ABANDONED:-2},j={DEFAULT:0,TRUE:1,FALSE:2},N={DEFAULT:0,SIMPLEX:1,VERTICAL:2,HORIZONTAL:3};function D(e){h.push(e),MeadCo.log(\"ScriptX.Print queueJob: \"+e.jobIdentifier+\", name: \"+e.jobName+\", jobCount: \"+h.length)}function I(){return MeadCo.log(\"ScriptX.Print jobCount: \"+h.length),h.length}function L(e){return h.find((t=>t.jobIdentifier===e))}function O(e){let t=L(e.jobIdentifier);t?Object.keys(e).forEach((function(r){t[r]=e[r]})):MeadCo.warn(\"Unable to find job: \"+e.jobIdentifier+\" to update it\")}function A(e){h=h.filter((t=>t.jobIdentifier!==e)),MeadCo.log(`ScriptX.Print removed job: ${e}, jobCount: ${h.length}`),0==h.length&&(k=0)}function R(e,t,r){\"function\"==typeof e.OnProgress&&e.OnProgress(t,r,e.UserData)}var X=\"\";function q(e,r,o,n,i,l,d){var u;MeadCo.log(\"started MeadCo.ScriptX.Print.print.printHtmlAtServer() Type: \"+e),e===w.URL&&MeadCo.log(\".. request print url: \"+r),u=\"\"===a?{}:a===s?JSON.parse(JSON.stringify({printerName:a})):JSON.parse(JSON.stringify(p[a]));var g={ContentType:e,Content:r,Settings:JSON.parse(JSON.stringify(o)),Device:u,ProtectedContentAccess:f,OnProgress:l,UserData:n},h={jobIdentifier:Date.now(),printerName:g.Device.printerName,jobName:c};D(h);var C=X;X=\"\";var y=d;return function(){return A(h.jobIdentifier),$(t,g,{fail:function(e){R(g,U.ERROR,e),MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof i&&i(\"Server error\")},queuedToFile:function(e){MeadCo.log(\"print is being queued to a file\"),R(g,U.QUEUED),Y(t,g,e.jobIdentifier,-1,(function(e){if(null!==e){MeadCo.log(\"download printed file is available\"),R(g,U.COMPLETED);var r=MeadCo.makeApiEndPoint(v.url,t+\"/download/\"+e.jobIdentifier);C.length>0&&(r+=\"/\"+C),y(r,e.jobIdentifier)}\"function\"==typeof i&&i(null===e?\"Server error\":null)}))},queuedToDevice:function(e){MeadCo.log(\"print was queued to device\"),R(g,U.QUEUED),Y(t,g,e.jobIdentifier,-1,(function(e){null!==e&&R(g,U.COMPLETED),\"function\"==typeof i&&i(null===e?\"Server error\":null)}))},softError:function(e){R(g,U.ERROR,e.message),MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"print has soft error\"),A(e.jobIdentifier),\"function\"==typeof i&&(MeadCo.log(\"Call fnDone\"),i(e.message))},ok:function(e){R(g,U.COMPLETED),MeadCo.log(\"printed ok, no further information\"),A(e.jobIdentifier),\"function\"==typeof i&&i(null)}})}}var F=0,k=0,x=750,J=1e4;function W(e,t,r,o,n,i){if(!t||\"string\"==typeof t&&0===t.length)return MeadCo.ScriptX.Print.reportError(\"Request to print no content - access denied?\"),\"function\"==typeof o&&o(\"Request to print no content\"),!1;var a=Date.now();return a-k>J&&(F=0),k=a,setTimeout(q(e,t,r,i,o,n,(function(e){window.open(e,\"_self\")})),F),F+=x,!0}function G(e,t,o,n,i){let s;MeadCo.log(\"started MeadCo.ScriptX.Print.print.printPdfAtServer() document: \"+e+\", printerName: \"+a),s=\"\"===a?{}:JSON.parse(JSON.stringify(p[a]));const l={Document:e,Description:t.jobDescription,Settings:JSON.parse(JSON.stringify(t)),Device:s,ProtectedContentAccess:f,OnProgress:n,UserData:i};l.Settings.jobTitle=t.jobDescription;const d={jobIdentifier:Date.now(),printerName:l.Device.printerName,jobName:c};D(d);var u=X;return X=\"\",function(){return A(d.jobIdentifier),$(r,l,{fail:function(e){R(l,U.ERROR,e),MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof o&&o(\"Server error\")},queuedToFile:function(e){MeadCo.log(\"default handler on queued to file response\"),R(l,U.QUEUED),Y(r,l,e.jobIdentifier,-1,(function(e){if(null!==e){MeadCo.log(\"Will download printed file\"),R(l,U.COMPLETED);let t=MeadCo.makeApiEndPoint(v.url,r+\"/download/\"+e.jobIdentifier);u.length>0&&(t+=\"/\"+u),window.open(t,\"_self\")}\"function\"==typeof o&&o(null===e?\"Server error\":null)}))},queuedToDevice:function(e){MeadCo.log(\"print was queued to device\"),R(l,U.QUEUED),Y(r,l,e.jobIdentifier,-1,(function(e){null!==e&&R(l,U.COMPLETED),\"function\"==typeof o&&o(null===e?\"Server error\":null)}))},softError:function(e){R(l,U.ERROR,e.message),MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"printpdf call has soft error, remove job: \"+e.jobIdentifier),A(e.jobIdentifier),\"function\"==typeof o&&(MeadCo.log(\"Call fnDone\"),o(\"Server error\"))},ok:function(e){R(l,U.COMPLETED),MeadCo.log(\"printed ok, no further information\"),A(e.jobIdentifier),\"function\"==typeof o&&o(null)}})}}function Q(e,t,r,o,n){if(!e||\"string\"==typeof e&&0===e.length)return MeadCo.ScriptX.Print.reportError(\"The document to print must be given.\"),\"function\"==typeof r&&r(\"Request to print no content\"),!1;const i=Date.now();return i-k>J&&(F=0),k=i,setTimeout(G(e,t,r,o,n),F),F+=x,!0}function H(e,t,r){if(MeadCo.log(\"started MeadCo.ScriptX.Print.print.printDirectAtServer() Type: \"+e+\", printerName: \"+a),e===w.URL)MeadCo.log(\".. request print url: \"+t);else if(e!==w.STRING)return MeadCo.ScriptX.Print.reportError(\"Bad content type for direct printing\"),\"function\"==typeof r&&r(\"Bad content type for direct printing\"),!1;if(!t||\"string\"==typeof t&&0===t.length)return MeadCo.ScriptX.Print.reportError(\"Request to print no content - access denied?\"),\"function\"==typeof r&&r(\"Request to print no content\"),!1;if(\"\"===a)return MeadCo.ScriptX.Print.reportError(\"Request to print but no current printer defined.\"),\"function\"==typeof r&&r(\"Request to print but no current printer defined.\"),!1;const n={ContentType:e,Content:t,PrinterName:a,Settings:{jobTitle:\"Direct print\"},Device:p[a]};return $(o,n,{fail:function(e){MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof r&&r(\"Server error\")},softError:function(e){MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"print has soft error\"),A(e.jobIdentifier),\"function\"==typeof r&&(MeadCo.log(\"Call fnDone\"),r(e.message))},ok:function(e){MeadCo.log(\"printed ok, no further information\"),A(e.jobIdentifier),\"function\"==typeof r&&r(null)}})}function K(e,t,r,o){\"string\"==typeof e&&e.length>0?(MeadCo.log(\"Print server requested: \"+e+\" with license: \"+t),C=\"string\"==typeof t&&t.length>0?t:C,a=\"\",p={},h=[],y=!1,M=[],\"function\"==typeof r?v.setUrlAsync(e,r,o):v.url=e):(MeadCo.log(\"Print server retained in setServer: \"+v.url+\" may update with license: {\"+t+\"} (if provided)\"),C=\"string\"==typeof t&&t.length>0?t:C)}function V(e,t){K(e,t),te({name:\"systemdefault\",async:!1}),z(\"\",!0,(function(e){S=e}))}function B(e,t,r,o){K(e,t,(function(e){te({name:\"systemdefault\",done:r,async:!0,fail:o}),z(\"\",!0,(function(e){S=e}))}),o)}function $(e,t,r){const o={jobIdentifier:Date.now(),printerName:t.Device.printerName,jobName:l};return MeadCo.log(\"printAtServer using: \"+e),D(o),_(e+\"/print\",\"POST\",t,!0,!0,(e=>{switch(MeadCo.log(\"Success response: \"+e.status),e.printerName=t.Device.printerName,e.jobName=\"string\"==typeof t.Settings.jobTitle&&t.Settings.jobTitle.length>0?t.Settings.jobTitle:\"server job\",D(e),A(o.jobIdentifier),e.status){case E.QUEUEDTOFILE:r.queuedToFile(e);break;case E.QUEUEDTODEVICE:r.queuedToDevice(e);break;case E.SOFTERROR:case E.UNKNOWN:r.softError(e);break;case E.OK:r.ok(e)}}),(e=>{A(o.jobIdentifier),\"function\"==typeof r.fail&&r.fail(e)}))}function z(e,t,r,o){return _(e,\"GET\",null,!0,t,r,o)}function _(e,t,r,o,n,i,a){return v.call(e,t,r,o,n,i,a)}function Z(e,t,r,o,n,i){switch(MeadCo.log(\"processMonitorResponse::jobStatus: \"+t.status),t.status){case U.COMPLETED:MeadCo.log(\"clear interval: \"+r),window.clearInterval(r),A(o),i(t);break;case U.NOTSTARTED:case U.DOWNLOADED:case U.DOWNLOADING:case U.PRINTING:case U.QUEUED:case U.STARTING:case U.PAUSED:case U.PRINTPDF:R(e,t.status,t.message),O(t),n>0&&++counter*interval>n&&(window.clearInterval(r),MeadCo.ScriptX.Print.reportError(\"unknown failure while printing.\"));break;case U.ERROR:case U.ABANDONED:MeadCo.log(\"error status in monitorJob so clear interval: \"+r),R(e,t.status,t.message),A(o),window.clearInterval(r),MeadCo.ScriptX.Print.reportError(\"The print failed with the error: \"+t.message),i(null);break;default:R(e,t.status,t.message),MeadCo.log(\"unknown status in monitorJob so clear interval: \"+r),A(o),window.clearInterval(r),i(null)}}function Y(e,t,r,o,n){MeadCo.log(\"monitorJob: \"+r);const i=1e3;let a=!1,s=window.setInterval((function(){a?MeadCo.log(\"** info : still waiting for last status request to complete\"):(a=!0,z(e+\"/status/\"+r,!0,(e=>{Z(t,e,s,r,o,n),a=!1}),(e=>{MeadCo.log(\"error: \"+e+\" in monitorJob so clear interval: \"+s),R(t,U.ERROR,e),A(r),window.clearInterval(s),n(null),a=!1})))}),i);MeadCo.log(\"intervalId: \"+s)}function ee(e){if(\"string\"==typeof e.printerName){if(e.isDefault)for(var t=0;t<p.length;t++)p[t].isDefault=!1;p[e.printerName]=e,e.isDefault&&0===a.length&&(a=e.printerName)}}function te(e){e.name=e.name.replace(/\\\\/g,\"||\"),MeadCo.log(\"Request get device info: \"+e.name),z(t+\"/deviceinfo/\"+encodeURIComponent(e.name)+\"/0\",e.async,(function(t){y=!0,ee(t),\"function\"==typeof e.done&&e.done(t)}),(function(t){\"systemdefault\"===e.name?(MeadCo.warn(\"request for systemdefault printer failed - please update to ScriptX.Services 2.11.1\"),e.name=\"default\",te(e)):(MeadCo.log(\"failed to getdevice: \"+t),\"function\"==typeof e.fail&&e.fail(t))}))}function re(e){return\"string\"==typeof e&&\"\"!==e?(void 0===p[e]&&te({name:e,async:!1,done:function(t){\"systemdefault\"===e.toLowerCase()&&(e=t.printerName)},fail:function(e){MeadCo.ScriptX.Print.reportError(e)}}),p[e]):{}}function oe(e,t,r){\"string\"==typeof e&&\"\"!==e?void 0===p[e]?te({name:e,async:!0,done:function(r){\"systemdefault\"===e.toLowerCase()&&(e=r.printerName),t(p[e])},fail:function(e){r(e)}}):t(p[e]):r(\"a printer name is required\")}function ne(e,t){console.warn(\"Synchronous calls to add/remove printer connections are not recommeneded as this will lock the browser UI. Consider using the asynchronous versions when working with in ScriptX.Services\");var r=MeadCo.ScriptX.Print.serviceDescription();r.serviceClass==T.WINDOWSPC&&r.serviceVersion.major>=2&&r.serviceVersion.minor>=19?_(i+\"/Connection/\"+encodeURIComponent(t),e,null,!0,!1):MeadCo.error(\"ScriptX.Services for Windows PC 2.19 or later is required for add/remove PrinterConnection()\")}function ie(e,t,r,o){MeadCo.ScriptX.Print.serviceDescriptionAsync((function(n){n.serviceClass==T.WINDOWSPC&&n.serviceVersion.major>=2&&n.serviceVersion.minor>=19?_(i+\"/Connection/\"+encodeURIComponent(t),e,null,!0,!0,r,o):(MeadCo.error(\"ScriptX.Services for Windows PC 2.19 or later is required for add/remove PrinterConnection()\"),o(\"add/remove PrinterConnection is not supported\"))}),o)}function ae(){if(MeadCo.log(\"MeadCo.ScriptX.Print ... looking for auto connect, already found?: \"+m),!m){var e=MeadCo.ScriptX.Print.HTML,t=MeadCo.ScriptX.Print,r=MeadCo.ScriptX.Print.Licensing;const o=document.querySelector(\"[data-meadco-subscription]\");if(o){const n=o.dataset;MeadCo.log(\"Auto connect susbcription to: \"+n.meadcoServer+\", or \"+n.meadcoPrinthtmlserver+\", with subscription: \"+n.meadcoSubscription+\", sync: \"+n.meadcoSyncinit+\", usefetch: \"+n.meadcoUsefetch);const i=\"false\"!==(\"\"+n.meadcoSyncinit).toLowerCase();if(i)MeadCo.fetchEnabled=!1;else{const e=\"\"+n.meadcoUsefetch;e.length>0&&(MeadCo.fetchEnabled=\"true\"===e.toLowerCase())}const a=n.meadcoServer;void 0===a&&(a=n.meadcoPrinthtmlserver),void 0===a?MeadCo.error(\"No server specified\"):(void 0!==r&&r.connect(a,n.meadcoSubscription),i?(MeadCo.warn(\"Synchronous connection is deprecated.jQuery is required for synchronous behaviour.To update to asynchronous behaviour please use data - meadco - syncinit='false'. Note that this may require additional code changes. Please see: https://www.meadroid.com/Developers/KnowledgeBank/HowToGuides/ScriptXServices/ThenToNow/Stage6\"),e.connect(a,n.meadcoSubscription)):(MeadCo.log(\"Async connectlite...\"),t.connectLite(a,n.meadcoSubscription)),m=!0)}else{const o=document.querySelector(\"[data-meadco-license]\");if(o)if(void 0===t||void 0===e||void 0===r)MeadCo.log(\"Not auto-connecting client license as print or printHtml or license API not present. Should be present on next attempt.\");else{const n=o.dataset;MeadCo.log(\"Auto connect client license to: \"+n.meadcoServer+\", with license: \"+n.meadcoLicense+\", path: \"+n.meadcoLicensePath+\", revision: \"+n.meadcoLicenseRevision+\", sync: \"+n.meadcoSyncinit+\", useFetch: \"+n.meadcoUsefetch+\", orchestrator: \"+n.meadcoOrchestrator+\", orchestratorKey: \"+n.meadcoOrchestratorKey+\", trustVerifiedConnection: \"+n.meadcoTrustVerifiedConnection);const i=\"false\"!==(\"\"+n.meadcoSyncinit).toLowerCase(),a=\"false\"!==(\"\"+n.meadcoReporterror).toLowerCase(),s=\"true\"==(\"\"+n.meadcoApplyLicense).toLowerCase(),c=n.meadcoServer;if(v.orchestratorPort=n.meadcoOrchestrator,v.orchestratorKey=n.meadcoOrchestratorKey,v.trustVerifiedConnection=\"false\"!==(\"\"+n.meadcoTrustVerifiedConnection).toLowerCase(),i)MeadCo.warn(\"Synchronous connection is deprecated. jQuery is required for synchronous behaviour. To update to asynchronous behaviour please use data-meadco-syncinit='false'. Note that this may require additional code changes. Please see: https://www.meadroid.com/Developers/KnowledgeBank/HowToGuides/ScriptXServices/ThenToNow/Stage6\"),MeadCo.fetchEnabled=!1,r.connect(c,n.meadcoLicense),void 0!==n.meadcoLicensePath&&void 0!==n.meadcoLicenseRevision&&(r.apply(n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath),0!=r.result&&a&&MeadCo.ScriptX.Print.reportError(r.errorMessage)),e.connect(c,n.meadcoLicense);else{MeadCo.log(\"Async connectlite...\");const e=\"\"+n.meadcoUsefetch;e.length>0&&(MeadCo.fetchEnabled=\"true\"===e.toLowerCase()),r.connectLite(c,n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath),t.connectLite(c,n.meadcoLicense),s&&r.applyAsync(n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath,(()=>{MeadCo.log(\"NOTE: license has been applied successfully from async processing of attribute with values\")}),(e=>{MeadCo.error(`Failed to apply the license: ${e}, error is: ${r.errorMessage}`),a&&MeadCo.ScriptX.Print.reportError(r.errorMessage)}))}m=!0}}}}return MeadCo.log(\"MeadCo.ScriptX.Print \"+e+\" loaded.\"),{ContentType:w,PrintStatus:U,ErrorAction:P,CollateOptions:j,DuplexOptions:N,MeasurementUnits:u,ServiceClasses:T,get onErrorAction(){return b},set onErrorAction(e){b=e},get orchestrator(){return v.orchestratorPort},set orchestrator(e){v.orchestratorPort=\"\"+e},get orchestratorKey(){return v.orchestratorKey},set orchestratorKey(e){v.orchestratorKey=e},get authorisationCookie(){return f.cookie},set authorisationCookie(e){f.cookie=e},get printerName(){return a},set printerName(e){e!==a&&e.name!==a&&(\"string\"==typeof e?void 0===p[e]?g.jQuery&&!MeadCo.fetchEnabled?te({name:e,done:function(e){a=e.printerName},async:!1,fail:function(e){MeadCo.ScriptX.Print.reportError(e)}}):(MeadCo.error(\"Asynchronous processing of set printerName required, synchronous calls to obtain device details will fail until this completes.\"),oe(e,(e=>{a=e.printerName}),(e=>{MeadCo.ScriptX.Print.reportError(e)})),\"\"===v.serviceUrl?MeadCo.ScriptX.Print.reportError(\"MeadCo.ScriptX.Print : server connection is not defined.\"):MeadCo.ScriptX.Print.reportError(\"Not Found\")):a=e:te(e))},setSystemDefaultPrinterAsync:function(e,r,o){if(void 0!==p.systemdefault&&p.systemdefault==e)return MeadCo.log(\"setSystemDefaultPrinterAsync() does NOT need to do anything\"),void r();e=(e=\"system::\"+e).replace(/\\\\/g,\"||\"),MeadCo.log(\"Request systemDefaultPrinterAsync: \"+e),_(t+\"/CurrentPrinter/\"+encodeURIComponent(e),\"PUT\",null,!0,!0,r,o)},get version(){return e},get serviceUrl(){return v.url},serviceVersion:function(){return this.serviceDescription().serviceVersion},serviceVersionAsync:function(e,t){this.serviceDescriptionAsync((function(t){e(t.serviceVersion)}),t)},get deviceSettings(){return\"\"!==a?p[a]:{}},set deviceSettings(e){ee(e)},deviceSettingsFor:function(e){return re(e)},deviceSettingsForAsync:function(e,t,r){oe(e,t,r)},useAttributes:function(){ae()},connect:function(e,t){V(e,t)},connectLite:function(e,t){K(e,t)},connectAsync:function(e,t,r,o){B(e,t,r,o)},connectTestAsync:function(e,t,r){v.verifyUrl(e,!0,t,r)},serviceDescription:function(){return S||z(\"\",!1,(function(e){S=e}),(function(e){MeadCo.ScriptX.Print.reportError(e.message)})),S},serviceDescriptionAsync:function(e,t){S?e(S):z(\"\",!0,(function(t){S=t,e(t)}),t)},connectDeviceAndPrinters:function(e,t){y=!0,ee(e),M=t},get isConnected(){return y},get availablePrinterNames(){return M},addPrinterConnection:function(e){ne(\"PUT\",e)},removePrinterConnection:function(e){ne(\"DELETE\",e)},addPrinterConnectionAsync:function(e,t,r){ie(\"PUT\",e,t,r)},removePrinterConnectionAsync:function(e,t,r){ie(\"DELETE\",e,t,r)},getFromServer:function(e,r,o,n){z(t+e,r,o,n)},printHtml:W,requestHtmlPreview:function(e,t,r,o,n){var i=a;a=s,q(e,t,r,{},o,(function(){}),n)(),a=i},printPdf:Q,printDirect:H,parseAjaxError:function(e,t,r,o){return MeadCo.parseAjaxError(e,t,r,o)},parseFetchError:function(e,t){return MeadCo.parseFetchError(e,t)},reportError:function(e){switch(MeadCo.error(\"ReportError: \"+e),b){case P.REPORT:MeadCo.ScriptX.Print.reportServerError(e);break;case P.THROW:throw new Error(e)}},reportServerError:function(e){alert(\"There was an error in the printing service\\n\\n\"+e)},reportFeatureNotImplemented:function(e){MeadCo.log(\"Call to not implemented: \"+e),alert(e+\"\\n\\nis not available.\")},get queue(){return h},get activeJobs(){return this.queue.filter((e=>e.jobName!==c&&e.jobName!==l&&e.jobName!==d)).length},get clientSideJobs(){return this.queue.filter((e=>e.jobName==c||e.jobName==l||e.jobName==d)).length},get noJobsWaitingDelivery(){return this.queue.every((e=>e.jobName!==c&&e.jobName!==l&&e.jobName!==d))},ensureSpoolingStatus:function(){var e={jobIdentifier:Date.now(),printerName:\"ensureJobsPrinter\",jobName:d};return D(e),e},freeSpoolStatus:function(e){A(e.jobIdentifier)},get isSpooling(){return I()>0},waitForSpoolingComplete:function(e,t){if(MeadCo.log(\"Started WaitForSpoolingComplete(\"+e+\")\"),\"function\"!=typeof t)throw\"WaitForSpoolingComplete requires a completion callback\";var r=Date.now(),o=250,n=window.setInterval((function(){0===I()?(MeadCo.log(\"WaitForSpoolingComplete - complete\"),window.clearInterval(n),t(!0)):e>=0&&Date.now()-r>e&&(MeadCo.log(\"WaitForSpoolingComplete - timeout\"),window.clearInterval(n),t(0===I()))}),o)},waitForDeliveryComplete:function(e,t){if(MeadCo.log(\"Started waitForDeliveryComplete(\"+e+\")\"),\"function\"!=typeof t)throw\"waitForDeliveryComplete requires a completion callback\";const r=Date.now(),o=250,n=this,i=window.setInterval((()=>{n.noJobsWaitingDelivery?(MeadCo.log(\"waitForDeliveryComplete - complete\"),window.clearInterval(i),t(!0)):e>=0&&Date.now()-r>e&&(MeadCo.log(\"waitForDeliveryComplete - timeout\"),window.clearInterval(i),t(!1))}),o)},waitForDeliveryCompleteAsync:function(){const e=this;return new Promise((function(t,r){e.waitForDeliveryComplete(-1,t)}))},get queueTimeoutSpacing(){return x},set queueTimeoutSpacing(e){x=e},get queueGapResetTime(){return J},set queueGapResetTime(e){J=e},get jobFileName(){return X},set jobFileName(e){X=e},requestService:function(e,t,r,o,n,i,a){return _(e,t,r,o,n,i,a)},getService:function(e,t,r){return _(e,\"GET\",t,r,!1)},postService:function(e,t,r){return _(e,\"POST\",t,r,!1)},getServiceAsync:function(e,t,r,o,n){return _(e,\"GET\",t,r,!0,o,n)},postServiceAsync:function(e,t,r,o,n){return _(e,\"POST\",t,r,!0,o,n)}}})),extendMeadCoNamespace(\"MeadCo.ScriptX.Print.Licensing\",(function(){const e=\"1.15.2.0\",t=\"v1/licensing\";let r=\"\",o=0,n=\"\",i=\"No license applied\";var a={};function s(e,t){var s=MeadCo.ScriptX.Print;void 0!==s&&\"function\"==typeof s.connectLite?s.connectLite(e,t):console.error(\"MeadCo.ScriptX.Print is not available\"),r=t,a={},i=\"No license applied\",o=0,n=\"\"}function c(e,r){const o=MeadCo.ScriptX.Print;if(void 0===o||\"function\"!=typeof o.connectLite){var n=\"MeadCo.ScriptX.Licensing : MeadCo.ScriptX.Print API not available\";if(\"function\"==typeof r)return void r(n);throw new Error(n)}return a.length>0?(\"function\"==typeof e&&e(a),a):(o.requestService(t,\"GET\",{},!0,\"function\"==typeof e,(function(t){i=\"\",a={...a,...t},\"function\"!=typeof e||e(a)}),(function(e){i=e,\"function\"!=typeof r?MeadCo.warn(\"No reject function for: \"+i):r(i)})),a)}function l(e,o,n,s,c){MeadCo.log(\"Apply license: \"+e+\",revision: \"+o+\", path: \"+n);const l=MeadCo.ScriptX.Print;if(void 0===l||\"function\"!=typeof l.connectLite){var d=\"MeadCo.ScriptX.Licensing : MeadCo.ScriptX.Print API not available\";if(\"function\"==typeof c)return void c(d);MeadCo.warn(\"No reject function for: \"+d)}const u=n.toLowerCase();\"warehouse\"!==u&&\"securewarehouse\"!==u&&(n=new URL(n,window.location.href).href,MeadCo.log(\"path updated to: \"+n)),r=e;const f={Guid:e,Url:n,Revision:o};return l.requestService(t,\"POST\",f,!1,\"function\"==typeof s,(function(e){i=\"\",a={...a,...e},\"function\"!=typeof s||s(a)}),(function(e){i=e,\"function\"!=typeof c||c(i)})),\"function\"!=typeof s?(MeadCo.log(\"returning applied (sync) license: \"+a.company),a):0}return MeadCo.log(\"MeadCo.ScriptX.Print.Licensing \"+e+\" loaded.\"),{get version(){return e},connect:function(e,t){s(e,t)},connectLite:function(e,t,r,i){s(e,t),o=r,n=i},apply:function(e,t,r){return l(e,t,r)},applyAsync:function(e,t,r,o,n){l(e,t,r,o,n)},get result(){return\"\"===i?0:5},get validLicense(){return void 0!==a.guid},get errorMessage(){return i},get detailOnError(){return i},get License(){return void 0!==a.guid?a:c(null,(function(e){throw new Error(e)}))},GetLicenseAsync:function(e,t){c(e,t)},PolyfillInit:function(){return void 0!==a.guid||\"\"!==r&&(\"\"===n||(l(r,o,n),void 0!==a.guid))},PolyfillInitAsync:function(e,t){void 0!==a.guid||\"\"===n?e(a):l(r,o,n,e,t)}}})),function(e,t,r){if(this[e]!==r||null!==document.getElementById(e)){if(MeadCo.log(\"ScriptX.Services MeadCo Security Manager emulation believes it may not be required.\"),this[e]!==r&&MeadCo.log(\"this[\"+e+\"] is defined\"),null!==document.getElementById(e)&&MeadCo.log(\"document.getElementById(\"+e+\") is defined\"),this[e].object!==r)return void MeadCo.log(\"this[\"+e+\"].object is defined -- not required!!!\");MeadCo.log(\"this[\"+e+\"].object is *not* defined\")}MeadCo.log(\"ScriptX.Services MeadCo Security Manager emulation believes it is required.\");var o=function(){const e=\"1.15.2.2\",t=this,r=MeadCo,o=MeadCo.ScriptX.Print,n=MeadCo.ScriptX.Print.Licensing;function i(e){r.log(\"secmgr emulation :: \"+e)}t.extendSecMgrNamespace=function(e,t){const r=t();i(\"MeadCo security manager extending namespace2: \"+e);const o=e.split(\".\");let n=this;for(let e=0;e<o.length;e++){const t=o[e];e===o.length-1?void 0===n[t]?(i(\"installing implementation at: \"+t),n[t]=r):i(\"Warning - not overwriting package: \"+t):void 0===n[t]?(i(\"initialising new: \"+t),n[t]={}):i(\"using existing package: \"+t),n=n[t]}},i(\"'secmgr' loaded.\"),\"function\"!=typeof n.GetLicenseAsync&&MeadCo.error(\"MeadCo.ScriptX.Print.Licensing not available\");\"function\"!=typeof o.useAttributes?MeadCo.warn(\"Attribute based licensing not available as MeadCo.ScriptX.Print is not available\"):o.useAttributes();return{log:i,get version(){return e},get result(){return n.result},get validLicense(){return n.validLicense},get License(){return n.License},get errorMessage(){return n.errorMessage},GetLicenseAsync:function(e,t){n.GetLicenseAsync(e,t)},PolyfillInit:function(){return n.PolyfillInit()},PolyfillInitAsync:function(e,t){n.PolyfillInitAsync(e,t)}}}();this[e]=o}(\"secmgr\"),\"function\"==typeof extendSecMgrNamespace&&extendSecMgrNamespace(\"secmgr.object\",(function(){var e=this;return e.secmgr.log(\"secmgr.object loaded.\"),e.secmgr}));\n//# sourceMappingURL=meadco-scriptxserviceslicensing.min.js.map\n"]}