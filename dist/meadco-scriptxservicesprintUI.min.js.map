{"version":3,"sources":["dist/meadco-scriptxservicesprintUI.min.js"],"names":["name","definition","theModule","outerScope","this","version","bLog","MeadCo","logEnable","bUseFetch","useFetch","log","str","console","warn","error","parseError","logText","jqXhr","textStatus","errorThrown","responseText","statusText","responseJSON","Message","length","extendMeadCoNamespace","namespaces","split","scope","jQuery","ender","$","i","packageName","oldscope","newscope","prop","hasOwnProperty","logEnabled","bEnable","fetchEnabled","createNS","namespace","nsparts","parent","slice","partname","s","makeApiEndPoint","serverUrl","apiLocation","p","indexOf","lastIndexOf","substring","makeServiceEndPoint","endPoint","parseAjaxError","parseFetchError","msg","message","htmlApiLocation","pdfApiLocation","directApiLocation","licenseApiLocation","printerApiLocation","printerName","magicPrintPreviewPrinter","jobNameWaitingForSend","jobNameSentWaitingResponse","jobNameHoldEnsureSpoolingStatus","enumMeasurementUnits","DEFAULT","INCHES","MM","AccessControl","cookie","deviceSettings","activePrintQueue","servicesServer","serviceUrl","pendingUrl","failedUrl","verifiedUrl","orchestratorPort","orchestratorKey","portsToTry","verifying","trustVerifiedConnection","undoTrust","url","that","verifyUrl","value","IsChangingServer","setUrlAsync","resolve","reject","bAsync","thatValue","window","setTimeout","IsFailedConnection","apiEndPoint","parseInt","ajax","method","dataType","cache","async","done","data","HttpPort","urlHelper","URL","port","protocol","host","pathname","test","urlFound","fail","fetch","then","response","ok","Error","status","json","catch","_","nHuntAllowed","href","resolvedUrl","hostname","call","sApi","oApiData","bLicensed","oPayload","jsonp","contentType","headers","Authorization","btoa","licenseGuid","IsEmptyPayload","JSON","stringify","always","dataOrjqXHR","jqXHRorErrorThrown","body","referrerPolicy","mode","credentials","redirect","keepalive","text","errorTxt","aServerUrl","currentUrl","newUrl","e","Object","keys","constructor","bConnected","bDoneAuto","availablePrinters","cachedServiceDescription","enumContentType","HTML","INNERHTML","STRING","enumResponseStatus","UNKNOWN","QUEUEDTODEVICE","QUEUEDTOFILE","SOFTERROR","OK","enumErrorAction","REPORT","THROW","errorAction","enumServiceClass","CLOUD","ONPREMISE","WINDOWSPC","enumPrintStatus","NOTSTARTED","QUEUED","STARTING","DOWNLOADING","DOWNLOADED","PRINTING","COMPLETED","PAUSED","PRINTPDF","ERROR","ABANDONED","enumCollateOptions","TRUE","FALSE","enumDuplexOptions","SIMPLEX","VERTICAL","HORIZONTAL","queueJob","push","jobIdentifier","jobName","jobCount","findJob","id","find","updateJob","j","forEach","key","removeJob","filter","previousPrintCallWasAt","progress","requestData","information","OnProgress","UserData","nextJobFileName","funcPrintHtmlAtServer","content","htmlPrintSettings","trackingData","fnDone","fnProgress","fnOnQueuedFileAvailable","devInfo","parse","ContentType","Content","Settings","Device","ProtectedContentAccess","fakeJob","Date","now","requiredOutputName","fnOnFileAvailable","printAtServer","err","ScriptX","Print","reportError","queuedToFile","monitorJob","api","queuedToDevice","softError","timeoutToJobStart","timeoutSpacingMSecs","jobGapResetTimeout","printHtmlAtServer","t","open","funcPrintPdfAtServer","document","pdfPrintSettings","Document","Description","jobDescription","jobTitle","printPdfAtServer","printDirectAtServer","PrinterName","setServer","clientLicenseGuid","connectToServer","getDeviceSettings","getFromServer","connectToServerAsync","foundUrl","responseInterface","callService","errMsg","onSuccess","onFail","httpMethod","processMonitorResponse","intervalId","jobId","timeOut","functionComplete","clearInterval","counter","interval","bWaiting","setInterval","addOrUpdateDeviceSettings","isDefault","oRequest","replace","encodeURIComponent","errTxt","getDeviceSettingsFor","sPrinterName","printerData","toLowerCase","eTxt","getDeviceSettingsForAsync","managePrinterConnection","sMethod","sShareName","sd","serviceDescription","serviceClass","serviceVersion","major","minor","managePrinterConnectionAsync","serviceDescriptionAsync","processAttributes","printHtml","printApi","licenseApi","Licensing","cloudOrOnPremise","querySelector","dataset","meadcoServer","meadcoPrinthtmlserver","meadcoSubscription","meadcoSyncinit","meadcoUsefetch","syncInit","sFetchDefined","server","connect","connectLite","wPC","meadcoLicense","meadcoLicensePath","meadcoLicenseRevision","meadcoOrchestrator","meadcoOrchestratorKey","meadcoTrustVerifiedConnection","meadcoReporterror","applyLicense","meadcoApplyLicense","apply","result","errorMessage","applyAsync","PrintStatus","ErrorAction","CollateOptions","DuplexOptions","MeasurementUnits","ServiceClasses","onErrorAction","action","orchestrator","nPort","sKey","authorisationCookie","deviceRequest","setSystemDefaultPrinterAsync","sName","serviceVersionAsync","settings","deviceSettingsFor","deviceSettingsForAsync","useAttributes","connectAsync","connectTestAsync","connectDeviceAndPrinters","deviceInfo","arPrinters","isConnected","availablePrinterNames","addPrinterConnection","removePrinterConnection","addPrinterConnectionAsync","removePrinterConnectionAsync","sPrintHtmlApi","requestHtmlPreview","fnReady","userPrinterName","printPdf","printDirect","reportServerError","alert","reportFeatureNotImplemented","featureDescription","queue","activeJobs","clientSideJobs","noJobsWaitingDelivery","every","ensureSpoolingStatus","lock","freeSpoolStatus","isSpooling","waitForSpoolingComplete","iTimeout","fnComplete","startTime","waitForDeliveryComplete","waitForDeliveryCompleteAsync","Promise","queueTimeoutSpacing","msec","queueGapResetTime","jobFileName","sname","requestService","getService","postService","getServiceAsync","postServiceAsync","jobPrinterName","defaultPrinterName","moduleversion","mPageMarginUnits","mPageOrientation","LANDSCAPE","PORTRAIT","mPrintingPass","ALL","ODD","EVEN","BooleanOption","settingsCache","header","footer","headerFooterFont","viewScale","locale","navigator","languages","language","timezoneOffset","shortDateFormat","longDateFormat","printBackgroundColorsAndImages","page","orientation","units","margins","left","top","bottom","right","extraHeadersAndFooters","pageRange","printingPass","documentUrl","iSettings","x","b","allPagesHeader","v","allPagesFooter","firstPageHeader","firstPageFooter","extraFirstPageFooter","allHeaderHeight","allFooterHeight","firstHeaderHeight","firstFooterHeight","extraFirstFooterHeight","enumOrientation","enumUnits","n","updateSettingsWithServerDefaults","sDefaults","getTimezoneOffset","getBaseHref","location","persistData","$element","each","setAttribute","types","len","val","$select","innerHTML","persistData2","rootElement","querySelectorAll","o","removeAttribute","printableHtmlOfDocument","$htmlDoc","$html","clone","remove","base","prepend","html","printableHtmlOfDocument2","theDocument","documentElement","cloneNode","createElement","outerHTML","documentContent","frameContent","sFrame","$frame","contents","f","getElementById","frames","contentWindow","title","fnCallback","previewHtml","pws","appendChild","childNodes","className","dot","style","display","errorIfNotNull","sDownloadUrl","previewUrl","ifrm","width","height","visibility","addEventListener","event","postMessage","errorMsg","PageMarginUnits","PageOrientation","PrintingPasses","documentContentToPrint","frameContentToPrint","printDocument","fnCallOnDone","printFrame","previewDocument","previewFrame","printFromUrl","sUrl","sHtml","device","mBooleanOption","mPdfPageScaling","UNDEFINED","NONE","FITTOPAPER","SHRINKLARGEPAGES","mPdfPrintQuality","NORMAL","HIGH","LOSSLESS","PdfPrintSettings","pageScaling","autoRotateCenter","monochrome","normalise","printQuality","PdfPageScaling","PdfPrintQuality","resetSettings","print","undefined","object","emulatedVersion","servicesVersion","logApi","GetComponentVersion","sComponent","a","c","d","ea","sv","build","revision","secmgr","ComponentVersionString","sProgId","factory","ScriptXVersion","SecurityManagerVersion","IsUniqueIDAvailable","bForMachine","UniqueID","ResetUniqueID","baseURL","link","relativeURL","OnDocumentComplete","frameOrWindow","callback","once","rawPrinting","eContentType","sContent","bPrinted","printing","printer","printString","Shutdown","extendFactoryNamespace","keyPressCtrlP","ctrlKey","keyCode","shiftKey","preventDefault","PDF","htmlPrefixes","unloadMsg","promptAndPrint","bPrompt","fnPrint","fnNotifyStarted","bStarted","UI","PrinterSettings","dlgAccepted","isSnippet","foundPrefix","sPrefix","printHtmlContent","docType","substr","printPdfContent","iEnhancedFormatting","pdfPrintMode","sOrientation","portrait","bPortrait","leftMargin","topMargin","bottomMargin","rightMargin","templateURL","IsTemplateSupported","PageSetup","fnNotify","bDlgOK","PrintSetup","Preview","sOrOFrame","PrintHTML","PrintHTMLEx","PrintPDF","options","bShrinkToFit","iPageFrom","iPageTo","pagescaling","autorotatecenter","pages","normalize","printMode","jobname","BatchPrintPDF","BatchPrintPDFEx","SetMarginMeasure","GetMarginMeasure","paperSize","sPaperSize","paperSizeName","paperSource","sPaperSource","paperSourceName","paperSource2","pageWidth","paperPageSize","pageHeight","copies","nCopies","collate","bCollate","duplex","duplex2","onafterprint","fn","onbeforeprint","onbeforeunload","sMsg","returnValue","onpagesetup","onuserpagesetup","onuserprint","onuserprintpreview","DefaultPrinter","AddPrinterConnection","RemovePrinterConnection","AddPrinterConnectionAsync","RemovePrinterConnectionAsync","CurrentPrinter","currentPrinter","printToFileName","sFileName","printBackground","bPrintBackground","unprintableLeft","unprintableMargins","unprintableRight","unprintableTop","unprintableBottom","EnumPrinters","index","arP","EnumJobs","iIndex","jobNameOut","jobs","plist","Array","GetJobsCount","printerControl","Forms","forms","Bins","bins","attributes","serverName","shareName","isLocal","isNetwork","isShared","Jobs","Purge","Pause","Resume","SetPrintScale","IsSpooling","OwnQueue","SetPageRange","bSelectionOnly","iFrom","iTo","SetPreviewZoom","Sleep","TotalPrintPages","WaitForSpoolingComplete","enhancedFormatting","PolyfillInit","PolyfillInitAsync","PolyfillAuthorisationCookie","FormatNumber","arg","isNaN","Number","topLevelNs","ui","fnCallBack","modal","bootstrap","Modal","bAccepted","sClass","bs_majorVersion","Constructor","VERSION","selectpicker","dlg","append","off","on","uiType","$el","parseFloat","toFixed","ev","$dlg","savePageSetup","$paperselect","hasClass","change","onSelectPrinter","savePrinterSettings","$printers","arrPrinters","fillPrintersList","fillAndSetBinsList","showPrinterSettings","backdrop","keyboard","show","currentPrinterName","currentSource","binsArray","$bins"],"mappings":"CAYE,SAAWA,EAAMC,GACf,IAAIC,EAuCK,WAGT,IAAIC,EAAaC,KACbC,EAAU,WACVC,EAA6B,oBAAb,aAA0D,IAAtBC,OAAgB,WAAsBA,OAAOC,UACjGC,EAAkC,oBAAb,aAAyD,IAArBF,OAAe,UAAsBA,OAAOG,SAErGC,EAAM,SAAUC,GACZN,GACAO,QAAQF,IAAI,aAAeC,EAEnC,EAEIE,EAAO,SAAUF,GACjBC,QAAQC,KAAK,aAAeF,EAChC,EAEIG,EAAQ,SAAUH,GAClBC,QAAQE,MAAM,aAAeH,EACjC,EAkDA,SAASI,EAAWC,EAASC,EAAOC,EAAYC,GAmC5C,OAlCAL,EAAM,mCAAqCE,EAAU,MACjDE,EACA,OACAC,EACA,OACAF,EAAMG,aACN,OACAH,EAAMI,WACN,KAEgB,KAAhBF,GAAsC,0BAAhBA,EAElBA,EADe,UAAfD,EACcD,EAAMG,cAAgBF,EAGF,iBAAvBD,EAAMK,cAAmE,iBAA/BL,EAAMK,aAAaC,QACtDN,EAAMK,aAAaC,QAGC,iBAAvBN,EAAMG,aACCH,EAAMG,aAGN,0BAKQ,iBAAvBH,EAAMK,cAA2D,iBAAvBL,EAAMG,cAA6BH,EAAMG,aAAaI,OAAS,IAChHL,EAAcF,EAAMG,cAI5BN,EAAM,4BAA2BK,EAAc,KACxCA,CACX,CAKA,OAxFAjB,EAAWuB,sBAAwB,SAAU1B,EAAMC,GAC/C,IAAIC,EAAYD,IAEhBU,EAAI,oCAAsCX,GAI1C,IAFA,IAAI2B,EAAa3B,EAAK4B,MAAM,KACxBC,EAAS1B,EAAW0B,OAASzB,KAAK0B,QAAU1B,KAAK2B,OAAS3B,KAAK4B,GAAK5B,KAC/D6B,EAAI,EAAGA,EAAIN,EAAWF,OAAQQ,IAAK,CACxC,IAAIC,EAAcP,EAAWM,GAC7B,GAAIA,IAAMN,EAAWF,OAAS,EAC1B,QAAkC,IAAvBI,EAAMK,GACbvB,EAAI,iCAAmCuB,GACvCL,EAAMK,GAAehC,MAClB,CACHS,EAAI,gCAAkCuB,GACtC,IAAIC,EAAWN,EAAMK,GACrBL,EAAMK,GAAehC,EAErB,IAAIkC,EAAWP,EAAMK,GAGrB,IAAK,IAAIG,KADT1B,EAAI,6BACawB,EACTA,EAASG,eAAeD,KACxB1B,EAAI,kBAAoB0B,GACxBD,EAASC,GAAQF,EAASE,GAGtC,WACqC,IAAvBR,EAAMK,IACpBvB,EAAI,qBAAuBuB,GAC3BL,EAAMK,GAAe,CAAC,GAEtBvB,EAAI,2BAA6BuB,GAErCL,EAAQA,EAAMK,EAClB,CACJ,EAiDAvB,EAAI,yBAA2BN,EAAU,YAGlC,CAOHM,IAAKA,EAQLG,KAAMA,EAQNC,MAAOA,EAOP,WAAIV,GAAY,OAAOA,CAAS,EAOhC,cAAIkC,GAAe,OAAOjC,CAAM,EAChC,cAAIiC,CAAWC,GACXlC,EAAOkC,CACX,EAOA,gBAAIC,GAAiB,OAAOhC,CAAW,EACvC,gBAAIgC,CAAaD,GACb/B,EAAY+B,CAChB,EAYAE,SAAU,SAAUC,GAChB,IAAIC,EAAUD,EAAUf,MAAM,KAC1BiB,EAAS1C,EAAW0B,MAAMtB,OAIX,WAAfqC,EAAQ,KACRA,EAAUA,EAAQE,MAAM,IAI5B,IAAK,IAAIb,EAAI,EAAGA,EAAIW,EAAQnB,OAAQQ,IAAK,CACrC,IAAIc,EAAWH,EAAQX,QAGS,IAArBY,EAAOE,KACdF,EAAOE,GAAY,CAAC,GAGxBF,EAASA,EAAOE,EACpB,CAGA,OAAOF,CACX,EAMA,SAAIhB,CAAMmB,GAAK7C,EAAW0B,MAAQmB,CAAG,EAWrCC,gBAAiB,SAAUC,EAAWC,GAElC,IAAIC,EAAIF,EAAUG,QAAQ,QAW1B,OAVW,IAAPD,GACIF,EAAUI,YAAY,OAAUJ,EAAUzB,OAAS,IACnDyB,GAAa,KAEjBA,GAAa,OAASC,GAItBD,EAAYA,EAAUK,UAAU,EAAGH,GAAK,QAAUD,EAE/CD,CACX,EAWAM,oBAAqB,SAAUN,EAAWO,GAEtC,IAAIL,EAAIF,EAAUG,QAAQ,QAW1B,OAVW,IAAPD,GACIF,EAAUI,YAAY,OAAUJ,EAAUzB,OAAS,IACnDyB,GAAa,KAEjBA,GAAaO,GAIbP,EAAYA,EAAUK,UAAU,EAAGH,GAAK,IAAMK,EAE3CP,CACX,EAeAQ,eAAgB,SAAUzC,EAASC,EAAOC,EAAYC,GAClD,OAAOJ,EAAWC,EAASC,EAAOC,EAAYC,EAClD,EAWAuC,gBAAiB,SAAU1C,EAASG,GAChC,MAAMwC,EAA6B,iBAAhBxC,EAA2BA,EAAcA,EAAYyC,QAExE,OADA9C,EAAM,oCAAsCE,EAAU,KAAO2C,GACtDA,CACX,EAGR,CAvUoB3D,GAIZ4B,EAAQzB,KAQR+B,EAAW,KAQf,QAP2B,IAAhBN,EAAM7B,KAEbmC,EAAWN,EAAM7B,IAGrB6B,EAAM7B,GAAQE,EAEG,OAAbiC,EAAmB,CACnB,IAAIC,EAAWP,EAAM7B,GAGrB,IAAK,IAAIqC,KAAQF,EACTA,EAASG,eAAeD,KAExBD,EAASC,GAAQF,EAASE,GAGtC,CAOAnC,EAAU2B,MAAQA,CAErB,CAxCC,CAwCC,UA+TCH,sBACD,wBAAwB,WAEvB,MAAMrB,EAAU,WACVyD,EAAkB,eAClBC,EAAiB,cACjBC,EAAoB,iBACpBC,EAAqB,eACrBC,EAAqB,aAG3B,IAAIC,EAAc,GAIlB,MAAMC,EAA2B,mCAE3BC,EAAwB,oBACxBC,EAA6B,kBAC7BC,EAAkC,2BAclCC,EAAuB,CACzBC,QAAS,EACTC,OAAQ,EACRC,GAAI,GAWR,IAoDIC,EAAgB,CAChBC,OAAQ,IAiBZ,IAAIC,EAAiB,CAAC,EACtB,MAAM3E,EAAaC,KAEnB,IAAI2E,EAAmB,GAQvB,MAAMC,EAAiB,CAEnBC,WAAY,GACZC,WAAY,GACZC,UAAW,GACXC,YAAa,GACbC,iBAAkB,EAClBC,gBAAiB,GACjBC,WAAY,GACZC,WAAW,EACXC,yBAAyB,EAEzBC,UAAW,WACFtF,KAAKqF,yBAA+C,KAApBrF,KAAK6E,aACtC7E,KAAKgF,YAAchF,KAAK6E,WACxB7E,KAAK8E,WAAa9E,KAAK6E,WACvB7E,KAAK6E,WAAa,GAE1B,EAEA,OAAIU,GAEA,GAAyB,KAArBvF,KAAKgF,YACL,OAAOhF,KAAKgF,YAGhB,GAAwB,KAApBhF,KAAK6E,YAAyC,KAApB7E,KAAK8E,WAAmB,CAClD3E,OAAOO,KAAK,iJACZ,IAAI8E,EAAOxF,KACXA,KAAKyF,UAAUzF,KAAK8E,YAAY,GAAO,WACnC,OAAOU,EAAKX,UAChB,IAAG,WACC,MAAO,EACX,GACJ,CAEA,OAAO7E,KAAK6E,UAEhB,EAKA,OAAIU,CAAIG,GACJvF,OAAOI,IAAI,2BAA6BmF,GACpC1F,KAAK2F,iBAAiBD,KACtBvF,OAAOI,IAAI,uBACXP,KAAK6E,WAAa,GAClB7E,KAAK8E,WAAaY,EAE1B,EAEAE,YAAa,SAAUF,EAAOG,EAASC,GACnC3F,OAAOI,IAAI,6BAA+BmF,GAC1C1F,KAAKyF,UAAUC,GAAO,EAAMG,EAASC,EACzC,EAEAL,UAAW,SAAUC,EAAOK,EAAQF,EAASC,GAEzC,GAAI9F,KAAKoF,WAAaW,EAAtB,CACI5F,OAAOO,KAAK,6CACZ,IAAI8E,EAAOxF,KACPgG,EAAYN,EAChBO,OAAOC,YAAW,WAAcV,EAAKC,UAAUO,EAAWD,EAAQF,EAASC,EAAS,GAAG,IAE3F,MAEA,GAAI9F,KAAK2F,iBAAiBD,KAAW1F,KAAKmG,mBAAmBT,GAAQ,CAEjE,IAeQU,EAfJZ,EAAOxF,KACPgG,EAAYN,EAEhBvF,OAAOI,IAAI,8BAAgCmF,EAAQ,YAAcK,GAG5B,iBAA1B/F,KAAKiF,mBACZjF,KAAKiF,iBAAmBoB,SAAS,GAAKrG,KAAKiF,mBAG3CjF,KAAKiF,iBAAmB,GACxB9E,OAAOI,IAAI,0CAA4CP,KAAKiF,kBAC5DO,EAAKJ,WAAY,EAKbgB,EADgC,iBAAzBpG,KAAKkF,iBAAgClF,KAAKkF,gBAAgB7D,OAAS,EAC5D,eAAiBrB,KAAKkF,gBAGtB,UAGlB/E,OAAOI,IAAI,2DAAkEP,KAAKiF,iBAAmBmB,GAEjGrG,EAAW2B,SAAWvB,OAAOkC,aAC7BtC,EAAW2B,OAAO4E,KAAK,oBAAsBtG,KAAKiF,iBAAmBmB,EACjE,CACIG,OAAQ,MACRC,SAAU,OACVC,OAAO,EACPC,MAAOX,IACRY,MAAK,SAAUC,GAEdzG,OAAOI,IAAI,gDAAkDqG,EAAKC,UAElE,IAAIC,EAAY,IAAIC,IAAIf,GACxBc,EAAUE,KAAOJ,EAAKC,SACtBb,EAAYc,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,SAEnE3B,EAAK4B,KAAKpB,EAAW,EAAGD,GAAQ,SAAUsB,GACtC7B,EAAKX,WAAawC,EAClB7B,EAAKV,WAAa,GAClBU,EAAKJ,WAAY,EACjBS,EAAQwB,GAAU,EACtB,IAAG,SAAUrG,GACTwE,EAAKX,WAAa,GAClBW,EAAKV,WAAa,GAClBU,EAAKT,UAAYiB,EACjBR,EAAKJ,WAAY,EACK,mBAAXU,GACPA,EAAO9E,EAEf,GAEJ,IACCsG,MAAK,SAAUxG,EAAOC,EAAYC,GAC/BwE,EAAKJ,WAAY,EACjBI,EAAKX,WAAa,GAClBW,EAAKV,WAAa,GAClBU,EAAKT,UAAYiB,EAEjB,MAAMxC,EAAMrD,OAAOmD,eAAe,wCAAyCxC,EAAOC,EAAYC,GAC9Fb,OAAOO,KAAK8C,GAEU,mBAAXsC,GACPA,EAAO,wCAA0CtC,EAEzD,IAGJ+D,MAAM,oBAAsBvH,KAAKiF,iBAAmBmB,GAC/CoB,MAAMC,IACH,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAM,eAAeF,EAASG,UAE5C,OAAOH,EAASI,MAAM,IAEzBL,MAAKZ,IACFzG,OAAOI,IAAI,gDAAkDqG,EAAKC,UAElE,IAAIC,EAAY,IAAIC,IAAIf,GACxBc,EAAUE,KAAOJ,EAAKC,SACtBb,EAAYc,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,SAEnE3B,EAAK4B,KAAKpB,EAAW,EAAGD,GAAQ,SAAUsB,GACtC7B,EAAKX,WAAawC,EAClB7B,EAAKV,WAAa,GAClBU,EAAKJ,WAAY,EACjBS,EAAQwB,GAAU,EACtB,IAAG,SAAUrG,GACTwE,EAAKX,WAAa,GAClBW,EAAKV,WAAa,GAClBU,EAAKT,UAAYiB,EACjBR,EAAKJ,WAAY,EACK,mBAAXU,GACPA,EAAO9E,EAEf,GAAE,IAEL8G,OAAMnH,IACH6E,EAAKJ,WAAY,EACjBI,EAAKX,WAAa,GAClBW,EAAKV,WAAa,GAClBU,EAAKT,UAAYiB,EAEjB,MAAMhF,EAAcb,OAAOoD,gBAAgB,oCAAsCmC,EAAO/E,GAElE,mBAAXmF,GACPA,EAAO,wCAA0C9E,EACrD,MAKZwE,EAAKJ,WAAY,EACjBI,EAAK4B,KAAKpB,EAAWR,EAAKL,WAAYY,GAAQ,SAAUsB,GACpD7B,EAAKX,WAAawC,EAClB7B,EAAKV,WAAa,GAClBU,EAAKJ,WAAY,EACjBS,EAAQwB,GAAU,EACtB,IAAG,SAAUrG,GACTwE,EAAKX,WAAa,GAClBW,EAAKV,WAAa,GAClBU,EAAKJ,WAAY,EAEjB,IACY,IAAI2B,IAAIf,GAChBR,EAAKT,UAAYiB,CACrB,CACA,MAAO+B,GAAK,CAEU,mBAAXjC,GACPA,EAAO,2CAA8CE,EAAY,kCAEzE,IAER,MAEQhG,KAAKmG,mBAAmBT,GACF,mBAAXI,EACPA,EAAO,mCAAqCJ,EAAQ,sEAGpDvF,OAAOO,KAAK,mCAAqCgF,EAAQ,iDAI7DG,EAAQ7F,KAAK6E,WAAY7E,KAAKiF,iBAAmB,EAE7D,EASAmC,KAAM,SAAUtE,EAAWkF,EAAcjC,EAAQF,EAASC,GACtD,GAAIhD,EAAUzB,OAAS,EAAG,CACtB,MAAMmE,EAAOxF,KACb,IAAI8G,EAEJ,IAEI,GADAA,EAAY,IAAIC,IAAIjE,GACO,UAAvBgE,EAAUG,UAA+C,WAAvBH,EAAUG,SAE5C,YADAnB,EAAO,qBAAuBhD,EAGtC,CAAE,MAAOiF,GAEL,YADAjC,EAAO,gBAAkBhD,EAE7B,CAEA3C,OAAOI,IAAI,0BAA4BuC,EAAY,WAAagE,EAAUE,MAG1E,MAAMnC,EAAa1E,OAAO0C,gBAAgBiE,EAAUmB,KAAMpE,EAAqB,SAE3E9D,EAAW2B,SAAWvB,OAAOkC,cAC7BlC,OAAOI,IAAI,gBAAkBsE,GAC7B9E,EAAW2B,OAAO4E,KAAKzB,EACnB,CACI0B,OAAQ,MACRC,SAAU,OACVC,OAAO,EACPC,MAAOX,IACRY,MAAK,SAAUC,GACd,MAAMsB,EAAcpB,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,SAC3EhH,OAAOI,IAAI,gCAAkC2H,EAAc,KAC3DrC,EAAQqC,EACZ,IACCZ,MAAK,SAAUxG,EAAOC,EAAYC,GAE/Bb,OAAOI,IAAI,wBAA0BS,EAAc,MAAQgH,EAAe,SAAWlB,EAAUqB,UAC3FH,EAAe,IAA6B,cAAvBlB,EAAUqB,UAAkD,aAAtBrB,EAAUqB,WACrErB,EAAUE,OACVjH,EAAWmG,WAAWV,EAAK4B,KAAKN,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,WAAYa,EAAcjC,EAAQF,EAASC,GAAS,KAG3I9E,EAAcb,OAAOmD,eAAe,4CAA6CxC,EAAOC,EAAYC,GAC9E,mBAAX8E,GACP3F,OAAOI,IAAI,mBAAqBS,GAChC8E,EAAO9E,IAGPb,OAAOO,KAAK,kCAGxB,MAGJP,OAAOI,IAAI,cAAgBsE,GACvBkB,EACAwB,MAAM1C,GACD2C,MAAMC,IACH,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAM,eAAeF,EAASG,UAE5C,OAAOH,EAASI,MAAM,IAEzBL,MAAKZ,IACF,MAAMsB,EAAcpB,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,SAC3EhH,OAAOI,IAAI,gCAAkC2H,EAAc,KAC3DrC,EAAQqC,EAAY,IAEvBJ,OAAOnH,IAEJR,OAAOI,IAAI,wBAA0BI,EAAQ,MAAQqH,EAAe,SAAWlB,EAAUqB,UACrFH,EAAe,IAA6B,cAAvBlB,EAAUqB,UAAkD,aAAtBrB,EAAUqB,WACrErB,EAAUE,OACVjH,EAAWmG,WAAWV,EAAK4B,KAAKN,EAAUG,SAAW,KAAOH,EAAUI,KAAOJ,EAAUK,WAAYa,EAAcjC,EAAQF,EAASC,GAAS,KAG3I9E,YAAcb,OAAOoD,gBAAgB,4CAA6C5C,GAC5D,mBAAXmF,GACP3F,OAAOI,IAAI,mBAAqBS,aAChC8E,EAAO9E,cAGPb,OAAOO,KAAK,kCAEpB,KAKRP,OAAOQ,MAAM,0CACS,mBAAXmF,GACPA,EAAO,2CAKvB,CACJ,EAIAsC,KAAM,SAAUC,EAAM9B,EAAQ+B,EAAUC,EAAWxC,EAAQF,EAASC,GAEhE,MAAMN,EAAOxF,KAEb,GAAwB,KAApBA,KAAK6E,YAAyC,KAApB7E,KAAK8E,WAE/B9E,KAAKyF,UAAUzF,KAAK8E,WAAYiB,GAAQ,WACnB,KAAbP,EAAKD,IACLC,EAAK4C,KAAKC,EAAM9B,EAAQ+B,EAAUC,EAAWxC,EAAQF,EAASC,GAGxC,mBAAXA,GACPA,EAAO,4CAGnB,GAAGA,QAGH,GAAwB,KAApB9F,KAAK6E,WAAmB,CACxB,MAAMA,EAAa1E,OAAO0C,gBAAgB7C,KAAK6E,WAAYwD,GAC3DlI,OAAOI,IAAI,yBAA2BgG,EAAS,KAAO1B,GACtD,IAAI2D,EAAW,CACXjC,OAAQA,EACRE,OAAO,EACPC,MAAOX,EACP0C,OAAO,EACPjC,SAAU,OACVkC,YAAa,oBAcjB,GAXIH,IACAC,EAASG,QAAU,CACfC,cAAiB,SAAWC,KAAKC,EAAc,OAIlD9I,KAAK+I,eAAeT,KACrBnI,OAAOI,IAAI,oBACXiI,EAAS5B,KAAOoC,KAAKC,UAAUX,IAG/BvI,EAAW2B,SAAWvB,OAAOkC,aAC7BtC,EAAW2B,OAAO4E,KAAKzB,EAAY2D,GAC9B7B,MAAK,SAAUC,GAIZ,MAHuB,mBAAZf,GACPA,EAAQe,GAELA,CACX,IACCU,MAAK,SAAUxG,EAAOC,EAAYC,GAE/B,GADAA,EAAcb,OAAOmD,eAAe,wBAA0B+E,EAAO9B,EAAQzF,EAAOC,EAAYC,GAC1E,mBAAX8E,EAGP,MAAM,IAAI6B,MAAM3G,GAFhB8E,EAAO9E,EAIf,IACCkI,QAAO,SAAUC,EAAapI,EAAYqI,GACvC5D,EAAKF,WACT,SAGJ,GAAIS,EAEIyC,EAASG,QADTJ,EACmB,CACfK,cAAiB,SAAWC,KAAKC,EAAc,KAC/C,eAAgB,oBAID,CACf,eAAgB,oBAIRvB,MAAM1C,EAAY,CAC9B0B,OAAQiC,EAASjC,OACjBoC,QAASH,EAASG,QAClBU,KAAMb,EAAS5B,KACf0C,eAAgB,2BAChBC,KAAM,OACNC,YAAa,OACb/C,MAAO,WACPgD,SAAU,QACVC,WAAW,IAEVlC,MAAMC,IAEH,GADAjC,EAAKF,YACAmC,EAASC,GAsBd,OAAOD,EAASI,OApBZ,GAAuB,KAAnBJ,EAASG,QAAoC,KAAnBH,EAASG,OACvBH,EAASkC,OAChBnC,MAAKoC,IACF,MAAM5I,EAAcb,OAAOoD,gBAAgB,wBAA0B8E,EAAO9B,EAAQqD,GACpF,GAAsB,mBAAX9D,EAGP,MAAM,IAAI6B,MAAM3G,GAFhB8E,EAAO9E,EAGX,QAGP,CACD,GAAsB,mBAAX8E,EAGP,MAAM,IAAI6B,MAAMF,EAASvG,YAFzB4E,EAAO2B,EAASvG,WAIxB,CAGkB,IAEzBsG,MAAKZ,IACEA,GAA2B,mBAAZf,GACfA,EAAQe,EACZ,IAEHkB,OAAOnH,IACJ,MAAMK,EAAcb,OAAOoD,gBAAgB,wBAA0B8E,EAAO9B,EAAQ5F,GACpF,GAAsB,mBAAXmF,EAGP,MAAM,IAAI6B,MAAM3G,GAFhB8E,EAAO9E,EAGX,QAGP,CACD,GAAsB,mBAAX8E,EAIP,MAAM,IAAI6B,MAAM,0CAHhB7B,EAAO,yCAIf,CAER,KACK,CACD,GAAsB,mBAAXA,EAIP,MAAM,IAAI6B,MAAM,4DAHhB7B,EAAO,2DAIf,CAGJ,OAAO,CACX,EAGAH,iBAAkB,SAAUkE,GACxB,GAAwB,KAApB7J,KAAK6E,WAEL,IACI,IAAIiF,EAAa,IAAI/C,IAAI/G,KAAK6E,YAC1BkF,EAAS,IAAIhD,IAAI8C,GAErB,OAAOC,EAAW3B,UAAY4B,EAAO5B,UAAa2B,EAAW9C,MAAQ+C,EAAO/C,MAAiC,GAAzBhH,KAAKiF,gBAC7F,CAAE,MAAO+E,GAGL,OAFA7J,OAAOQ,MAAM,8BAAgCqJ,EAAEvG,QAAU,WAAazD,KAAK6E,WAAa,SAAWgF,GACnG1J,OAAOQ,MAAM,2BACN,CACX,CAGJ,OAAO,CACX,EAEAoI,eAAeP,GACS,OAAbA,GAAuD,IAAjCyB,OAAOC,KAAK1B,GAAUnH,QAAgBmH,EAAS2B,cAAgBF,OAIhG9D,mBAAoB,SAAU0D,GAC1B,GAAI7J,KAAK+E,UAAU1D,OAAS,EACxB,IACI,IAAI0D,EAAY,IAAIgC,IAAI/G,KAAK+E,WACzBgF,EAAS,IAAIhD,IAAI8C,GAErB,OAAI9E,EAAUoD,WAAa4B,EAAO5B,WAC9BhI,OAAOO,KAAK,mBAAqBmJ,EAAa,6DACvC,EAIf,CAAE,MAAOG,GAEL,OADA7J,OAAOQ,MAAM,+CAAiDqJ,EAAEvG,QAAU,WAAazD,KAAK+E,UAAY,SAAW8E,IAC5G,CACX,CAGJ,OAAO,CACX,GAGJ,IAAIf,EAAc,GACdsB,GAAa,EAEbC,GAAY,EAEZC,EAAoB,GAEpBC,EAA2B,KAc3BC,EAAkB,CAClBzD,IAAK,EACL0D,KAAM,EACNC,UAAW,EACXC,OAAQ,GAGRC,EAAqB,CACrBC,QAAS,EACTC,eAAgB,EAChBC,aAAc,EACdC,UAAW,EACXC,GAAI,GAaJC,EAAkB,CAClBC,OAAQ,EACRC,MAAO,GAEPC,EAAcH,EAAgBC,OAa9BG,EAAmB,CACnBC,MAAO,EACPC,UAAW,EACXC,UAAW,GAwCXC,EAAkB,CAClBC,WAAY,EAGZC,OAAQ,EACRC,SAAU,EACVC,YAAa,EACbC,WAAY,EACZC,SAAU,EACVC,UAAW,EACXC,OAAQ,EACRC,SAAU,EAEVC,OAAQ,EACRC,WAAY,GAcZC,EAAqB,CACrBjI,QAAS,EACTkI,KAAM,EACNC,MAAO,GAePC,EAAoB,CACpBpI,QAAS,EACTqI,QAAS,EACTC,SAAU,EACVC,WAAY,GAGhB,SAASC,EAASjG,GACdjC,EAAiBmI,KAAKlG,GACtBzG,OAAOI,IAAI,2BAA6BqG,EAAKmG,cAAgB,WAAanG,EAAKoG,QAAU,eAAiBrI,EAAiBtD,OAC/H,CAEA,SAAS4L,IAEL,OADA9M,OAAOI,IAAI,2BAA6BoE,EAAiBtD,QAClDsD,EAAiBtD,MAC5B,CAEA,SAAS6L,EAAQC,GACb,OAAOxI,EAAiByI,MAAKpD,GAAKA,EAAE+C,gBAAkBI,GAC1D,CAEA,SAASE,EAAUzG,GACf,IAAI0G,EAAIJ,EAAQtG,EAAKmG,eACjBO,EACArD,OAAOC,KAAKtD,GAAM2G,SAAQ,SAAUC,GAChCF,EAAEE,GAAO5G,EAAK4G,EAClB,IAIJrN,OAAOO,KAAK,uBAAyBkG,EAAKmG,cAAgB,gBAC9D,CAEA,SAASU,EAAUN,GAEfxI,EAAmBA,EAAiB+I,QAAO1D,GAAKA,EAAE+C,gBAAkBI,IACpEhN,OAAOI,IAAI,8BAA8B4M,gBAAiBxI,EAAiBtD,UAE5C,GAA3BsD,EAAiBtD,SAAasM,EAAyB,EAE/D,CAEA,SAASC,EAASC,EAAajG,EAAQkG,GACG,mBAA3BD,EAAYE,YACnBF,EAAYE,WAAWnG,EAAQkG,EAAaD,EAAYG,SAEhE,CAMA,IAAIC,EAAkB,GACtB,SAASC,EAAsBxF,EAAayF,EAASC,EAAmBC,EAAcC,EAAQC,EAAYC,GAOtG,IAAIC,EANJtO,OAAOI,IAAI,gEAAkEmI,GACzEA,IAAgB8B,EAAgBzD,KAChC5G,OAAOI,IAAI,yBAA2B4N,GAMtCM,EADgB,KAAhB1K,EACU,CAAC,EAEPA,IAAgBC,EACNgF,KAAK0F,MAAM1F,KAAKC,UAAU,CAChClF,YAAaA,KAIPiF,KAAK0F,MAAM1F,KAAKC,UAAUvE,EAAeX,KAG3D,IAAI8J,EAAc,CACdc,YAAajG,EACbkG,QAAST,EACTU,SAAU7F,KAAK0F,MAAM1F,KAAKC,UAAUmF,IACpCU,OAAQL,EACRM,uBAAwBvK,EACxBuJ,WAAYQ,EACZP,SAAUK,GAGVW,EAAU,CACVjC,cAAekC,KAAKC,MACpBnL,YAAa8J,EAAYiB,OAAO/K,YAChCiJ,QAAS/I,GAEb4I,EAASmC,GAET,IAAIG,EAAqBlB,EACzBA,EAAkB,GAElB,IAAImB,EAAoBZ,EAExB,OAAO,WAEH,OADAf,EAAUuB,EAAQjC,eACXsC,EAAc3L,EAAiBmK,EAClC,CACIvG,KAAM,SAAUgI,GACZ1B,EAASC,EAAanC,EAAgBU,MAAOkD,GAC7CnP,OAAOoP,QAAQC,MAAMC,YAAYH,GACX,mBAAXhB,GACPA,EAAO,eAEf,EAEAoB,aAAc,SAAU9I,GACpBzG,OAAOI,IAAI,mCACXqN,EAASC,EAAanC,EAAgBE,QACtC+D,EAAWjM,EAAiBmK,EAAajH,EAAKmG,eACzC,GACD,SAAUnG,GACN,GAAa,OAATA,EAAe,CACfzG,OAAOI,IAAI,sCACXqN,EAASC,EAAanC,EAAgBO,WAEtC,IAAI2D,EAAMzP,OAAO0C,gBAAgB+B,EAAeW,IAAK7B,EAAkB,aAAekD,EAAKmG,eACvFoC,EAAmB9N,OAAS,IAC5BuO,GAAO,IAAMT,GAEjBC,EAAkBQ,EAAKhJ,EAAKmG,cAChC,CAEsB,mBAAXuB,GACPA,EAAgB,OAAT1H,EAAgB,eAAiB,KAEhD,GACR,EAEAiJ,eAAgB,SAAUjJ,GACtBzG,OAAOI,IAAI,8BACXqN,EAASC,EAAanC,EAAgBE,QACtC+D,EAAWjM,EAAiBmK,EAAajH,EAAKmG,eACzC,GACD,SAAUnG,GACO,OAATA,GACAgH,EAASC,EAAanC,EAAgBO,WAGpB,mBAAXqC,GACPA,EAAgB,OAAT1H,EAAgB,eAAiB,KAEhD,GACR,EAEAkJ,UAAW,SAAUlJ,GACjBgH,EAASC,EAAanC,EAAgBU,MAAOxF,EAAKnD,SAClDtD,OAAOoP,QAAQC,MAAMC,YAAY7I,EAAKnD,SACtCtD,OAAOI,IAAI,wBACXkN,EAAU7G,EAAKmG,eACO,mBAAXuB,IACPnO,OAAOI,IAAI,eACX+N,EAAO1H,EAAKnD,SAEpB,EAEAiE,GAAI,SAAUd,GACVgH,EAASC,EAAanC,EAAgBO,WACtC9L,OAAOI,IAAI,sCACXkN,EAAU7G,EAAKmG,eACO,mBAAXuB,GACPA,EAAO,KAEf,GAEZ,CACJ,CAwBA,IAAIyB,EAAoB,EACpBpC,EAAyB,EACzBqC,EAAsB,IACtBC,EAAqB,IACzB,SAASC,EAAkBxH,EAAayF,EAASC,EAAmBE,EAAQC,EAAYF,GAEpF,IAAKF,GAA+B,iBAAZA,GAA2C,IAAnBA,EAAQ9M,OAKpD,OAJAlB,OAAOoP,QAAQC,MAAMC,YAAY,gDACX,mBAAXnB,GACPA,EAAO,gCAEJ,EAIX,IAAI6B,EAAIlB,KAAKC,MASb,OARKiB,EAAIxC,EAA0BsC,IAC/BF,EAAoB,GAExBpC,EAAyBwC,EACzBjK,WAAWgI,EAAsBxF,EAAayF,EAASC,EAAmBC,EAAcC,EAAQC,GAAY,SAAUlG,GAClHpC,OAAOmK,KAAK/H,EAAM,QACtB,IAAI0H,GACJA,GAAqBC,GACd,CACX,CAMA,SAASK,EAAqBC,EAAUC,EAAkBjC,EAAQC,EAAY3H,GAI1E,IAAI6H,EAFJtO,OAAOI,IAAI,mEAAqE+P,EAAW,kBAAoBvM,GAK3G0K,EADgB,KAAhB1K,EACU,CAAC,EAEDiF,KAAK0F,MAAM1F,KAAKC,UAAUvE,EAAeX,KAGvD,MAAM8J,EAAc,CAChB2C,SAAUF,EACVG,YAAaF,EAAiBG,eAC9B7B,SAAU7F,KAAK0F,MAAM1F,KAAKC,UAAUsH,IACpCzB,OAAQL,EACRM,uBAAwBvK,EACxBuJ,WAAYQ,EACZP,SAAUpH,GAIdiH,EAAYgB,SAAS8B,SAAWJ,EAAiBG,eAEjD,MAAM1B,EAAU,CACZjC,cAAekC,KAAKC,MACpBnL,YAAa8J,EAAYiB,OAAO/K,YAChCiJ,QAAS/I,GAEb4I,EAASmC,GAET,IAAIG,EAAqBlB,EAGzB,OAFAA,EAAkB,GAEX,WAEH,OADAR,EAAUuB,EAAQjC,eACXsC,EAAc1L,EAAgBkK,EACjC,CACIvG,KAAM,SAAUgI,GACZ1B,EAASC,EAAanC,EAAgBU,MAAOkD,GAC7CnP,OAAOoP,QAAQC,MAAMC,YAAYH,GACX,mBAAXhB,GACPA,EAAO,eAEf,EAEAoB,aAAc,SAAU9I,GACpBzG,OAAOI,IAAI,8CACXqN,EAASC,EAAanC,EAAgBE,QACtC+D,EAAWhM,EAAgBkK,EAAajH,EAAKmG,eACxC,GACD,SAAUnG,GACN,GAAa,OAATA,EAAe,CACfzG,OAAOI,IAAI,8BACXqN,EAASC,EAAanC,EAAgBO,WACtC,IAAI2D,EAAMzP,OAAO0C,gBAAgB+B,EAAeW,IAAK5B,EAAiB,aAAeiD,EAAKmG,eACtFoC,EAAmB9N,OAAS,IAC5BuO,GAAO,IAAMT,GAEjBlJ,OAAOmK,KAAKR,EAAK,QACrB,CAEsB,mBAAXtB,GACPA,EAAgB,OAAT1H,EAAgB,eAAiB,KAEhD,GACR,EAEAiJ,eAAgB,SAAUjJ,GACtBzG,OAAOI,IAAI,8BACXqN,EAASC,EAAanC,EAAgBE,QACtC+D,EAAWhM,EAAgBkK,EAAajH,EAAKmG,eACxC,GACD,SAAUnG,GACO,OAATA,GACAgH,EAASC,EAAanC,EAAgBO,WAGpB,mBAAXqC,GACPA,EAAgB,OAAT1H,EAAgB,eAAiB,KAEhD,GACR,EAEAkJ,UAAW,SAAUlJ,GACjBgH,EAASC,EAAanC,EAAgBU,MAAOxF,EAAKnD,SAClDtD,OAAOoP,QAAQC,MAAMC,YAAY7I,EAAKnD,SACtCtD,OAAOI,IAAI,6CAA+CqG,EAAKmG,eAC/DU,EAAU7G,EAAKmG,eACO,mBAAXuB,IACPnO,OAAOI,IAAI,eACX+N,EAAO,gBAEf,EAEA5G,GAAI,SAAUd,GACVgH,EAASC,EAAanC,EAAgBO,WACtC9L,OAAOI,IAAI,sCACXkN,EAAU7G,EAAKmG,eACO,mBAAXuB,GACPA,EAAO,KAEf,GAEZ,CACJ,CAgBA,SAASsC,EAAiBN,EAAUC,EAAkBjC,EAAQC,EAAY3H,GAEtE,IAAK0J,GAAiC,iBAAbA,GAA6C,IAApBA,EAASjP,OAKvD,OAJAlB,OAAOoP,QAAQC,MAAMC,YAAY,wCACX,mBAAXnB,GACPA,EAAO,gCAEJ,EAIX,MAAM6B,EAAIlB,KAAKC,MAOf,OANKiB,EAAIxC,EAA0BsC,IAC/BF,EAAoB,GAExBpC,EAAyBwC,EACzBjK,WAAWmK,EAAqBC,EAAUC,EAAkBjC,EAAQC,EAAY3H,GAAOmJ,GACvFA,GAAqBC,GACd,CACX,CAeA,SAASa,EAAoBnI,EAAayF,EAASG,GAE/C,GADAnO,OAAOI,IAAI,kEAAoEmI,EAAc,kBAAoB3E,GAC7G2E,IAAgB8B,EAAgBzD,IAChC5G,OAAOI,IAAI,yBAA2B4N,QAGtC,GAAIzF,IAAgB8B,EAAgBG,OAKhC,OAJAxK,OAAOoP,QAAQC,MAAMC,YAAY,wCACX,mBAAXnB,GACPA,EAAO,yCAEJ,EAIf,IAAKH,GAA+B,iBAAZA,GAA2C,IAAnBA,EAAQ9M,OAKpD,OAJAlB,OAAOoP,QAAQC,MAAMC,YAAY,gDACX,mBAAXnB,GACPA,EAAO,gCAEJ,EAGX,GAAoB,KAAhBvK,EAKA,OAJA5D,OAAOoP,QAAQC,MAAMC,YAAY,oDACX,mBAAXnB,GACPA,EAAO,qDAEJ,EAGX,MAAMT,EAAc,CAChBc,YAAajG,EACbkG,QAAST,EACT2C,YAAa/M,EACb8K,SAAU,CACN8B,SAAU,gBAEd7B,OAAQpK,EAAeX,IAG3B,OAAOsL,EAAczL,EAAmBiK,EACpC,CACIvG,KAAM,SAAUgI,GACZnP,OAAOoP,QAAQC,MAAMC,YAAYH,GACX,mBAAXhB,GACPA,EAAO,eAEf,EAEAwB,UAAW,SAAUlJ,GACjBzG,OAAOoP,QAAQC,MAAMC,YAAY7I,EAAKnD,SACtCtD,OAAOI,IAAI,wBACXkN,EAAU7G,EAAKmG,eACO,mBAAXuB,IACPnO,OAAOI,IAAI,eACX+N,EAAO1H,EAAKnD,SAEpB,EAEAiE,GAAI,SAAUd,GACVzG,OAAOI,IAAI,sCACXkN,EAAU7G,EAAKmG,eACO,mBAAXuB,GACPA,EAAO,KAEf,GAEZ,CASA,SAASyC,EAAUjO,EAAWkO,EAAmBnL,EAASC,GAC7B,iBAAdhD,GAA0BA,EAAUzB,OAAS,GACpDlB,OAAOI,IAAI,2BAA6BuC,EAAY,kBAAoBkO,GAExElI,EAA2C,iBAAtBkI,GAAkCA,EAAkB3P,OAAS,EAAI2P,EAAoBlI,EAC1G/E,EAAc,GACdW,EAAiB,CAAC,EAClBC,EAAmB,GACnByF,GAAa,EACbE,EAAoB,GAEE,mBAAXzE,EACPjB,EAAegB,YAAY9C,EAAW+C,EAASC,GAG/ClB,EAAeW,IAAMzC,IAIzB3C,OAAOI,IAAI,uCAAyCqE,EAAeW,IAAM,8BAAgCyL,EAAoB,mBAC7HlI,EAA2C,iBAAtBkI,GAAkCA,EAAkB3P,OAAS,EAAI2P,EAAoBlI,EAElH,CAEA,SAASmI,EAAgBnO,EAAWkO,GAChCD,EAAUjO,EAAWkO,GAErBE,GAAkB,CAAEtR,KAAM,gBAAiB8G,OAAO,IAGlDyK,EAAc,IAAI,GACd,SAAUvK,GACN2D,EAA2B3D,CAC/B,GACR,CAEA,SAASwK,EAAqBtO,EAAWkO,EAAmBnL,EAASC,GACjEiL,EAAUjO,EAAWkO,GAAmB,SAAUK,GAE9CH,GAAkB,CACdtR,KAAM,gBACN+G,KAAMd,EACNa,OAAO,EACPY,KAAMxB,IAIVqL,EAAc,IAAI,GACd,SAAUvK,GACN2D,EAA2B3D,CAC/B,GACR,GAAGd,EACP,CAUA,SAASuJ,EAAchH,EAAMwF,EAAayD,GAEtC,MAAMtC,EAAU,CACZjC,cAAekC,KAAKC,MACpBnL,YAAa8J,EAAYiB,OAAO/K,YAChCiJ,QAAS9I,GAOb,OAJA/D,OAAOI,IAAI,wBAA0B8H,GAErCwE,EAASmC,GAEFuC,EAAYlJ,EAAO,SAAU,OAAQwF,GAAa,GAAM,GAAOjH,IAMlE,OALAzG,OAAOI,IAAI,qBAAuBqG,EAAKgB,QACvChB,EAAK7C,YAAc8J,EAAYiB,OAAO/K,YACtC6C,EAAKoG,QAAmD,iBAAlCa,EAAYgB,SAAS8B,UAAyB9C,EAAYgB,SAAS8B,SAAStP,OAAS,EAAIwM,EAAYgB,SAAS8B,SAAW,aAC/I9D,EAASjG,GACT6G,EAAUuB,EAAQjC,eACVnG,EAAKgB,QACT,KAAKgD,EAAmBG,aACpBuG,EAAkB5B,aAAa9I,GAC/B,MAEJ,KAAKgE,EAAmBE,eACpBwG,EAAkBzB,eAAejJ,GACjC,MAEJ,KAAKgE,EAAmBI,UACxB,KAAKJ,EAAmBC,QACpByG,EAAkBxB,UAAUlJ,GAC5B,MAEJ,KAAKgE,EAAmBK,GACpBqG,EAAkB5J,GAAGd,GAE7B,IAEC4K,IACG/D,EAAUuB,EAAQjC,eACoB,mBAA3BuE,EAAkBhK,MACzBgK,EAAkBhK,KAAKkK,EAC3B,GAGZ,CAaA,SAASL,EAAc9I,EAAM3B,EAAO+K,EAAWC,GAC3C,OAAOH,EAAYlJ,EAAM,MAAO,MAAM,EAAM3B,EAAO+K,EAAWC,EAClE,CAEA,SAASH,EAAYlJ,EAAMsJ,EAAYrJ,EAAUC,EAAWxC,EAAQF,EAASC,GACzE,OAAOlB,EAAewD,KAAKC,EAAMsJ,EAAYrJ,EAAUC,EAAWxC,EAAQF,EAASC,EACvF,CAEA,SAAS8L,EAAuB/D,EAAajH,EAAMiL,EAAYC,EAAOC,EAASC,GAE3E,OADA7R,OAAOI,IAAI,sCAAwCqG,EAAKgB,QAChDhB,EAAKgB,QACT,KAAK8D,EAAgBO,UACjB9L,OAAOI,IAAI,mBAAqBsR,GAChC5L,OAAOgM,cAAcJ,GACrBpE,EAAUqE,GACVE,EAAiBpL,GACjB,MAEJ,KAAK8E,EAAgBC,WACrB,KAAKD,EAAgBK,WACrB,KAAKL,EAAgBI,YACrB,KAAKJ,EAAgBM,SACrB,KAAKN,EAAgBE,OACrB,KAAKF,EAAgBG,SACrB,KAAKH,EAAgBQ,OACrB,KAAKR,EAAgBS,SACjByB,EAASC,EAAajH,EAAKgB,OAAQhB,EAAKnD,SACxC4J,EAAUzG,GAENmL,EAAU,KAAQG,QAAUC,SAAYJ,IACxC9L,OAAOgM,cAAcJ,GACrB1R,OAAOoP,QAAQC,MAAMC,YAAY,oCAErC,MAEJ,KAAK/D,EAAgBU,MACrB,KAAKV,EAAgBW,UACjBlM,OAAOI,IAAI,iDAAmDsR,GAC9DjE,EAASC,EAAajH,EAAKgB,OAAQhB,EAAKnD,SACxCgK,EAAUqE,GACV7L,OAAOgM,cAAcJ,GACrB1R,OAAOoP,QAAQC,MAAMC,YAAY,oCAAsC7I,EAAKnD,SAC5EuO,EAAiB,MACjB,MAEJ,QACIpE,EAASC,EAAajH,EAAKgB,OAAQhB,EAAKnD,SACxCtD,OAAOI,IAAI,mDAAqDsR,GAChEpE,EAAUqE,GACV7L,OAAOgM,cAAcJ,GACrBG,EAAiB,MAI7B,CAeA,SAASrC,EAAWtH,EAAMwF,EAAaiE,EAAOC,EAASC,GACnD7R,OAAOI,IAAI,eAAiBuR,GAC5B,MAAMK,EAAW,IACjB,IAAIC,GAAW,EACXP,EAAa5L,OAAOoM,aAAY,WAC3BD,EAeDjS,OAAOI,IAAI,gEAdX6R,GAAW,EACXjB,EAAc9I,EAAO,WAAayJ,GAAO,GAAOlL,IAC5CgL,EAAuB/D,EAAajH,EAAMiL,EAAYC,EAAOC,EAASC,GACtEI,GAAW,CAAK,IAEfpR,IACGb,OAAOI,IAAI,UAAYS,EAAc,qCAAuC6Q,GAC5EjE,EAASC,EAAanC,EAAgBU,MAAOpL,GAC7CyM,EAAUqE,GACV7L,OAAOgM,cAAcJ,GACrBG,EAAiB,MACjBI,GAAW,CAAK,IAKhC,GAAGD,GAEHhS,OAAOI,IAAI,eAAiBsR,EAChC,CAEA,SAASS,GAA0B1L,GAC/B,GAAgC,iBAArBA,EAAK7C,YAA0B,CACtC,GAAI6C,EAAK2L,UACL,IAAK,IAAI1Q,EAAI,EAAGA,EAAI6C,EAAerD,OAAQQ,IACvC6C,EAAe7C,GAAG0Q,WAAY,EAItC7N,EAAekC,EAAK7C,aAAe6C,EAC/BA,EAAK2L,WAAoC,IAAvBxO,EAAY1C,SAC9B0C,EAAc6C,EAAK7C,YAE3B,CACJ,CAEA,SAASmN,GAAkBsB,GACvBA,EAAS5S,KAAO4S,EAAS5S,KAAK6S,QAAQ,MAAO,MAC7CtS,OAAOI,IAAI,4BAA8BiS,EAAS5S,MAElDuR,EAAczN,EAAkB,eAAiBgP,mBAAmBF,EAAS5S,MAAQ,KAAM4S,EAAS9L,OAChG,SAAUE,GACNwD,GAAa,EACbkI,GAA0B1L,GACG,mBAAlB4L,EAAS7L,MAChB6L,EAAS7L,KAAKC,EAEtB,IACA,SAAU+L,GACgB,kBAAlBH,EAAS5S,MACTO,OAAOO,KAAK,uFACZ8R,EAAS5S,KAAO,UAChBsR,GAAkBsB,KAGlBrS,OAAOI,IAAI,wBAA0BoS,GAER,mBAAlBH,EAASlL,MAChBkL,EAASlL,KAAKqL,GAG1B,GAGR,CAEA,SAASC,GAAqBC,GAC1B,MAA4B,iBAAjBA,GAA8C,KAAjBA,QACQ,IAAjCnO,EAAemO,IACtB3B,GAAkB,CACdtR,KAAMiT,EACNnM,OAAO,EACPC,KAAM,SAAUmM,GACuB,kBAA/BD,EAAaE,gBACbF,EAAeC,EAAY/O,YAEnC,EACAuD,KAAM,SAAU0L,GAAQ7S,OAAOoP,QAAQC,MAAMC,YAAYuD,EAAO,IAIjEtO,EAAemO,IAGnB,CAAC,CACZ,CAEA,SAASI,GAA0BJ,EAAchN,EAASC,GAC1B,iBAAjB+M,GAA8C,KAAjBA,OACQ,IAAjCnO,EAAemO,GACtB3B,GAAkB,CACdtR,KAAMiT,EACNnM,OAAO,EACPC,KAAM,SAAUmM,GACuB,kBAA/BD,EAAaE,gBACbF,EAAeC,EAAY/O,aAE/B8B,EAAQnB,EAAemO,GAC3B,EACAvL,KAAM,SAAU0L,GAAQlN,EAAOkN,EAAO,IAI1CnN,EAAQnB,EAAemO,IAG3B/M,EAAO,6BACf,CAEA,SAASoN,GAAwBC,EAASC,GACtC3S,QAAQC,KAAK,6LACb,IAAI2S,EAAKlT,OAAOoP,QAAQC,MAAM8D,qBAC1BD,EAAGE,cAAgBjI,EAAiBG,WAAa4H,EAAGG,eAAeC,OAAS,GAAKJ,EAAGG,eAAeE,OAAS,GAC5GnC,EAAYzN,EAAqB,eAAiB4O,mBAAmBU,GAAaD,EAAS,MAAM,GAAM,GAGvGhT,OAAOQ,MAAM,+FAErB,CAEA,SAASgT,GAA6BR,EAASC,EAAY3B,EAAWC,GAClEvR,OAAOoP,QAAQC,MAAMoE,yBACjB,SAAUP,GACFA,EAAGE,cAAgBjI,EAAiBG,WAAa4H,EAAGG,eAAeC,OAAS,GAAKJ,EAAGG,eAAeE,OAAS,GAC5GnC,EAAYzN,EAAqB,eAAiB4O,mBAAmBU,GAAaD,EAAS,MAAM,GAAM,EAAM1B,EAAWC,IAGxHvR,OAAOQ,MAAM,gGACb+Q,EAAO,iDAEf,GACAA,EAER,CAOA,SAASmC,KAGL,GAFA1T,OAAOI,IAAI,sEAAwE8J,IAE9EA,EAAW,CAEZ,IAAIyJ,EAAY3T,OAAOoP,QAAQC,MAAM/E,KACjCsJ,EAAW5T,OAAOoP,QAAQC,MAC1BwE,EAAa7T,OAAOoP,QAAQC,MAAMyE,UAEtC,MAAMC,EAAmB5D,SAAS6D,cAAc,8BAChD,GAAID,EAAkB,CAClB,MAAMtN,EAAOsN,EAAiBE,QAC9BjU,OAAOI,IAAI,iCACPqG,EAAKyN,aAAe,QAAUzN,EAAK0N,sBACnC,wBACA1N,EAAK2N,mBACL,WACA3N,EAAK4N,eACL,eACA5N,EAAK6N,gBAET,MAAMC,EAEF,WAFc,GAAK9N,EAAK4N,gBACvBzB,cAGL,GAAK2B,EAMDvU,OAAOkC,cAAe,MANX,CACX,MAAMsS,EAAiB,GAAK/N,EAAK6N,eAC7BE,EAActT,OAAS,IACvBlB,OAAOkC,aAA+C,SAAhCsS,EAAc5B,cAC5C,CAIA,MAAM6B,EAAShO,EAAKyN,kBACE,IAAXO,IACPA,EAAShO,EAAK0N,4BAGI,IAAXM,EACPzU,OAAOQ,MAAM,6BAGa,IAAfqT,GACPA,EAAWa,QAAQD,EAAQhO,EAAK2N,oBAE/BG,GAIDvU,OACKO,KAAK,qUACVoT,EAAUe,QAAQD,EAAQhO,EAAK2N,sBAL/BpU,OAAOI,IAAI,wBACXwT,EAASe,YAAYF,EAAQhO,EAAK2N,qBAMtClK,GAAY,EAEpB,KACK,CACD,MAAM0K,EAAMzE,SAAS6D,cAAc,yBAEnC,GAAIY,EACA,QAAwB,IAAbhB,QAAiD,IAAdD,QAAmD,IAAfE,EAC9E7T,OAAOI,IAAI,+HACR,CACH,MAAMqG,EAAOmO,EAAIX,QACjBjU,OAAOI,IAAI,mCACPqG,EAAKyN,aACL,mBACAzN,EAAKoO,cACL,WACApO,EAAKqO,kBACL,eACArO,EAAKsO,sBACL,WACAtO,EAAK4N,eACL,eACA5N,EAAK6N,eACL,mBACA7N,EAAKuO,mBACL,sBACAvO,EAAKwO,sBACL,8BACAxO,EAAKyO,+BAET,MAAMX,EAEF,WAFc,GAAK9N,EAAK4N,gBACvBzB,cAECtD,EAEF,WAFiB,GAAK7I,EAAK0O,mBAC1BvC,cAECwC,EAEF,SAFkB,GAAK3O,EAAK4O,oBAC3BzC,cAGC6B,EAAShO,EAAKyN,aASpB,GAPAzP,EAAeK,iBAAmB2B,EAAKuO,mBACvCvQ,EAAeM,gBAAkB0B,EAAKwO,sBACtCxQ,EAAeS,wBAEX,WAFsC,GAAKuB,EAAKyO,+BAC/CtC,cAIA2B,EAyBDvU,OACKO,KAAK,mUACVP,OAAOkC,cAAe,EACtB2R,EAAWa,QAAQD,EAAQhO,EAAKoO,oBACM,IAA3BpO,EAAKqO,wBAGZ,IAFOrO,EACFsO,wBAELlB,EAAWyB,MAAM7O,EAAKoO,cAClBpO,EAAKsO,sBACLtO,EAAKqO,mBAEgB,GAArBjB,EAAW0B,QAAejG,GAC1BtP,OAAOoP,QAAQC,MAAMC,YAAYuE,EAAW2B,eAGpD7B,EAAUe,QAAQD,EAAQhO,EAAKoO,mBAzCpB,CACX7U,OAAOI,IAAI,wBACX,MAAMoU,EAAiB,GAAK/N,EAAK6N,eAC7BE,EAActT,OAAS,IACvBlB,OAAOkC,aAA+C,SAAhCsS,EAAc5B,eAExCiB,EAAWc,YAAYF,EAAQhO,EAAKoO,cAChCpO,EAAKsO,sBACLtO,EAAKqO,mBACTlB,EAASe,YAAYF,EAAQhO,EAAKoO,eAE9BO,GACAvB,EAAW4B,WAAWhP,EAAKoO,cAAepO,EAAKsO,sBAAuBtO,EAAKqO,mBACvE,KACI9U,OAAOI,IAAI,6FAA6F,IAE3GyJ,IACG7J,OAAOQ,MAAM,gCAAgCqJ,gBAAgBgK,EAAW2B,gBACpElG,GACAtP,OAAOoP,QAAQC,MAAMC,YAAYuE,EAAW2B,aAChD,GAIhB,CAmBAtL,GAAY,CAChB,CAER,CACJ,CACJ,CAMA,OAJAlK,OAAOI,IAAI,wBAA0BN,EAAU,YAIxC,CAWH0O,YAAanE,EAQbqL,YAAanK,EAEboK,YAAa5K,EAEb6K,eAAgBzJ,EAChB0J,cAAevJ,EACfwJ,iBAAkB7R,EAClB8R,eAAgB5K,EAQhB,iBAAI6K,GACA,OAAO9K,CACX,EAEA,iBAAI8K,CAAcC,GACd/K,EAAc+K,CAClB,EAYA,gBAAIC,GACA,OAAOzR,EAAeK,gBAC1B,EAEA,gBAAIoR,CAAaC,GACb1R,EAAeK,iBAAmB,GAAKqR,CAC3C,EAMA,mBAAIpR,GACA,OAAON,EAAeM,eAC1B,EAEA,mBAAIA,CAAgBqR,GAChB3R,EAAeM,gBAAkBqR,CACrC,EAQA,uBAAIC,GACA,OAAOhS,EAAcC,MACzB,EAEA,uBAAI+R,CAAoB/R,GACpBD,EAAcC,OAASA,CAC3B,EAOA,eAAIV,GACA,OAAOA,CACX,EAEA,eAAIA,CAAY0S,GACNA,IAAkB1S,GAAe0S,EAAc7W,OAASmE,IAC7B,iBAAlB0S,OAEsC,IAAlC/R,EAAe+R,GAIlB1W,EAAW2B,SAAWvB,OAAOkC,aAC7B6O,GAAkB,CACdtR,KAAM6W,EACN9P,KAAM,SAAUC,GACZ7C,EAAc6C,EAAK7C,WACvB,EACA2C,OAAO,EACPY,KAAM,SAAU0L,GACZ7S,OAAOoP,QAAQC,MAAMC,YAAYuD,EACrC,KAIJ7S,OAAOQ,MAAM,mIACbsS,GAA0BwD,GACrB7P,IAAW7C,EAAc6C,EAAK7C,WAAW,IACzCiP,IAAW7S,OAAOoP,QAAQC,MAAMC,YAAYuD,EAAK,IAIpB,KAA9BpO,EAAeC,WACf1E,OAAOoP,QAAQC,MAAMC,YAAY,4DAEjCtP,OAAOoP,QAAQC,MAAMC,YAAY,cAIzC1L,EAAc0S,EAIlBvF,GAAkBuF,GAG9B,EAEAC,6BAA8B,SAAUC,EAAO9Q,EAASC,GACpD,QAA+C,IAApCpB,EAA8B,eAAqBA,EAA8B,eAAKiS,EAG7F,OAFAxW,OAAOI,IAAI,oEACXsF,IAKJ8Q,GADAA,EAAQ,WAAaA,GACPlE,QAAQ,MAAO,MAC7BtS,OAAOI,IAAI,sCAAwCoW,GACnDpF,EAAY7N,EAAkB,mBAAqBgP,mBAAmBiE,GAAQ,MAAO,MAAM,GAAM,EAAM9Q,EAASC,EACpH,EAOA,WAAI7F,GACA,OAAOA,CACX,EAQA,cAAI4E,GACA,OAAOD,EAAeW,GAC1B,EASAiO,eAAgB,WACZ,OAAOxT,KAAKsT,qBAAqBE,cACrC,EAUAoD,oBAAqB,SAAU/Q,EAASC,GACpC9F,KAAK4T,yBAAwB,SAAUP,GAAMxN,EAAQwN,EAAGG,eAAiB,GAAG1N,EAChF,EAOA,kBAAIpB,GACA,MAAuB,KAAhBX,EAAqBW,EAAeX,GAAe,CAAC,CAC/D,EAEA,kBAAIW,CAAemS,GACfvE,GAA0BuE,EAC9B,EAWAC,kBAAmB,SAAUjE,GACzB,OAAOD,GAAqBC,EAChC,EAYAkE,uBAAwB,SAAUlE,EAAchN,EAASC,GACrDmN,GAA0BJ,EAAchN,EAASC,EACrD,EAyCAkR,cAAe,WACXnD,IACJ,EAcAgB,QAAS,SAAU/R,EAAWgG,GAC1BmI,EAAgBnO,EAAWgG,EAC/B,EAUAgM,YAAa,SAAUhS,EAAWgG,GAK9BiI,EAAUjO,EAAWgG,EACzB,EAeAmO,aAAc,SAAUnU,EAAWgG,EAAajD,EAASC,GACrDsL,EAAqBtO,EAAWgG,EAAajD,EAASC,EAC1D,EAWAoR,iBAAkB,SAAUpU,EAAW+C,EAASC,GAC5ClB,EAAea,UAAU3C,GAAW,EAAM+C,EAASC,EACvD,EASAwN,mBAAoB,WAShB,OAPK/I,GACD4G,EAAc,IAAI,GACd,SAAUvK,GAAQ2D,EAA2B3D,CAAM,IACnD,SAAUoD,GACN7J,OAAOoP,QAAQC,MAAMC,YAAYzF,EAAEvG,QACvC,IAED8G,CACX,EAUAqJ,wBAAyB,SAAU/N,EAASC,GAEnCyE,EAQD1E,EAAQ0E,GAPR4G,EAAc,IAAI,GACd,SAAUvK,GACN2D,EAA2B3D,EAC3Bf,EAAQe,EACZ,GAAGd,EAKf,EAYAqR,yBAA0B,SAAUC,EAAYC,GAC5CjN,GAAa,EACbkI,GAA0B8E,GAC1B9M,EAAoB+M,CACxB,EASA,eAAIC,GACA,OAAOlN,CACX,EASA,yBAAImN,GACA,OAAOjN,CACX,EASAkN,qBAAsB,SAAUpE,GAC5BF,GAAwB,MAAOE,EACnC,EASAqE,wBAAyB,SAAUrE,GAC/BF,GAAwB,SAAUE,EACtC,EAWAsE,0BAA2B,SAAUtE,EAAY3B,EAAWC,GACxDiC,GAA6B,MAAOP,EAAY3B,EAAWC,EAC/D,EAWAiG,6BAA8B,SAAUvE,EAAY3B,EAAWC,GAC3DiC,GAA6B,SAAUP,EAAY3B,EAAWC,EAClE,EAYAP,cAAe,SAAUyG,EAAelR,EAAO+K,EAAWC,GACtDP,EAAczN,EAAkBkU,EAAelR,EAAO+K,EAAWC,EACrE,EAiBAoC,UAAW5D,EAeX2H,mBAAoB,SAAUnP,EAAayF,EAASC,EAAmBE,EAAQwJ,GAC3E,IAAIC,EAAkBhU,EACtBA,EAAcC,EAEdkK,EAAsBxF,EAAayF,EAASC,EAAmB,CAAC,EAAGE,GAAQ,WAAc,GAAGwJ,EAA5F5J,GACAnK,EAAcgU,CAClB,EAgBAC,SAAUpH,EAcVqH,YAAapH,EAcbvN,eAAgB,SAAUzC,EAASC,EAAOC,EAAYC,GAClD,OAAOb,OAAOmD,eAAezC,EAASC,EAAOC,EAAYC,EAC7D,EAWAuC,gBAAiB,SAAU1C,EAASG,GAChC,OAAOb,OAAOoD,gBAAgB1C,EAASG,EAC3C,EAWAyO,YAAa,SAAU7F,GAEnB,OADAzJ,OAAOQ,MAAM,gBAAkBiJ,GACvByB,GACJ,KAAKH,EAAgBC,OACjBhL,OAAOoP,QAAQC,MAAM0I,kBAAkBtO,GACvC,MAEJ,KAAKsB,EAAgBE,MACjB,MAAM,IAAIzD,MAAMiC,GAE5B,EAiBAsO,kBAAmB,SAAUtO,GACzBuO,MAAM,iDAAmDvO,EAC7D,EAiBAwO,4BAA6B,SAAUC,GACnClY,OAAOI,IAAI,4BAA8B8X,GACzCF,MAAME,EAAqB,wBAC/B,EAUA,SAAIC,GACA,OAAO3T,CACX,EASA,cAAI4T,GACA,OAAOvY,KAAKsY,MAAM5K,QAAOJ,GAAKA,EAAEN,UAAY/I,GAAyBqJ,EAAEN,UAAY9I,GAA8BoJ,EAAEN,UAAY7I,IAAiC9C,MACpK,EASA,kBAAImX,GACA,OAAOxY,KAAKsY,MAAM5K,QAAOJ,GAAKA,EAAEN,SAAW/I,GAAyBqJ,EAAEN,SAAW9I,GAA8BoJ,EAAEN,SAAW7I,IAAiC9C,MACjK,EASA,yBAAIoX,GACA,OAAOzY,KAAKsY,MAAMI,OAAMpL,GAAKA,EAAEN,UAAY/I,GAAyBqJ,EAAEN,UAAY9I,GAA8BoJ,EAAEN,UAAY7I,GAClI,EAgBAwU,qBAAsB,WAClB,IAAIC,EAAO,CAAE7L,cAAekC,KAAKC,MAAOnL,YAAa,oBAAqBiJ,QAAS7I,GAEnF,OADA0I,EAAS+L,GACFA,CACX,EASAC,gBAAiB,SAAUD,GACvBnL,EAAUmL,EAAK7L,cACnB,EASA,cAAI+L,GACA,OAAO7L,IAAa,CACxB,EAWA8L,wBAAyB,SAAUC,EAAUC,GAEzC,GADA9Y,OAAOI,IAAI,mCAAqCyY,EAAW,KACjC,mBAAfC,EACP,KAAM,yDAGV,IAAIC,EAAYjK,KAAKC,MACjBiD,EAAW,IAEXN,EAAa5L,OAAOoM,aAAY,WACb,IAAfpF,KACA9M,OAAOI,IAAI,sCACX0F,OAAOgM,cAAcJ,GACrBoH,GAAW,IAEPD,GAAY,GAAK/J,KAAKC,MAAQgK,EAAYF,IAC1C7Y,OAAOI,IAAI,qCACX0F,OAAOgM,cAAcJ,GACrBoH,EAA0B,IAAfhM,KAGvB,GAAGkF,EACP,EAcAgH,wBAAyB,SAAUH,EAAUC,GAEzC,GADA9Y,OAAOI,IAAI,mCAAqCyY,EAAW,KACjC,mBAAfC,EACP,KAAM,yDAGV,MAAMC,EAAYjK,KAAKC,MACjBiD,EAAW,IACX3M,EAAOxF,KAEP6R,EAAa5L,OAAOoM,aAAY,KAC9B7M,EAAKiT,uBACLtY,OAAOI,IAAI,sCACX0F,OAAOgM,cAAcJ,GACrBoH,GAAW,IAEPD,GAAY,GAAK/J,KAAKC,MAAQgK,EAAYF,IAC1C7Y,OAAOI,IAAI,qCACX0F,OAAOgM,cAAcJ,GACrBoH,GAAW,GAEnB,GACD9G,EAEP,EAcAiH,6BAA8B,WAC1B,MAAM5T,EAAOxF,KACb,OAAO,IAAIqZ,SAAQ,SAAUxT,EAASC,GAClCN,EAAK2T,yBAAyB,EAAGtT,EACrC,GACJ,EASA,uBAAIyT,GACA,OAAOtJ,CACX,EAEA,uBAAIsJ,CAAoBC,GACpBvJ,EAAsBuJ,CAC1B,EAQA,qBAAIC,GACA,OAAOvJ,CACX,EAEA,qBAAIuJ,CAAkBD,GAClBtJ,EAAqBsJ,CACzB,EAQA,eAAIE,GACA,OAAOxL,CACX,EAEA,eAAIwL,CAAYC,GACZzL,EAAkByL,CACtB,EAEAC,eAAgB,SAAUtR,EAAM9B,EAAQ+B,EAAUC,EAAWxC,EAAQF,EAASC,GAC1E,OAAOyL,EAAYlJ,EAAM9B,EAAQ+B,EAAUC,EAAWxC,EAAQF,EAASC,EAC3E,EAEA8T,WAAY,SAAUvR,EAAMC,EAAUC,GAClC,OAAOgJ,EAAYlJ,EAAM,MAAOC,EAAUC,GAAW,EACzD,EAEAsR,YAAa,SAAUxR,EAAMC,EAAUC,GACnC,OAAOgJ,EAAYlJ,EAAM,OAAQC,EAAUC,GAAW,EAC1D,EAEAuR,gBAAiB,SAAUzR,EAAMC,EAAUC,EAAW1C,EAASC,GAC3D,OAAOyL,EAAYlJ,EAAM,MAAOC,EAAUC,GAAW,EAAM1C,EAASC,EACxE,EAEAiU,iBAAkB,SAAU1R,EAAMC,EAAUC,EAAW1C,EAASC,GAC5D,OAAOyL,EAAYlJ,EAAM,OAAQC,EAAUC,GAAW,EAAM1C,EAASC,EACzE,EAIR,IAoBIxE,sBACD,6BAA6B,WAE5B,IAqhBI0Y,EACAC,EAthBAC,EAAgB,WAchBC,EAAmB,CACnB9V,QAAS,EACTC,OAAQ,EACRC,GAAI,GAcJ6V,EAAmB,CACnB/V,QAAS,EACTgW,UAAW,EACXC,SAAU,GAeVC,EAAgB,CAChBlW,QAAS,EACTmW,IAAK,EACLC,IAAK,EACLC,KAAM,GAcNC,EAAgB,CAChBtW,QAAS,EACTkI,KAAM,EACNC,MAAO,GAsCPoO,EACJ,CACIC,OAAQ,KACRC,OAAQ,KACRC,iBAAkB,KAClBC,UAAW,EACXC,OAASC,UAAUC,WAAaD,UAAUC,UAAU9Z,OAC9C6Z,UAAUC,UAAU,GACpBD,UAAUE,SAChBC,eAAgB,EAChBC,gBAAiB,GACjBC,eAAgB,GAChBC,gCAAgC,EAChCC,KAAM,CACFC,YAAatB,EAAiBE,SAC9BqB,MAAOxb,OAAOoP,QAAQC,MAAMyG,iBAAiB5R,QAC7CuX,QAAS,CACLC,KAAM,GACNC,IAAK,GACLC,OAAQ,GACRC,MAAO,KAGfC,uBAAwB,CACxB,EACAC,UAAW,GACXC,aAAc5B,EAAcC,IAC5B7J,SAAU,GACVyL,YAAa9L,SAASvJ,KAGtBsV,EACJ,CACI,UAAIxB,CAAOra,GACPL,OAAOI,IAAI,6CAA+CC,GACtDA,GAAsB,IAAfA,EAAIa,SACXb,EAAM,OAEVoa,EAAcC,OAASra,CAC3B,EACA,UAAIqa,GACA,OAASD,EAAcC,QAAmC,QAAzBD,EAAcC,OAAyBD,EAAcC,OAAnB,EACvE,EAEA,UAAIC,CAAOta,GACHA,GAAsB,IAAfA,EAAIa,SACXb,EAAM,OAEVoa,EAAcE,OAASta,CAC3B,EAEA,UAAIsa,GACA,OAASF,EAAcE,QAAmC,QAAzBF,EAAcE,OAAyBF,EAAcE,OAAnB,EACvE,EAEA,oBAAIC,CAAiBva,GACbA,GAAsB,IAAfA,EAAIa,SACXb,EAAM,OAEVoa,EAAcG,iBAAmBva,CACrC,EAEA,oBAAIua,GACA,OAASH,EAAcG,kBAAuD,QAAnCH,EAAcG,iBAAmCH,EAAcG,iBAAnB,EAC3F,EAEA,UAAIE,GACA,OAAOL,EAAcK,MACzB,EAEA,aAAID,CAAUsB,GACV1B,EAAcI,UAAYsB,CAC9B,EAEA,aAAItB,GACA,OAAOJ,EAAcI,SACzB,EAEA,UAAIC,CAAOqB,GACP1B,EAAcK,OAASqB,CAC3B,EAEA,mBAAIhB,CAAgBgB,GAChB1B,EAAcU,gBAAkBgB,CACpC,EAEA,kBAAIf,CAAee,GACf1B,EAAcW,eAAiBe,CACnC,EAEA,kCAAId,CAA+Be,GAC/B3B,EAAcY,+BAAiCe,EAAI5B,EAAcpO,KAAOoO,EAAcnO,KAC1F,EAEA,kCAAIgP,GACA,OAAOZ,EAAcY,iCAAmCb,EAAcpO,IAC1E,EAEA0P,uBAAwB,CACpB,kBAAIO,GACA,OAAO5B,EAAcqB,uBAAuBO,cAChD,EACA,kBAAIA,CAAeC,GACf7B,EAAcqB,uBAAuBO,eAAiBC,CAC1D,EAEA,kBAAIC,GACA,OAAO9B,EAAcqB,uBAAuBS,cAChD,EACA,kBAAIA,CAAeD,GACf7B,EAAcqB,uBAAuBS,eAAiBD,CAC1D,EAEA,mBAAIE,GACA,OAAO/B,EAAcqB,uBAAuBU,eAChD,EACA,mBAAIA,CAAgBF,GAChB7B,EAAcqB,uBAAuBU,gBAAkBF,CAC3D,EAEA,mBAAIG,GACA,OAAOhC,EAAcqB,uBAAuBW,eAChD,EACA,mBAAIA,CAAgBH,GAChB7B,EAAcqB,uBAAuBW,gBAAkBH,CAC3D,EAEA,wBAAII,GACA,OAAOjC,EAAcqB,uBAAuBY,oBAChD,EACA,wBAAIA,CAAqBJ,GACrB7B,EAAcqB,uBAAuBY,qBAAuBJ,CAChE,EAEA,mBAAIK,GACA,OAAOlC,EAAcqB,uBAAuBa,eAChD,EACA,mBAAIA,CAAgBL,GAChB,GAAiB,iBAANA,EACP,KAAM,mBAEV7B,EAAcqB,uBAAuBa,gBAAkBL,CAC3D,EAEA,mBAAIM,GACA,OAAOnC,EAAcqB,uBAAuBc,eAChD,EACA,mBAAIA,CAAgBN,GAChB,GAAiB,iBAANA,EACP,KAAM,mBAEV7B,EAAcqB,uBAAuBc,gBAAkBN,CAC3D,EAEA,qBAAIO,GACA,OAAOpC,EAAcqB,uBAAuBe,iBAChD,EACA,qBAAIA,CAAkBP,GAClB,GAAiB,iBAANA,EACP,KAAM,mBAEV7B,EAAcqB,uBAAuBe,kBAAoBP,CAC7D,EAEA,qBAAIQ,GACA,OAAOrC,EAAcqB,uBAAuBgB,iBAChD,EACA,qBAAIA,CAAkBR,GAClB,GAAiB,iBAANA,EACP,KAAM,mBAEV7B,EAAcqB,uBAAuBgB,kBAAoBR,CAC7D,EAEA,0BAAIS,GACA,OAAOtC,EAAcqB,uBAAuBiB,sBAChD,EACA,0BAAIA,CAAuBT,GACvB,GAAiB,iBAANA,EACP,KAAM,mBAEV7B,EAAcqB,uBAAuBiB,uBAAyBT,CAClE,GAGJhB,KAAM,CACF,eAAIC,CAAYyB,GACZvC,EAAca,KAAKC,YAAcyB,CACrC,EAEA,eAAIzB,GACA,OAAOd,EAAca,KAAKC,WAC9B,EAEA,SAAIC,CAAMyB,GACNxC,EAAca,KAAKE,MAAQyB,CAC/B,EAEA,SAAIzB,GACA,OAAOf,EAAca,KAAKE,KAC9B,EAEAC,QAAS,CACL,QAAIC,CAAKwB,GACLzC,EAAca,KAAKG,QAAQC,KAAOwB,CACtC,EAEA,QAAIxB,GACA,OAAOjB,EAAca,KAAKG,QAAQC,IACtC,EAEA,OAAIC,CAAIuB,GACJzC,EAAca,KAAKG,QAAQE,IAAMuB,CACrC,EAEA,OAAIvB,GACA,OAAOlB,EAAca,KAAKG,QAAQE,GACtC,EAEA,UAAIC,CAAOsB,GACPzC,EAAca,KAAKG,QAAQG,OAASsB,CACxC,EAEA,UAAItB,GACA,OAAOnB,EAAca,KAAKG,QAAQG,MACtC,EAEA,SAAIC,CAAMqB,GACNzC,EAAca,KAAKG,QAAQI,MAAQqB,CACvC,EAEA,SAAIrB,GACA,OAAOpB,EAAca,KAAKG,QAAQI,KACtC,IAKR,aAAIE,GAAc,OAAOtB,EAAcsB,SAAW,EAClD,aAAIA,CAAUO,GAAK7B,EAAcsB,UAAYO,CAAG,EAEhD,gBAAIN,GAAiB,OAAOvB,EAAcuB,YAAc,EACxD,gBAAIA,CAAaM,GACb,KAAiB,iBAANA,GAAkBA,GAAKlC,EAAclW,SAAWoY,GAAKlC,EAAcG,MAI9E,KAAM,mBAHFE,EAAcuB,aAAeM,CAIrC,GAIJ,SAASa,EAAiCC,GACtC,OAAkB,OAAdA,IACA3C,EAAgB2C,GACFtC,OAAUC,UAAUC,WAAaD,UAAUC,UAAU9Z,OAC7D6Z,UAAUC,UAAU,GACpBD,UAAUE,SAChBR,EAAcS,gBAAiB,IAAKpM,MAAQuO,oBAC5C5C,EAAcwB,YAAc9L,SAASvJ,IACrC5G,OAAOI,IAAI,qCAAuCqa,EAAcK,OAAS,eAAiBL,EAAcS,iBACjG,IAGPlb,OAAOO,KAAK,kEACL,EAEf,CAEA,SAAS+c,IACL,IAAIzW,EAAQf,OAAOyX,SAAa,KAAI,IAAMzX,OAAOyX,SAAS1W,KAAO,GACjE,OAAOf,OAAOyX,SAASzW,SAAW,KAAOhB,OAAOyX,SAASvV,SAAWnB,EAAOf,OAAOyX,SAASvW,QAC/F,CAEA,SAASwW,EAAYC,GAGjBlc,OAAO,WAAYkc,GAAUC,MAAK,WAC9B7d,KAAK8d,aAAa,UAAW,UACjC,IAMA,IAHA,IAAIC,EAAQ,4FAA4Fvc,MAAM,KAC1Gwc,EAAMD,EAAM1c,OAEPQ,EAAI,EAAGA,EAAImc,EAAKnc,IACrBH,OAAO,cAAgBqc,EAAMlc,GAAK,IAAK+b,GAAUC,MAAK,WAClD7d,KAAK8d,aAAa,QAASpc,OAAO1B,MAAMie,MAC5C,IAGJvc,OAAO,SAAUkc,GAAUC,MAAK,WAC5B,IAAIK,EAAUxc,OAAO1B,MACrB0B,OAAO,SAAUwc,GAASL,MAAK,WACvBK,EAAQD,QAAUvc,OAAO1B,MAAMie,OAC/Bje,KAAK8d,aAAa,WAAY,WACtC,GACJ,IAEApc,OAAO,WAAYkc,GAAUC,MAAK,WAC9B7d,KAAKme,UAAYzc,OAAO1B,MAAMie,KAClC,GACJ,CAGA,SAASG,EAAaC,GAClBA,EAAYC,iBAAiB,YAAY/Q,SAAQvD,IAC7CA,EAAE8T,aAAa,UAAW,UAAU,IAGxC,4FAA4Ftc,MAAM,KAAK+L,SAAQ4C,IAC3GkO,EAAYC,iBAAiB,cAAgBnO,EAAI,KAAK5C,SAAQvD,IAC1DA,EAAE8T,aAAa,QAAS9T,EAAEtE,MAAM,GAClC,IAGN2Y,EAAYC,iBAAiB,UAAU/Q,SAAQvD,IAC3CA,EAAEsU,iBAAiB,UAAU/Q,SAAQgR,IACjCA,EAAEC,gBAAgB,WACdxU,EAAEtE,QAAU6Y,EAAE7Y,MACd6Y,EAAET,aAAa,WAAY,YAE3BS,EAAEC,gBAAgB,WACtB,GACF,IAGNH,EAAYC,iBAAiB,YAAY/Q,SAAQ4C,IAC7CA,EAAEgO,UAAYhO,EAAEzK,KAAK,GAG7B,CAEA,SAAS+Y,EAAwBC,GAE7Bf,EAAYe,GAEZ,IAAIC,EAAQD,EAASE,QAKrB,GAHAld,OAAO,SAAUid,GAAOE,SACxBnd,OAAO,SAAUid,GAAOE,UAEnBnd,OAAO,YAAaid,GAAOtd,OAAQ,CACpClB,OAAOI,IAAI,wCAA0Ckd,KACrD,IAAIqB,EAAOpd,OAAO,SACd,CACIuG,KAAMwV,MAEd/b,OAAO,OAAQid,GAAOI,QAAQD,EAClC,CAEA,OAAOH,EAAMK,MACjB,CAEA,SAASC,EAAyBC,GAE9Bd,EAAac,EAAYC,iBAEzB,IAAIH,EAAOE,EAAYC,gBAAgBC,WAAU,GAOjD,GAHAJ,EAAKV,iBAAiB,UAAU/Q,SAAQvD,GAAKA,EAAE6U,WAC/CG,EAAKV,iBAAiB,UAAU/Q,SAAQvD,GAAKA,EAAE6U,WAEP,OAApCG,EAAK7K,cAAc,aAAuB,CAC1C,IAAI2K,EAAOxO,SAAS+O,cAAc,QAClCP,EAAKhB,aAAa,OAAQL,KAC1BuB,EAAK7K,cAAc,QAAQ4K,QAAQD,EACvC,CAEA,OAAOE,EAAKM,SAChB,CAEA,SAASC,IACL,OAAIvf,KAAK0B,SAAWvB,OAAOkC,aAChBoc,EAAwB/c,OAAO,SAGnCud,EAAyB3O,SACpC,CAEA,SAASkP,EAAaC,GAClB,GAAIzf,KAAK0B,SAAWvB,OAAOkC,aAAc,CACrC,IAAIqd,EAAShe,OAAO,IAAM+d,GAE1B,IAAKC,EAAOre,UACRqe,EAAShe,OAAO,eAAiB+d,EAAS,MAC9Bpe,OACR,MAAM,IAAIsG,MAAM,sDAIxB,OAAO8W,EAAwBiB,EAAOC,WAAWvS,KAAK,QAC1D,CACK,CACD,IAAIwS,EAAItP,SAASuP,eAAeJ,GAEhC,GAAS,MAALG,GAEA,GADAA,EAAI3Z,OAAO6Z,OAAOL,IACZG,EACF,MAAM,IAAIjY,MAAM,2DAIpBiY,EAAIA,EAAEG,cAEV,OAAOd,EAAyBW,EAAEtP,SACtC,CACJ,CAEA,SAASJ,EAAkBxH,EAAayF,EAAS6R,EAAO1R,EAAQ2R,EAAYrZ,GACxE,IAAIwH,EAAoBwM,EAExB,OADAxM,EAAkBuC,SAAWqP,EACtB7f,OAAOoP,QAAQC,MAAMsE,UAAUpL,EAAayF,EAASC,EAAmBE,EAAQ2R,EAAYrZ,EACvG,CAaA,SAASsZ,EAAYxX,EAAayF,GAC9BhO,OAAOoP,QAAQC,MAAMuH,uBAAuB,iBAAkBrS,IAC1DuV,EAAqBvV,EAAeX,YACpCiW,EAAiB7Z,OAAOoP,QAAQC,MAAMzL,YAEtC5D,OAAOI,IAAI,sCAAwCyZ,GAInD,IAAImG,EAAM7P,SAASuP,eAAe,qCAClC,GAAW,MAAPM,EAAa,EACbA,EAAM7P,SAAS+O,cAAc,QACzBlB,UAAY,wpBAShB7N,SAASjH,KAAK+W,YAAYD,EAAIE,WAAW,KAEzCF,EAAM7P,SAAS+O,cAAc,QACzBvB,aAAa,KAAM,qCACvBqC,EAAIG,UAAY,SAEhB,IAAK,IAAIze,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI0e,EAAMjQ,SAAS+O,cAAc,QACjCkB,EAAID,UAAY,kBAChBH,EAAIC,YAAYG,EACpB,CACAjQ,SAASjH,KAAK+W,YAAYD,EAC9B,MAEIA,EAAIK,MAAMC,QAAU,OAExBtgB,OAAOoP,QAAQC,MAAMqI,mBAAmBnP,EAAayF,EAASyM,GAAe,SAAU8F,GACnFvgB,OAAOI,IAAI,gCAAiCmgB,GAC5CP,EAAIK,MAAMC,QAAU,MACxB,IACI,SAAUE,EAAc7O,GACpB,IAAI8O,EAAazgB,OAAOiD,oBAAoBjD,OAAOoP,QAAQC,MAAM3K,WAAY,cAAgBiN,EAAQ,IAAMY,mBAAmBpC,SAASvJ,MACvI5G,OAAOI,IAAI,yBAA2BqgB,EAAa,kBAAoB5G,GACvE,IAAI6G,EAAOvQ,SAASuP,eAAe,gCACvB,MAARgB,KACAA,EAAOvQ,SAAS+O,cAAc,WACzBvB,aAAa,KAAM,gCACxB+C,EAAKL,MAAMM,MAAQ,EACnBD,EAAKL,MAAMO,OAAS,EACpBF,EAAKL,MAAMC,QAAU,OACrBI,EAAKL,MAAMQ,WAAa,SAExB1Q,SAASjH,KAAK+W,YAAYS,GAC1B5a,OAAOgb,iBAAiB,WAAW,SAAUC,GACzC/gB,OAAOI,IAAI,iBAAmB2gB,EAAQ,kBAAoBlH,GACvC,kBAAfkH,EAAMta,OACNzG,OAAOI,IAAI,iCAAmCyZ,GAC9C7Z,OAAOoP,QAAQC,MAAMkH,6BAA6BsD,GAAgB,WAC9D7Z,OAAOI,IAAI,qDACXsgB,EAAKd,cAAcoB,YAAY,UAAWhhB,OAAOoP,QAAQC,MAAM3K,YAC/DoB,OAAOC,YAAW,WACd/F,OAAOoP,QAAQC,MAAMkH,6BAA6BuD,GAAoB,WAAc,IAChF,SAAUmH,GACNjhB,OAAOQ,MAAM,4DAA8DygB,GAC3EjhB,OAAOoP,QAAQC,MAAMC,YAAY2R,EACrC,GACR,GAAG,IACP,IAAG,SAAUA,GACTjhB,OAAOQ,MAAM,sDAAwDygB,GACrEjhB,OAAOoP,QAAQC,MAAMC,YAAY2R,EACrC,IAGR,KAEJP,EAAK/C,aAAa,MAAO8C,EAC7B,GAAE,IAELhX,IACGzJ,OAAOQ,MAAMiJ,EAAS,GAGlC,CAKA,OAHAzJ,OAAOI,IAAI,6BAA+B2Z,EAAgB,YAGnD,CACHmH,gBAAiBlH,EACjBmH,gBAAiBlH,EACjBmH,eAAgBhH,EAwBhB1D,SAAUwF,EAcV,0BAAImF,GACA,OAAOjC,GACX,EAgBAkC,oBAAqB,SAAUhC,GAC3B,OAAOD,EAAaC,EACxB,EAYAiC,cAAe,SAAUC,EAAc1B,EAAYrZ,GAC/C,OAAOsJ,EAAkB/P,OAAOoP,QAAQC,MAAMb,YAAYjE,UAAW6U,IAAmBjP,SAAS0P,MAAO2B,EAAc1B,EAAYrZ,EACtI,EAaAgb,WAAY,SAAUnC,EAAQkC,EAAc1B,EAAYrZ,GACpD,OAAOsJ,EAAkB/P,OAAOoP,QAAQC,MAAMb,YAAYjE,UAAW8U,EAAaC,GAASnP,SAAS0P,MAAO2B,EAAc1B,EAAYrZ,EACzI,EAQAib,gBAAiB,WACb3B,EAAY/f,OAAOoP,QAAQC,MAAMb,YAAYjE,UAAW6U,IAC5D,EASAuC,aAAc,SAAUrC,GACpBS,EAAY/f,OAAOoP,QAAQC,MAAMb,YAAYjE,UAAW8U,EAAaC,GACzE,EAaAsC,aAAc,SAAUC,EAAML,EAAc1B,EAAYrZ,GACpD,OAAOsJ,EAAkB/P,OAAOoP,QAAQC,MAAMb,YAAY5H,IAAKib,EAAMA,EAAML,EAAc1B,EAAYrZ,EACzG,EAaAkN,UAAW,SAAUmO,EAAON,EAAc1B,EAAYrZ,GAClD,OAAOsJ,EAAkB/P,OAAOoP,QAAQC,MAAMb,YAAYlE,KAAMwX,EAAO,eAAgBN,EAAc1B,EAAYrZ,EACrH,EAUAkO,YAAa,SAAUhS,EAAWgG,GAC9B3I,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,EAChD,EAoBA+L,QAAS,SAAU/R,EAAWgG,EAAa4I,GACvCvR,OAAOO,KAAK,sCACZP,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,GAC5C3I,OAAOoP,QAAQC,MAAM2B,cAAc,6BAA+ByJ,EAAca,KAAKE,OAAO,GACxF,SAAU/U,GACNzG,OAAOI,IAAI,6BACX+c,EAAiC1W,EAAKiQ,UAClB,OAAhBjQ,EAAKsb,QACL/hB,OAAOoP,QAAQC,MAAM2H,yBAAyBvQ,EAAKsb,OAAQtb,EAAK0D,kBAExE,GAAGoH,EACX,EAmBAuF,aAAc,SAAUnU,EAAWgG,EAAajD,EAASC,GACrD3F,OAAOI,IAAI,uCACXJ,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,GAC5C3I,OAAOoP,QAAQC,MAAM2B,cAAc,6BAA+ByJ,EAAca,KAAKE,OAAO,GACxF,SAAU/U,GACNzG,OAAOI,IAAI,6BACP+c,EAAiC1W,EAAKiQ,WAClB,OAAhBjQ,EAAKsb,QACL/hB,OAAOoP,QAAQC,MAAM2H,yBAAyBvQ,EAAKsb,OAAQtb,EAAK0D,mBAEpEzE,EAAQ,IAGRC,EAAO,6CAEf,GAAGA,EACX,EAOA,WAAI7F,GAAY,OAAOia,CAAe,EAI9C,IAoBI5Y,sBACD,4BAA4B,WAE3B,IAAI4Y,EAAgB,WAahBE,EAAmB,CACnB/V,QAAS,EACTgW,UAAW,EACXC,SAAU,GAcV6H,EAAiB,CACjB9d,QAAS,EACTkI,KAAM,EACNC,MAAO,GAeP4V,EAAkB,CAClBC,WAAY,EACZC,KAAM,EACNC,WAAY,EACZC,iBAAkB,GAclBC,EAAmB,CACnBC,OAAQ,EACRC,KAAM,EACNC,SAAU,GAGVC,EACJ,CACInS,eAAgB,GAChBwL,UAAW,GACX4G,YAAaV,EAAgBC,UAC7BU,iBAAkBZ,EAAe9d,QACjCqX,YAAatB,EAAiB/V,QAC9B2e,WAAYb,EAAe9d,QAC3B4e,UAAWd,EAAe9d,QAC1B6e,aAAcT,EAAiBC,QAGnC,SAAS9R,EAAiBN,EAAUhC,EAAQ2R,EAAYrZ,GACpD,OAAOzG,OAAOoP,QAAQC,MAAMwI,SAAS1H,EAAUuS,EAAkBvU,EAAQ2R,EAAYrZ,EACzF,CAKA,OAHAzG,OAAOI,IAAI,4BAA8B2Z,EAAgB,YAGlD,CACHoH,gBAAiBlH,EACjBO,cAAewH,EACfgB,eAAgBf,EAChBgB,gBAAiBX,EAiBjB5L,SAAUgM,EASVQ,cAAe,WACXR,EAAiBnS,eAAiB,GAClCmS,EAAiB3G,UAAY,GAC7B2G,EAAiBC,YAAcV,EAAgBC,UAC/CQ,EAAiBE,iBAAmBZ,EAAe9d,QACnDwe,EAAiBnH,YAActB,EAAiB/V,QAChDwe,EAAiBG,WAAab,EAAe9d,QAC7Cwe,EAAiBI,UAAYd,EAAe9d,QAC5Cwe,EAAiBK,aAAeT,EAAiBC,MACrD,EAaAY,MAAO,SAAUtB,EAAML,EAAc1B,EAAYrZ,GAC7C,OAAOgK,EAAiBoR,EAAML,EAAc1B,EAAYrZ,EAC5D,EAUAkO,YAAa,SAAUhS,EAAWgG,GAC9B3I,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,EAChD,EAmBA+L,QAAS,SAAU/R,EAAWgG,GAC1B3I,OAAOO,KAAK,qCACZP,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,GAC5C3I,OAAOoP,QAAQC,MAAM2B,cAAc,6BAA+ByJ,cAAca,KAAKE,OAAO,GACxF,SAAU/U,GACNzG,OAAOI,IAAI,6BACS,OAAhBqG,EAAKsb,QACL/hB,OAAOoP,QAAQC,MAAM2H,yBAAyBvQ,EAAKsb,OAAQtb,EAAK0D,kBAExE,GAER,EAmBA2M,aAAc,SAAUnU,EAAWgG,EAAajD,EAASC,GACrD3F,OAAOI,IAAI,sCACXJ,OAAOoP,QAAQC,MAAMsF,YAAYhS,EAAWgG,GAC5C3I,OAAOoP,QAAQC,MAAM2B,cAAc,sBAAsB,GACrD,SAAUvK,GACNzG,OAAOI,IAAI,6BACS,OAAhBqG,EAAKsb,QACL/hB,OAAOoP,QAAQC,MAAM2H,yBAAyBvQ,EAAKsb,OAAQtb,EAAK0D,mBAChEzE,KAGAC,EAAO,6CAEf,GAAGA,EACX,EAOA,WAAI7F,GAAY,OAAOia,CAAe,EAI9C,IAgEE,SAAWta,EAAMC,EAAY0jB,GAE3B,GAAIvjB,KAAKJ,KAAU2jB,GAA+C,OAAlCjT,SAASuP,eAAejgB,GAAgB,CAQpE,GAPAO,OAAOI,IAAI,8EACPP,KAAKJ,KAAU2jB,GACfpjB,OAAOI,IAAI,QAAUX,EAAO,gBAEM,OAAlC0Q,SAASuP,eAAejgB,IACxBO,OAAOI,IAAI,2BAA6BX,EAAO,gBAE/CI,KAAKJ,GAAM4jB,SAAWD,EAEtB,YADApjB,OAAOI,IAAI,QAAUX,EAAO,0CAG5BO,OAAOI,IAAI,QAAUX,EAAO,4BAEpC,CAEAO,OAAOI,IAAI,sEACX,IAAIT,EAKM,WAGV,MAAMoa,EAAgB,WAChBuJ,EAAkB,UACxB,IAAIC,EAAkB,GACtB,MAAM3P,EAAW5T,OAAOoP,QAAQC,MAC1BmU,EAASxjB,OAEf,IAAIJ,EAAaC,KAEjB,SAASO,EAAIC,GACTmjB,EAAOpjB,IAAI,wBAA0BC,EACzC,CAKA,OAHAD,EAAI,oBAAsB2Z,GAGnB,CACH3Z,IAAKA,EAQLqjB,oBAAqB,SAAUC,EAAYC,EAAGvH,EAAGwH,EAAGC,GAChDzjB,EAAI,uCAAyCsjB,GAC7C,IAAIpH,EAAIvC,EAER,OAAQ2J,EAAW9Q,eACf,IAAK,kBACD0J,EAAIgH,EACJ,MAEJ,IAAK,2BACDhH,EAAIvC,EACJ,MAEJ,IAAK,mBACD,GAAwB,KAApBwJ,QACwB,IAAb3P,EAA0B,CACjC,IAAIkQ,EAAKlQ,EAASoC,cAElBpC,EAASoC,cAAgBpC,EAAS+B,YAAY1K,MAE9C,IACI,IAAIiI,EAAKU,EAAST,qBAClB,GAAW,OAAPD,EACA,GAAiC,iBAAtBA,EAAGG,eACVkQ,EAAkBrQ,EAAGG,mBAEpB,CACD,IAAI0Q,EAAK7Q,EAAGG,eACZkQ,EAAkBQ,EAAGzQ,MAAQ,IAAMyQ,EAAGxQ,MAAQ,IAAMwQ,EAAGC,MAAQ,IAAMD,EAAGE,QAC5E,CAER,CAAE,MAAOpa,GAAK0Z,EAAkBxJ,CAAe,CAE/CnG,EAASoC,cAAgB8N,CAC7B,CAEJxH,EAAIiH,EACJ,MAEJ,IAAK,gBACD,IACIjH,EAAI1c,EAAWskB,OAAOpkB,OAC1B,CAAE,MAAO+J,GAAKyS,EAAI,SAAW,CAC7B,MAEJ,IAAK,kBACD,IACIA,EAAItc,OAAOoP,QAAQC,MAAM/E,KAAKxK,OAClC,CAAE,MAAO+J,GAAKyS,EAAI,SAAW,EAIrCA,EAAIA,EAAEjb,MAAM,KACZsiB,EAAE,GAAKrH,EAAE,GACTF,EAAE,GAAKE,EAAE,GACTsH,EAAE,GAAKtH,EAAE,GACTuH,EAAE,GAAKvH,EAAE,EACb,EAMA6H,uBAAwB,SAAUC,GAC9B,IAAIT,EAAI,IAAI7Z,OACRsS,EAAI,IAAItS,OACR8Z,EAAI,IAAI9Z,OACR+Z,EAAI,IAAI/Z,OAGZ,OADAlK,EAAWykB,QAAQZ,oBAAoBW,EAAST,EAAGvH,EAAGwH,EAAGC,GAClDF,EAAE,GAAK,IAAMvH,EAAE,GAAK,IAAMwH,EAAE,GAAK,IAAMC,EAAE,EACpD,EAEA,kBAAIS,GAAmB,OAAOhB,CAAiB,EAC/C,0BAAIiB,GAA2B,OAAOjB,CAAiB,EAKvDkB,oBAAqB,SAAUC,GAAe,OAAO,CAAO,EAC5DC,SAAU,SAAUD,GAAe,OAAO,CAAG,EAC7CE,cAAe,SAAUF,GAAe,OAAO,CAAG,EAElDG,QAAS,SAAU/C,GACf,IAAIgD,EAAO1U,SAAS+O,cAAc,KAElC,OADA2F,EAAK/c,KAAO+Z,EACLgD,EAAK/c,IAChB,EAEAgd,YAAa,SAAUjD,GACnB,KAAM,+HACV,EAEAkD,mBAAoB,SAAUC,EAAeC,QAGE,IAAhCD,EAAcpF,cACrBqF,IAIAD,EAAclE,iBAAiB,QAAQ,SAAUjX,GAC7Cob,GACJ,GAAG,CAAEC,MAAM,GAEnB,EAEA,eAAIC,GACA,IAAIzS,EAAe,GACfkB,EAAW5T,OAAOoP,QAAQC,MAE9B,SAASyI,EAAYsN,EAAcC,GAE/B,IAAIC,GAAW,EAEf,QAAwB,IAAb1R,EAA0B,CAEjC,IAAI/Q,EAAIwhB,QAAQkB,SAASC,QAEzBnB,QAAQkB,SAASC,QAAU9S,EAEvB0S,IAAiBxR,EAASpF,YAAY5H,MACtCye,EAAWzlB,EAAWykB,QAAQO,QAAQS,IAG1CC,EAAW1R,EAASkE,YAAYsN,EAAcC,GAE9ChB,QAAQkB,SAASC,QAAU3iB,CAC/B,CAEA,OAAOyiB,CACX,CAEA,MAAO,CAEH,WAAIE,GAAY,OAAO9S,CAAc,EACrC,WAAI8S,CAAQ5hB,GACR,IAAIf,EAAIwhB,QAAQkB,SAASC,QAEzB,GADAnB,QAAQkB,SAASC,QAAU5hB,EACvBygB,QAAQkB,SAASC,UAAY5hB,EAC7B,KAAM,kBAEVygB,QAAQkB,SAASC,QAAU3iB,EAC3B6P,EAAe9O,CACnB,EAEA6hB,YAAa,SAAUhjB,GACnB,YAA2B,IAAbmR,GAA2BkE,EAAYlE,EAASpF,YAAYhE,OAAQ/H,EACtF,EAEA8e,cAAe,SAAUM,GACrB,YAA2B,IAAbjO,GAA2BkE,EAAYlE,EAASpF,YAAY5H,IAAKib,EACnF,EAER,EAMA6D,SAAU,WACN,OAAO,IACX,EAGAC,uBAAwB,SAAUlmB,EAAMC,GACpC,IAAIC,EAAYD,IAEhBU,EAAI,uCAAyCX,GAI7C,IAFA,IAAI2B,EAAa3B,EAAK4B,MAAM,KACxBC,EAAQ1B,EACH8B,EAAI,EAAGA,EAAIN,EAAWF,OAAQQ,IAAK,CACxC,IAAIC,EAAcP,EAAWM,GACzBA,IAAMN,EAAWF,OAAS,OACQ,IAAvBI,EAAMK,IACbvB,EAAI,iCAAmCuB,GACvCL,EAAMK,GAAehC,GAErBS,EAAI,sCAAwCuB,QAEX,IAAvBL,EAAMK,IACpBvB,EAAI,qBAAuBuB,GAC3BL,EAAMK,GAAe,CAAC,GAEtBvB,EAAI,2BAA6BuB,GAErCL,EAAQA,EAAMK,EAClB,CACJ,EAGAikB,cAAe,SAAU/b,GACjBA,EAAEgc,SAAwB,IAAbhc,EAAEic,UAAkBjc,EAAEkc,WACnClc,EAAEmc,iBACF5lB,EAAI,yBACJR,EAAWujB,QAEnB,EAGR,CAzOoBzjB,GAGhB,KAAOD,GAAQE,CAElB,CAxBC,CAwBC,WAuO+C,mBAAnC0kB,QAAQsB,wBACftB,QAAQsB,uBAEb,oBAAoB,WAGnB,MAAMhS,EAAY3T,OAAOoP,QAAQC,MAAM/E,KACjCuN,EAAW7X,OAAOoP,QAAQC,MAAM4W,IAChCvP,EAAW/C,EAAU+C,SACrB9C,EAAW5T,OAAOoP,QAAQC,MAC1B6W,EAAe,CAAC,UAAW,WAAY,YAE7C,IAAItmB,EAAaC,KACbsmB,EAAY,GAIhB,SAASC,EAAeC,EAASC,EAASC,QACb,IAAd,IAA2BF,GAAU,GAChD,MAAM5N,EAAO7E,EAAS4E,uBACtB,IAAIgO,GAAW,EACXrX,EAAM,KAEV,GAAIkX,EAAS,CACT,GAAIrmB,OAAOoP,QAAQC,MAAMoX,GAAI,CAuBzB,GAtBAzmB,OAAOoP,QAAQC,MAAMoX,GAAGC,iBAAgB,SAAUC,GAC9C,GAAIA,EAAa,CACb3mB,OAAOI,IAAI,uCACX,IACIomB,EAAWF,IACXC,EAAgBC,EACpB,CACA,MAAO3c,GACHsF,EAAMtF,EACN7J,OAAOQ,MAAMqJ,EAAEvG,SACfijB,GAAgB,EACpB,CACJ,MAEIA,GAAgB,GAEpB3S,EAAS8E,gBAAgBD,EAE7B,IAEAzY,OAAOI,IAAI,4BAEA,MAAP+O,EACA,MAAMA,EAGV,OAAOqX,CACX,CACAxmB,OAAOO,KAAK,6HAChB,CAEA,IACIimB,EAAWF,IACXC,EAAgBC,EACpB,CACA,MAAO3c,GACHsF,EAAMtF,EACN7J,OAAOQ,MAAMqJ,EAAEvG,SACfijB,GAAgB,EACpB,CACA,QACI3S,EAAS8E,gBAAgBD,EAC7B,CAEA,GAAY,OAARtJ,EACA,MAAMA,EAGV,OAAOqX,CACX,CAEA,SAASI,EAAUvB,GAEf,IAAIwB,EAAcX,EAAajZ,MAAK,SAAU6Z,GAC1C,OAAqC,IAA9BzB,EAASviB,QAAQgkB,EAC5B,IAEA,MAA2B,iBAAhBD,EACAxB,EAASriB,UAAU6jB,EAAY3lB,QAGnC,EACX,CAEA,SAAS6lB,EAAiBlF,EAAMwE,EAASE,EAAiBzG,EAAYrZ,GAElE,IAAIqb,EAAQ8E,EAAU/E,GAGtB,GAAIC,EAAM5gB,OAAS,EAAG,CAClB,IAAI8lB,EAAU,YAGVlF,EAAMmF,OAAO,EAAGD,EAAQ9lB,QAAQ0R,gBAAkBoU,IAClDlF,EAAQA,EAAM9e,UAAU8e,EAAMhf,QAAQ,KAAO,GAErD,MAEI+e,EAAOjiB,EAAWykB,QAAQO,QAAQ/C,GAGtC,OAAOuE,EAAeC,GAClB,WAEI,OADArmB,OAAOI,IAAI,yCACJ0hB,EAAM5gB,OAAS,EAAIyS,EAAUA,UAAUmO,EAAO,KAAMhC,EAAYrZ,GAAQkN,EAAUiO,aAAaC,EAAM,KAAM/B,EAAYrZ,EAClI,GAAG8f,EAEX,CAEA,SAASW,EAAgBrF,EAAMwE,EAASE,EAAiBzG,EAAYrZ,GAEjE,YAAwB,IAAboR,GACPgK,EAAOjiB,EAAWykB,QAAQO,QAAQ/C,GAE3BuE,EAAeC,GAClB,WAEI,OADArmB,OAAOI,IAAI,wCACJyX,EAASsL,MAAMtB,EAAM,KAAM/B,EAAYrZ,EAClD,GACA8f,KAGRvmB,OAAOQ,MAAM,oFACb+lB,GAAgB,IACT,EACX,CAnHA3mB,EAAWykB,QAAQjkB,IAAI,4BAqHvB,IAAI+mB,EAAsB,CACtB,kBAAI9K,GACA,OAAO3F,EAASoF,uBAAuBO,cAC3C,EACA,kBAAIA,CAAeC,GACf5F,EAASoF,uBAAuBO,eAAiBC,CACrD,EAEA,kBAAIC,GACA,OAAO7F,EAASoF,uBAAuBS,cAC3C,EACA,kBAAIA,CAAeD,GACf5F,EAASoF,uBAAuBS,eAAiBD,CACrD,EAEA,mBAAIE,GACA,OAAO9F,EAASoF,uBAAuBU,eAC3C,EACA,mBAAIA,CAAgBF,GAChB5F,EAASoF,uBAAuBU,gBAAkBF,CACtD,EAEA,mBAAIG,GACA,OAAO/F,EAASoF,uBAAuBW,eAC3C,EACA,mBAAIA,CAAgBH,GAChB5F,EAASoF,uBAAuBW,gBAAkBH,CACtD,EAEA,wBAAII,GACA,OAAOhG,EAASoF,uBAAuBY,oBAC3C,EACA,wBAAIA,CAAqBJ,GACrB5F,EAASoF,uBAAuBY,qBAAuBJ,CAC3D,EAEA,mBAAIK,GACA,OAAOjG,EAASoF,uBAAuBa,eAC3C,EACA,mBAAIA,CAAgBL,GAChB,GAAiB,iBAANA,EACP,KAAM,mBAEV5F,EAASoF,uBAAuBa,gBAAkBL,CACtD,EAEA,mBAAIM,GACA,OAAOlG,EAASoF,uBAAuBc,eAC3C,EACA,mBAAIA,CAAgBN,GAChB,GAAiB,iBAANA,EACP,KAAM,mBAEV5F,EAASoF,uBAAuBc,gBAAkBN,CACtD,EAEA,qBAAIO,GACA,OAAOnG,EAASoF,uBAAuBe,iBAC3C,EACA,qBAAIA,CAAkBP,GAClB,GAAiB,iBAANA,EACP,KAAM,mBAEV5F,EAASoF,uBAAuBe,kBAAoBP,CACxD,EAEA,qBAAIQ,GACA,OAAOpG,EAASoF,uBAAuBgB,iBAC3C,EACA,qBAAIA,CAAkBR,GAClB,GAAiB,iBAANA,EACP,KAAM,mBAEV5F,EAASoF,uBAAuBgB,kBAAoBR,CACxD,EAEA,0BAAIS,GACA,OAAOrG,EAASoF,uBAAuBiB,sBAC3C,EACA,0BAAIA,CAAuBT,GACvB,GAAiB,iBAANA,EACP,KAAM,mBAEV5F,EAASoF,uBAAuBiB,uBAAyBT,CAC7D,EAEA,aAAIP,GACA,OAAOrF,EAASqF,SACpB,EACA,aAAIA,CAAUO,GACV5F,EAASqF,UAAYO,OACG,IAAbzE,IACPA,EAASnB,SAASqF,UAAYO,EAEtC,EAEA,gBAAIN,GACA,IAAIM,EAAI,GACR,OAAQ5F,EAASsF,cACb,KAAKrI,EAAUyN,eAAeld,QAC9B,KAAKyP,EAAUyN,eAAe/G,IAC1BiC,EAAI,MACJ,MAEJ,KAAK3I,EAAUyN,eAAe9G,IAC1BgC,EAAI,MACJ,MAEJ,KAAK3I,EAAUyN,eAAe7G,KAC1B+B,EAAI,OAIZ,OAAOA,CACX,EACA,gBAAIN,CAAaM,GACb,IAAIH,EAAIxI,EAAUyN,eAAe/G,IACjC,GAAiB,iBAANiC,EACP,OAAQA,EAAE1J,eACN,IAAK,MACDuJ,EAAIxI,EAAUyN,eAAe9G,IAC7B,MAEJ,IAAK,OACD6B,EAAIxI,EAAUyN,eAAe7G,KAC7B,MAEJ,IAAK,WACL,IAAK,MACD4B,EAAIxI,EAAUyN,eAAe/G,IAIzC3D,EAASsF,aAAeG,CAC5B,EAEA,gBAAIiL,GACA,YAA2B,IAAbvP,EAA2BA,EAASnB,SAASqM,aAAe,CAC9E,EACA,gBAAIqE,CAAa9K,QACW,IAAbzE,IACPA,EAASnB,SAASqM,aAAezG,EAEzC,GAiCJ,YA7BwB,IAAb1I,GACPA,EAASiD,gBAEuB,mBAArBjX,EAAWujB,QAClBvjB,EAAWykB,QAAQjkB,IAAI,gCACvBR,EAAWujB,MAAQ,WACfvjB,EAAWykB,QAAQjkB,IAAI,4CACvBgmB,GACI,GACA,WACI,OAAOzS,EAAU4N,eACrB,IACA,WAAc,GACtB,GAKuE,MAAzDpR,SAAS6D,cAAc,iCAErCpU,EAAWykB,QAAQjkB,IAAI,sEACvB+P,SAAS2Q,iBAAiB,UAAWuD,QAAQuB,iBAIjD5lB,OAAOQ,MAAM,gFAIV,CAIH,UAAIka,CAAOra,GACPT,EAAWykB,QAAQjkB,IAAI,gCAAkCC,GACzDqW,EAASgE,OAASra,CACtB,EAEA,UAAIqa,GACA,OAAOhE,EAASgE,MACpB,EAEA,UAAIC,CAAOta,GACPqW,EAASiE,OAASta,CACtB,EAEA,UAAIsa,GACA,OAAOjE,EAASiE,MACpB,EAEA,oBAAIC,CAAiBva,GACjBqW,EAASkE,iBAAmBva,CAChC,EAEA,oBAAIua,GACA,OAAOlE,EAASkE,gBACpB,EAEA,eAAIW,CAAY8L,GACZ,OAAQA,EAAazU,eACjB,IAAK,YACD8D,EAAS4E,KAAKC,YAAc5H,EAAUwN,gBAAgBjH,UACtD,MAEJ,IAAK,WACDxD,EAAS4E,KAAKC,YAAc5H,EAAUwN,gBAAgBhH,SAGlE,EAEA,eAAIoB,GACA,OAAO7E,EAAS4E,KAAKC,cAAgB5H,EAAUwN,gBAAgBhH,SAAW,WAAa,WAC3F,EAEA,YAAImN,CAASC,GACT7Q,EAAS4E,KAAKC,YAAcgM,EAAY5T,EAAUwN,gBAAgBhH,SAAWxG,EAAUwN,gBAAgBjH,SAC3G,EAEA,YAAIoN,GACA,OAAO5Q,EAAS4E,KAAKC,cAAgB5H,EAAUwN,gBAAgBhH,QACnE,EAEA,cAAIqN,CAAWtK,GACXxG,EAAS4E,KAAKG,QAAQC,KAAOwB,CACjC,EAEA,cAAIsK,GACA,OAAO9Q,EAAS4E,KAAKG,QAAQC,IACjC,EAEA,aAAI+L,CAAUvK,GACVxG,EAAS4E,KAAKG,QAAQE,IAAMuB,CAChC,EAEA,aAAIuK,GACA,OAAO/Q,EAAS4E,KAAKG,QAAQE,GACjC,EAEA,gBAAI+L,CAAaxK,GACbxG,EAAS4E,KAAKG,QAAQG,OAASsB,CACnC,EAEA,gBAAIwK,GACA,OAAOhR,EAAS4E,KAAKG,QAAQG,MACjC,EAEA,eAAI+L,CAAYzK,GACZxG,EAAS4E,KAAKG,QAAQI,MAAQqB,CAClC,EAEA,eAAIyK,GACA,OAAOjR,EAAS4E,KAAKG,QAAQI,KACjC,EAKA,eAAI+L,CAAY/F,GAEhB,EAEA,eAAI+F,GACA,MAAO,kBACX,EAOAC,oBAAqB,WACjB,OAAO,CACX,EAEAC,UAAW,SAAUC,GACO,mBAAbA,IACP/nB,OAAOO,KAAK,wFACZwnB,EAAW,SAAUC,GAAUhoB,OAAOI,IAAI,iBAAmB4nB,EAAS,GAGtEhoB,OAAOoP,QAAQC,MAAMoX,GACrBzmB,OAAOoP,QAAQC,MAAMoX,GAAGqB,UAAUC,IAElC/nB,OAAOQ,MAAM,+IACbunB,GAAS,GAEjB,EAEAE,WAAY,SAAUF,GACM,mBAAbA,IACP/nB,OAAOO,KAAK,yFACZwnB,EAAW,SAAUC,GAAUhoB,OAAOI,IAAI,kBAAoB4nB,EAAS,GAGvEhoB,OAAOoP,QAAQC,MAAMoX,GACrBzmB,OAAOoP,QAAQC,MAAMoX,GAAGC,gBAAgBqB,IAExC/nB,OAAOQ,MAAM,mJACbunB,GAAS,GAEjB,EAEAG,QAAS,SAAUC,GAWf,GAVKA,IAK0B,iBAAhB,GAA6BA,EAAUnb,MAJlDmb,EAAY,MASE,OAAdA,EAAoB,CACpB,IAAI7I,EAAgC,iBAAhB,EAA2B6I,EAAYA,EAAUnb,GACrE,OAAO2G,EAAUgO,aAAarC,EAClC,CAEA3L,EAAU+N,iBACd,EAEArS,MAAO,SAAUgX,EAAS8B,EAAW5B,GAcjC,OAbKA,IACDA,EAAkB,SAAUC,GAAYxmB,OAAOI,IAAI,wBAA0BomB,EAAW,GAEvF2B,IAK0B,iBAAhB,GAA6BA,EAAUnb,MAJlDmb,EAAY,MAST/B,EAAeC,GAClB,WACI,GAAkB,OAAd8B,EAAoB,CACpB,IAAI7I,EAAgC,iBAAhB,EAA2B6I,EAAYA,EAAUnb,GACrE,OAAO2G,EAAU8N,WAAWnC,EAChC,CAEA,OAAO3L,EAAU4N,eACrB,GACAgF,EACR,EAEA6B,UAAW,SAAUvG,EAAMwE,EAASE,GAIhC,YAH+B,IAApBA,IACPA,EAAkB,SAAUC,GAAY,GAErCO,EAAiBlF,EAAMwE,EAASE,EAC3C,EAEA8B,YAAa,SAAUxG,EAAMwE,EAASvG,EAAYrZ,EAAM8f,GAIpD,YAH+B,IAApBA,IACPA,EAAkB,SAAUC,GAAY,GAErCO,EAAiBlF,EAAMwE,EAASE,EAAiBzG,EAAYrZ,EACxE,EAEA6hB,SAAU,SAAUC,EAASlC,EAASmC,EAAcC,EAAWC,EAASnC,GAKpE,YAJ+B,IAApBA,IACPA,EAAkB,SAAUC,GAAY,QAGpB,IAAb3O,GAEPA,EAASqL,qBAE0B,IAAxBqF,EAAQI,YACf9Q,EAASnB,SAASiM,YAAc4F,EAAQI,YAExC9Q,EAASnB,SAASiM,YAAc6F,EAC1B3Q,EAASmL,eAAeX,iBACxBxK,EAASmL,eAAed,eAGM,IAA7BqG,EAAQK,iBACf/Q,EAASnB,SAASkM,iBAAmB2F,EAAQK,iBACvC/Q,EAAS2C,cAAcpO,KACvByL,EAAS2C,cAAcnO,MAE7BwL,EAASnB,SAASkM,iBAAmB/K,EAAS2C,cAActW,aAE7B,IAAxBqkB,EAAQhN,YACf1D,EAASnB,SAAS6E,YAAsC,IAAxBgN,EAAQhN,YAClC1D,EAASsJ,gBAAgBhH,SACzBtC,EAASsJ,gBAAgBjH,UAE/BrC,EAASnB,SAAS6E,YAAc1b,KAAKynB,SAC/BzP,EAASsJ,gBAAgBhH,SACzBtC,EAASsJ,gBAAgBjH,eAEN,IAAlBqO,EAAQM,MACfhR,EAASnB,SAASqF,UAAYwM,EAAQM,MAMlChR,EAASnB,SAASqF,eAJG,IAAd0M,QACY,IAAZC,IACQ,IAAfD,IACa,IAAbC,EAC8BD,EAAY,IAAMC,EAElB,QAIJ,IAAvBH,EAAQ1F,WACfhL,EAASnB,SAASmM,WAAa0F,EAAQ1F,WACjChL,EAAS2C,cAAcpO,KACvByL,EAAS2C,cAAcnO,MAE7BwL,EAASnB,SAASmM,WAAahL,EAAS2C,cAActW,aAEzB,IAAtBqkB,EAAQzF,gBAA0D,IAAtByF,EAAQO,UAC3DjR,EAASnB,SAASoM,UAAYyF,EAAQzF,WAAayF,EAAQO,UACrDjR,EAAS2C,cAAcpO,KACvByL,EAAS2C,cAAcnO,MAE7BwL,EAASnB,SAASoM,UAAYjL,EAAS2C,cAActW,aAExB,IAAtBqkB,EAAQQ,UACflR,EAASnB,SAASqM,aAAewF,EAAQQ,eAEL,IAAzBR,EAAQxF,eACflL,EAASnB,SAASqM,aAAewF,EAAQxF,mBAIlB,IAApBwF,EAAQS,UACfnR,EAASnB,SAASnG,eAAiBgY,EAAQS,cAGhB,IAApBT,EAAQ1b,UACfgL,EAASnB,SAASnG,eAAiBgY,EAAQ1b,SAGxCqa,EAAgBqB,EAAQnjB,IAAKihB,EAASE,KAEjDvmB,OAAOQ,MAAM,oFACb+lB,GAAgB,IACT,EACX,EAEA0C,cAAe,SAAUpH,EAAM0E,GAC3B1mB,KAAKqpB,gBAAgBrH,GAAM,WAE3B,GAAG,gBAAiB0E,EACxB,EAEA2C,gBAAiB,SAAUrH,EAAM/B,EAAYrZ,EAAM8f,GAK/C,QAJ+B,IAApBA,IACPA,EAAkB,SAAUC,GAAY,QAGpB,IAAb3O,EAaP,OAZAA,EAASqL,gBAETrL,EAASnB,SAASqF,UAAYoL,EAAoBpL,UAClDlE,EAASnB,SAASiM,aAAsC,IAAxBjM,EAASmE,UACnChD,EAASmL,eAAeX,iBACxBxK,EAASmL,eAAed,UAC9BrK,EAASnB,SAAS6E,YAAc1b,KAAKynB,SAC/BzP,EAASsJ,gBAAgBhH,SACzBtC,EAASsJ,gBAAgBjH,UAC/BrC,EAASnB,SAASqM,aAAeoE,EAAoBC,kBAErDF,EAAgBrF,GAAM,EAAO0E,EAAiBzG,EAAYrZ,GAI9DzG,OAAOQ,MAAM,oFACb+lB,GAAgB,EACpB,EAEA,SAAI/K,CAAMyB,GACNpd,KAAKspB,iBAAiBlM,EAC1B,EAEA,SAAIzB,GACA,OAAO3b,KAAKupB,kBAChB,EAEA,aAAIC,CAAUC,GACV1V,EAASrP,eAAeglB,cAAgBD,CAC5C,EAEA,aAAID,GACA,OAAOzV,EAASrP,eAAeglB,aACnC,EAEA,eAAIC,CAAYC,GACZ7V,EAASrP,eAAemlB,gBAAkBD,CAC9C,EAEA,eAAID,GACA,OAAO5V,EAASrP,eAAemlB,eACnC,EAEA,gBAAIC,CAAaF,GACb7V,EAASrP,eAAemlB,gBAAkBD,CAC9C,EAEA,gBAAIE,GACA,OAAO/V,EAASrP,eAAemlB,eACnC,EAEA,aAAIE,GACA,OAAOhW,EAASrP,eAAeslB,cAAclJ,KACjD,EAEA,cAAImJ,GACA,OAAOlW,EAASrP,eAAeslB,cAAcjJ,MACjD,EAEA,UAAImJ,CAAOC,GACPpW,EAASrP,eAAewlB,OAASC,CACrC,EAEA,UAAID,GACA,OAAOnW,EAASrP,eAAewlB,MACnC,EAEA,WAAIE,CAAQC,GACRtW,EAASrP,eAAe0lB,SAAwB,IAAbC,GAAkC,IAAbA,EAAkBtW,EAASgC,eAAexJ,KAAOwH,EAASgC,eAAevJ,KACrI,EAEA,WAAI4d,GACA,OAAOrW,EAASrP,eAAe0lB,UAAYrW,EAASgC,eAAexJ,IACvE,EAEA,UAAI+d,CAAOA,GACPvW,EAASrP,eAAe4lB,OAASA,CACrC,EAEA,UAAIA,GACA,OAAOvW,EAASrP,eAAe4lB,MACnC,EAEA,WAAIC,CAAQD,GACRvW,EAASrP,eAAe4lB,OAASA,CACrC,EAEA,WAAIC,GACA,OAAOxW,EAASrP,eAAe4lB,MACnC,EAEA,gBAAIE,CAAaC,GACb1W,EAASqE,4BAA4B,eAAgBqS,EACzD,EACA,iBAAIC,CAAcD,GACd1W,EAASqE,4BAA4B,gBAAiBqS,EAC1D,EAEA,kBAAIE,CAAeC,GACftE,EAAYsE,EACZ3kB,OAAOgb,iBAAiB,gBAAgBva,MAAOsD,IAC3C7J,OAAOI,IAAI,gCACNJ,OAAOoP,QAAQC,MAAMiJ,sBAMtBtY,OAAOI,IAAI,oCALXJ,OAAOI,IAAI,oGACXyJ,EAAE6gB,YAAcD,EAChB5gB,EAAEmc,iBAIN,GAER,EAEA,kBAAIwE,GACA,OAAOrE,CACX,EAEA,eAAIwE,CAAYL,GACZ1W,EAASqE,4BAA4B,cAAeqS,EACxD,EAEA,mBAAIM,CAAgBN,GAChB1W,EAASqE,4BAA4B,kBAAmBqS,EAC5D,EAEA,eAAIO,CAAYP,GACZ1W,EAASqE,4BAA4B,cAAeqS,EACxD,EAEA,sBAAIQ,CAAmBR,GACnB1W,EAASqE,4BAA4B,qBAAsBqS,EAC/D,EAEAS,eAAgB,WACZ,OAAOnX,EAAS+C,kBAAkB,iBAAiB/S,WACvD,EAEAonB,qBAAsB,SAAU/X,GAC5BW,EAASyD,qBAAqBpE,EAClC,EAEAgY,wBAAyB,SAAUhY,GAC/BW,EAAS0D,wBAAwBrE,EACrC,EAEAiY,0BAA2B,SAAUjY,EAAY3B,GAC7CsC,EAAS2D,0BAA0BtE,EAAY3B,GAAW,SAAUkB,GAChEoB,EAAStE,YAAYkD,EACzB,GACJ,EAEA2Y,6BAA8B,SAAUlY,EAAY3B,GAChDsC,EAAS4D,6BAA6BvE,EAAY3B,GAAW,SAAUkB,GACnEoB,EAAStE,YAAYkD,EACzB,GACJ,EAGA,kBAAI4Y,GACA,OAAOxX,EAAShQ,WACpB,EAEA,kBAAIwnB,CAAe1Y,GACf7S,KAAKwrB,eAAiB3Y,CAC1B,EAEA,kBAAI2Y,GACA,OAAOzX,EAAShQ,WACpB,EAEA,kBAAIynB,CAAe3Y,GACf,GAA4B,iBAAjBA,EAA2B,CAClC,IAAIiR,EAAI/P,EAASoC,cAEjBpC,EAASoC,cAAgBpC,EAAS+B,YAAY1K,MAE9C,IACI2I,EAAShQ,YAAc8O,EACvBkB,EAASoC,cAAgB2N,CAC7B,CAAE,MAAO9Z,GAEL,MADA+J,EAASoC,cAAgB2N,EACnB9Z,CACV,CACJ,CACJ,EAEA,WAAI2b,GACA,OAAO5R,EAAShQ,WACpB,EAEA,WAAI4hB,CAAQ9S,GACR,GAA4B,iBAAjBA,EAA2B,CAElC,IAAIiR,EAAI/P,EAASoC,cAEjBpC,EAASoC,cAAgBpC,EAAS+B,YAAY1K,MAI9C,IACI2I,EAAShQ,YAAc8O,EACvBkB,EAASoC,cAAgB2N,CAC7B,CACA,MAAO9Z,GACH+J,EAASoC,cAAgB2N,CAC7B,CACJ,CACJ,EAEA,mBAAI2H,CAAgBC,GAChB3X,EAASrP,eAAe+mB,gBAAkBC,CAC9C,EAEA,mBAAIC,GACA,OAAO9U,EAAS2E,8BACpB,EAEA,mBAAImQ,CAAgBC,GAChB/U,EAAS2E,+BAAiCoQ,CAC9C,EAEA,aAAI5Q,GACA,OAAOnE,EAASmE,SACpB,EAEA,aAAIA,CAAUsB,GACVzF,EAASmE,UAAYsB,CACzB,EAEA,mBAAIuP,CAAgBxO,GAChBtJ,EAASrP,eAAeonB,mBAAmBjQ,KAAOwB,CACtD,EAEA,mBAAIwO,GACA,OAAO9X,EAASrP,eAAeonB,mBAAmBjQ,IACtD,EAEA,oBAAIkQ,CAAiB1O,GACjBtJ,EAASrP,eAAeonB,mBAAmB9P,MAAQqB,CACvD,EAEA,oBAAI0O,GACA,OAAOhY,EAASrP,eAAeonB,mBAAmB9P,KACtD,EAEA,kBAAIgQ,CAAe3O,GACftJ,EAASrP,eAAeonB,mBAAmBhQ,IAAMuB,CACrD,EAEA,kBAAI2O,GACA,OAAOjY,EAASrP,eAAeonB,mBAAmBhQ,GACtD,EAEA,qBAAImQ,CAAkB5O,GAClBtJ,EAASrP,eAAeonB,mBAAmB/P,OAASsB,CACxD,EAEA,qBAAI4O,GACA,OAAOlY,EAASrP,eAAeonB,mBAAmB/P,MACtD,EAEAmQ,aAAc,SAAUC,GACpB,IAAIC,EAAMrY,EAASwD,sBAEnB,GAAK6U,GAAsB,IAAfA,EAAI/qB,QAKZ,GAAI8qB,EAAQC,EAAI/qB,OACZ,OAAO+qB,EAAID,QALf,GAAc,IAAVA,EACA,OAAOnsB,KAAKurB,eAQpB,MAAO,EACX,EAEAc,SAAU,SAAUxZ,EAAcyZ,EAAQC,GAEtC,IACI1qB,EADA2qB,EAAOzY,EAASuE,MAEhBmU,EAAQ,IAAIC,MAGhB,IADA7Z,EAAeA,EAAaE,cACvBlR,EAAI,EAAGA,EAAI2qB,EAAKnrB,OAAQQ,IACrB2qB,EAAK3qB,GAAGkC,YAAYgP,gBAAkBF,GACtC4Z,EAAM3f,KAAK0f,EAAK3qB,IAIxB,OAAIyqB,EAASG,EAAMprB,QACfkrB,EAAW3sB,KAAO6sB,EAAMH,GAAQtf,QACzByf,EAAMH,GAAQ1kB,QAGlB,CACX,EAEA+kB,aAAc,SAAU9Z,GAEpB,IACIhR,EADA2qB,EAAOzY,EAASuE,MAEhByL,EAAI,EAGR,IADAlR,EAAeA,EAAaE,cACvBlR,EAAI,EAAGA,EAAI2qB,EAAKnrB,OAAQQ,IACrB2qB,EAAK3qB,GAAGkC,YAAYgP,gBAAkBF,GACtCkR,IAGR,OAAOA,CACX,EAEA6I,eAAgB,SAAU7oB,GACtB,MAAO,CACH,SAAI8oB,GACA,OAAO9Y,EAAS+C,kBAAkB/S,GAAa+oB,KACnD,EAEA,QAAIC,GACA,OAAOhZ,EAAS+C,kBAAkB/S,GAAaipB,IACnD,EAEA,SAAIF,GACA,OAAO/Y,EAAS+C,kBAAkB/S,GAAa+oB,KACnD,EAEA,QAAIE,GACA,OAAOjZ,EAAS+C,kBAAkB/S,GAAaipB,IACnD,EAEA,QAAIptB,GACA,OAAOmE,CACX,EAEA,UAAI6D,GACA,OAAOmM,EAAS+C,kBAAkB/S,GAAaiD,IACnD,EAEA,QAAIA,GACA,OAAO+M,EAAS+C,kBAAkB/S,GAAaiD,IACnD,EACA,cAAIimB,GACA,OAAOlZ,EAAS+C,kBAAkB/S,GAAakpB,UACnD,EACA,cAAIC,GACA,OAAOnZ,EAAS+C,kBAAkB/S,GAAampB,UACnD,EACA,aAAIC,GACA,OAAOpZ,EAAS+C,kBAAkB/S,GAAaopB,SACnD,EACA,YAAIzP,GACA,OAAO3J,EAAS+C,kBAAkB/S,GAAa2Z,QACnD,EACA,WAAI0P,GACA,OAAOrZ,EAAS+C,kBAAkB/S,GAAaqpB,OACnD,EACA,aAAIC,GACA,OAAOtZ,EAAS+C,kBAAkB/S,GAAaspB,SACnD,EACA,YAAIC,GACA,OAAOvZ,EAAS+C,kBAAkB/S,GAAaupB,QACnD,EAEA,QAAIC,GACAxZ,EAASqE,4BAA4B,sBACzC,EACAoV,MAAO,WACHzZ,EAASqE,4BAA4B,yBACzC,EACAqV,MAAO,WACH1Z,EAASqE,4BAA4B,yBACzC,EACAsV,OAAQ,WACJ3Z,EAASqE,4BAA4B,0BACzC,EAER,EAEAmR,iBAAkB,WACd,OAAO1S,EAAS4E,KAAKE,QAAU5H,EAASkC,iBAAiB3R,OAAS,EAAI,CAC1E,EAEAglB,iBAAkB,SAAUlM,GACxBvG,EAAS4E,KAAKE,MAAsB,IAAdyB,EAAkBrJ,EAASkC,iBAAiB3R,OAASyP,EAASkC,iBAAiB1R,EACzG,EAEAopB,cAAe,SAAUjoB,GACrBmR,EAASmE,UAAYtV,CACzB,EAEAkoB,WAAY,WACR,OAAO7Z,EAAS+E,UACpB,EAEA+U,SAAU,WAEN,OAAO,IACX,EAEAC,aAAc,SAAUC,EAAgBC,EAAOC,GACvCF,GACAha,EAASqE,4BAA4B,+BAGzCvB,EAASqF,UAAiB8R,EAAQ,IAAMC,CAC5C,EAEAC,eAAgB,WACZna,EAASqE,4BAA4B,iBACzC,EAEA+V,MAAO,WAGHpa,EAASqE,4BAA4B,QACzC,EAEAgW,gBAAiB,WACbra,EAASqE,4BAA4B,kBACzC,EAEAiW,wBAAyB,SAAUrV,EAAUC,GACzClF,EAASgF,wBAAwBC,EAAUC,EAC/C,EAEAqV,mBAAoBhH,EAGpBiH,aAAc,WAMV,OALKpuB,OAAOoP,QAAQC,MAAM8H,aACtBxD,EAAUe,QAAQ,GAAI,IAAI,SAAU7K,GAChC7J,OAAOO,KAAK,sCAAwCsJ,EACxD,IAEG7J,OAAOoP,QAAQC,MAAM8H,WAChC,EAEAkX,kBAAmB,SAAU3oB,EAASC,GAC9B3F,OAAOoP,QAAQC,MAAM8H,YACrBzR,EAAQ,GAERiO,EAAUmD,aAAa,GAAI,GAAIpR,EAASC,EAEhD,EAEA,+BAAI2oB,GACA,OAAOtuB,OAAOoP,QAAQC,MAAMgH,mBAChC,EAEA,+BAAIiY,CAA4BhqB,GAC5BtE,OAAOoP,QAAQC,MAAMgH,oBAAsB/R,CAC/C,EAGR,IAGkD,mBAAnC+f,QAAQsB,wBACftB,QAAQsB,uBAEb,kBAAkB,WAGjB,IAAI/lB,EAAaC,KAajB,OAXAD,EAAWykB,QAAQjkB,IAAI,0BAWhBR,EAAWykB,OACtB,IAGkD,mBAAnCA,QAAQsB,wBACftB,QAAQsB,uBAEb,qBAAqB,WAQpB,OALiB9lB,KAENwkB,QAAQjkB,IAAI,6BAGhB,CASHmuB,aAAc,SAAUC,GACpB,OAAIC,MAAMD,GACC,EAEY,iBAARA,EACAE,OAAOF,GAEPA,CAGnB,EAER,IAaA,SAAWG,EAAYltB,EAAG2hB,GACtB,aAEA,GAAKuL,EAAL,CAIA,IAAIC,EAAKD,EAAWxsB,SAAS,2BAC7BysB,EAAG9uB,QAAU,WAEb6uB,EAAWvuB,IAAI,uCAAyCwuB,EAAG9uB,SAG3D8uB,EAAG9G,UAAY,SAAU+G,GAErB,IAAKptB,EAAE6oB,GAAGwE,QAAUC,UAAUC,MAG1B,OAFA1uB,QAAQE,MAAM,yDACdquB,GAAW,GAIf,IAAII,GAAY,EACZC,EAAS,GACTC,GAAmB1tB,EAAE6oB,GAAGwE,MAAMM,YAAYC,SAAW,IAAIhuB,MAAM,KAAK,GAAGA,MAAM,KAAK,GAWtF,GARII,EAAE6oB,GAAGgF,cAAoC,MAApBH,IACrBD,EAAS,iBAORztB,EAAE,qBAAqBP,OAAQ,CAEhC,IAAIquB,EAEJ,OAHAjvB,QAAQF,IAAI,yCAA2CqB,EAAE6oB,GAAGwE,MAAMM,YAAYC,QAAU,YAAcF,GAG9FA,GACJ,IAAK,IACDI,EAAM,y2BAmBwCL,EAnBxC,21FAuHN,MAEJ,IAAK,IACDK,EAAM,woBAG4IL,EAH5I,wsHAqBN,MAEJ,IAAK,IACDK,EAAM,omBAG4IL,EAH5I,2qHAuBN,MAEJ,QAGI,OAFA5uB,QAAQE,MAAM,iCAAmC2uB,QACjDN,GAAW,GAInBptB,EAAE,QAAQ+tB,OAAOD,EACrB,CAEA9tB,EAAE,wBACGguB,IAAI,UACJC,GAAG,UAAU,WACV,MAAMC,EAA6B,MAApBR,EAA0B,SAAW,OACpD,OAAQ1tB,EAAE5B,MAAMie,OACZ,IAAK,IACDrc,EAAE,gCAAgCkuB,yBAA8BjS,MAAK,WAoWzF,IAAqCkS,KAnWenuB,EAAE5B,OAoW9Cie,KAA8B,KAAxB+R,WAAWD,EAAI9R,OAAiB,KAAKgS,QAAQ,GAnWvC,IACA,MAEJ,IAAK,IACDruB,EAAE,gCAAgCkuB,yBAA8BjS,MAAK,WAmWzF,IAAqCkS,KAlWenuB,EAAE5B,OAmW9Cie,KAA8B,IAAxB+R,WAAWD,EAAI9R,OAAgB,MAAMgS,QAAQ,GAlWvC,IAGZ,IAGJruB,EAAE,oBACGguB,IAAI,SACJC,GAAG,SAAS,SAAUK,GACnBA,EAAG/J,iBA2Nf,WACI,IAAIgK,EAAOvuB,EAAE,qBACTiV,EAAW1W,OAAOoP,QAAQC,MAAM/E,KAAKoM,SAErCsZ,EAAK9uB,SACLwV,EAAS4E,KAAKC,YAAcyU,EAAK/iB,KAAK,oCAAoC6Q,MAC1EpH,EAAS2E,+BAAiC2U,EAAK/iB,KAAK,wBAAwBnL,KAAK,WACjF4U,EAASmE,UAAYmV,EAAK/iB,KAAK,oBAAoBnL,KAAK,YAAc,EAAI,IAC1E4U,EAAS4E,KAAKE,MAAQtV,SAAS8pB,EAAK/iB,KAAK,gCAAgC6Q,OACzEpH,EAAS4E,KAAKG,QAAQC,KAAOsU,EAAK/iB,KAAK,gBAAgB6Q,MACvDpH,EAAS4E,KAAKG,QAAQE,IAAMqU,EAAK/iB,KAAK,gBAAgB6Q,MACtDpH,EAAS4E,KAAKG,QAAQI,MAAQmU,EAAK/iB,KAAK,gBAAgB6Q,MACxDpH,EAAS4E,KAAKG,QAAQG,OAASoU,EAAK/iB,KAAK,gBAAgB6Q,MACzDpH,EAASgE,OAASsV,EAAK/iB,KAAK,eAAe6Q,MAC3CpH,EAASiE,OAASqV,EAAK/iB,KAAK,eAAe6Q,MAE3C9d,OAAOoP,QAAQC,MAAM9K,eAAeglB,cAAgB9nB,EAAE,kBAAkBqc,MAEhF,CA5OYmS,GACAhB,GAAY,EACZxtB,EAAE,qBAAqBqtB,MAAM,OACjC,IAEJrtB,EAAE,qBACGguB,IAAI,mBACJC,GAAG,mBAAmB,WACO,mBAAfb,GACPA,EAAWI,EAEnB,IAEJ,IAAIe,EAAOvuB,EAAE,qBACTiV,EAAW1W,OAAOoP,QAAQC,MAAM/E,KAAKoM,SAEzCsZ,EAAK/iB,KAAK,4BAA4B6Q,IAAI,CAACpH,EAAS4E,KAAKC,cACzDyU,EAAK/iB,KAAK,wBAAwBnL,KAAK,UAAW4U,EAAS2E,gCAC3D2U,EAAK/iB,KAAK,oBAAoBnL,KAAK,WAAkC,GAAvB4U,EAASmE,WACvDmV,EAAK/iB,KAAK,wBAAwB6Q,IAAI,CAACpH,EAAS4E,KAAKE,QACrDwU,EAAK/iB,KAAK,gBAAgB6Q,IAAIpH,EAAS4E,KAAKG,QAAQC,MACpDsU,EAAK/iB,KAAK,gBAAgB6Q,IAAIpH,EAAS4E,KAAKG,QAAQE,KACpDqU,EAAK/iB,KAAK,gBAAgB6Q,IAAIpH,EAAS4E,KAAKG,QAAQI,OACpDmU,EAAK/iB,KAAK,gBAAgB6Q,IAAIpH,EAAS4E,KAAKG,QAAQG,QACpDoU,EAAK/iB,KAAK,eAAe6Q,IAAIpH,EAASgE,QACtCsV,EAAK/iB,KAAK,eAAe6Q,IAAIpH,EAASiE,QAGtC,IAAI/G,EAAW5T,OAAOoP,QAAQC,MAC1B6gB,EAAezuB,EAAE,kBACjBkrB,EAAQ/Y,EAAS+C,kBAAkB/C,EAAShQ,aAAa+oB,MAG7D,IAAK,IAAIjrB,KADTD,EAAE,2BAA2Bid,SACfiO,EACVuD,EAAaV,OAAO,WAAa7C,EAAMjrB,GAAK,aAG5CwuB,EAAaC,SAAS,iBACtBD,EAAaZ,aAAa,WAG9BY,EAAapS,IAAI9d,OAAOoP,QAAQC,MAAM9K,eAAeglB,eAErDyG,EAAKlB,MAAM,QAEPoB,EAAaC,SAAS,iBACtBD,EAAaZ,aAAa,UAGlC,EAGAV,EAAGlI,gBAAkB,SAAUmI,GAE3B,IAAKptB,EAAE6oB,GAAGwE,QAAUC,UAAUC,MAG1B,OAFA1uB,QAAQE,MAAM,yDACdquB,GAAW,GAIf,IAAII,GAAY,EACZC,EAAS,GACTC,GAAmB1tB,EAAE6oB,GAAGwE,MAAMM,YAAYC,SAAW,IAAIhuB,MAAM,KAAK,GAAGA,MAAM,KAAK,GAQtF,GALII,EAAE6oB,GAAGgF,cAAoC,MAApBH,IACrBD,EAAS,iBAIRztB,EAAE,wBAAwBP,OAAQ,CAGnC,IAAIquB,EAEJ,OAJAjvB,QAAQF,IAAI,yCAA2CqB,EAAE6oB,GAAGwE,MAAMM,YAAYC,SAItEF,GACJ,IAAK,IACDI,EAAM,80BAmBwCL,EAnBxC,qNAuBwCA,EAvBxC,0vBAmDN,MAEJ,IAAK,IACDK,EAAM,wkBAGwCL,EAHxC,8RAIsJA,EAJtJ,62BASN,MAEJ,IAAK,IACDK,EAAM,kgBAGwCL,EAHxC,iPAIkJA,EAJlJ,w2BASN,MAEJ,QAGI,OAFA5uB,QAAQE,MAAM,iCAAmC2uB,QACjDN,GAAW,GAInBptB,EAAE,QAAQ+tB,OAAOD,GAEjB9tB,EAAE,2CAA2C2uB,QAAO,SAAUL,GAC1DM,EAAgB5uB,EAAE5B,MAAMie,MAC5B,GACJ,CAwBA,GArBArc,EAAE,qBACGguB,IAAI,SACJC,GAAG,SAAS,SAAUK,GACnBA,EAAG/J,iBAmEf,WACI,IAAIgK,EAAOvuB,EAAE,wBACTmS,EAAW5T,OAAOoP,QAAQC,MAE9B,GAAI2gB,EAAK9uB,OAAQ,CAEb,IAAIyiB,EAAI/P,EAASoC,cAEjBpC,EAASoC,cAAgBpC,EAAS+B,YAAY1K,MAI9C,IACI2I,EAAShQ,YAAcnC,EAAE,sBAAsBqc,MAC/ClK,EAASoC,cAAgB2N,CAC7B,CACA,MAAO9Z,GACH+J,EAASoC,cAAgB2N,CAC7B,CAGA,IAAIjN,EAAW9C,EAASrP,eACxBmS,EAASgT,gBAAkBjoB,EAAE,oBAAoBqc,MACjDpH,EAASuT,QAAU+F,EAAK/iB,KAAK,gBAAgBnL,KAAK,WAAa8R,EAASgC,eAAexJ,KAAOwH,EAASgC,eAAevJ,MACtHqK,EAASqT,OAASiG,EAAK/iB,KAAK,eAAe6Q,KAC/C,CACJ,CA5FYwS,GACArB,GAAY,EACZxtB,EAAE,wBAAwBqtB,MAAM,OACpC,IAEJrtB,EAAE,wBACGguB,IAAI,mBACJC,GAAG,mBAAmB,WACO,mBAAfb,GACPA,EAAWI,EAEnB,IAoFR,WACI,IAAIrb,EAAW5T,OAAOoP,QAAQC,MAC1BkhB,EAAY9uB,EAAE,sBACd+uB,EAAc5c,EAASwD,sBAE3B3V,EAAE,+BAA+Bid,SAEjC,IAAK,IAAIhd,EAAI,EAAGA,EAAI8uB,EAAYtvB,OAAQQ,IACpC6uB,EAAUf,OAAO,WAAagB,EAAY9uB,IAG9C6uB,EAAUzS,IAAIlK,EAAShQ,aACnB2sB,EAAUJ,SAAS,gBACnBI,EAAUjB,aAAa,WAGvBe,EAAgBzc,EAAShQ,YACjC,CAlGI6sB,GAoBJ,WACI,IAAI7c,EAAW5T,OAAOoP,QAAQC,MAC1BqH,EAAW9C,EAASrP,eAExBmsB,IAEA,IAAIV,EAAOvuB,EAAE,wBACbuuB,EAAK/iB,KAAK,gBAAgBnL,KAAK,UAAW4U,EAASuT,UAAYrW,EAASgC,eAAexJ,MACvF4jB,EAAK/iB,KAAK,eAAe6Q,IAAIpH,EAASqT,OAE1C,CA7BI4G,GAEwB,MAApBxB,EAAyB,CACjB,IAAIJ,UAAUC,MAAM7e,SAASuP,eAAe,uBAAwB,CACxEkR,SAAU,SACVC,UAAU,EACVC,MAAM,IAERA,MACN,MAEIrvB,EAAE,wBAAwBqtB,MAAM,QAErB,iBAAXI,GACAztB,EAAE,sCAAsC6tB,aAAa,UAE7D,CA1bA,CA6gBA,SAASe,EAAgBzsB,GACrB,IAAIgQ,EAAW5T,OAAOoP,QAAQC,MAC1B0hB,EAAqBnd,EAAShQ,YAC9BotB,EAAgBpd,EAASrP,eAAemlB,gBAExC/F,EAAI/P,EAASoC,cAEjBpC,EAASoC,cAAgBpC,EAAS+B,YAAY1K,MAE9C,IAEI2I,EAAShQ,YAAcA,EACvB8sB,GACJ,CAAE,MAAO7mB,GACLmO,MAAM,oCAAsCnO,EAAEvG,QAClD,CAGA,IACIsQ,EAAShQ,YAAcmtB,EACvBnd,EAASrP,eAAemlB,gBAAkBsH,CAC9C,CAAE,MAAOnnB,GACLmO,MAAM,uEAAyEnO,EAAEvG,QACrF,CAEAsQ,EAASoC,cAAgB2N,CAE7B,CAEA,SAAS+M,IACL,IAAI9c,EAAW5T,OAAOoP,QAAQC,MAE9BuE,EAASgD,uBAAuBhD,EAAShQ,aAAc8S,IACnD,IAAIua,EAAYva,EAASmW,KACrBqE,EAAQzvB,EAAE,oBAEdA,EAAE,6BAA6Bid,SAC/B,IAAK,IAAIhd,EAAI,EAAGA,EAAIuvB,EAAU/vB,OAAQQ,IAClCwvB,EAAM1B,OAAO,WAAayB,EAAUvvB,IAGxCwvB,EAAMpT,IAAIpH,EAASgT,iBAEfwH,EAAMf,SAAS,iBACfe,EAAM5B,aAAa,UACvB,IAECzc,IAAW7S,OAAOoP,QAAQC,MAAMC,YAAYuD,EAAK,GAE1D,CAYH,CA/kBD,CA+kBG/M,OAAO9F,OAAS8F,OAAO9F,QAAU,KAAMuB","file":"meadco-scriptxservicesprintUI.min.js","sourcesContent":["!function(e,t){var r=function(){var e=this,t=\"1.15.2.4\",r=\"undefined\"!=typeof MeadCo&&void 0!==MeadCo.logEnable&&MeadCo.logEnable,o=\"undefined\"!=typeof MeadCo&&void 0!==MeadCo.useFetch&&MeadCo.useFetch,n=function(e){r&&console.log(\"MeadCo :: \"+e)},i=function(e){console.warn(\"MeadCo :: \"+e)},a=function(e){console.error(\"MeadCo :: \"+e)};function s(e,t,r,o){return a(\"**warning: AJAX call failure in \"+e+\": [\"+r+\"], [\"+o+\"], [\"+t.responseText+\"], [\"+t.statusText+\"]\"),\"\"===o||\"Internal Server Error\"===o?o=\"error\"!==r?t.responseText||r:\"object\"==typeof t.responseJSON&&\"string\"==typeof t.responseJSON.Message?t.responseJSON.Message:\"string\"==typeof t.responseText?t.responseText:\"Server or network error\":\"object\"!=typeof t.responseJSON&&\"string\"==typeof t.responseText&&t.responseText.length>0&&(o=t.responseText),a(\" error parsed to --\\x3e [\"+o+\"]\"),o}return e.extendMeadCoNamespace=function(t,r){var o=r();n(\"MeadCo root extending namespace: \"+t);for(var i=t.split(\".\"),a=e.scope||this.jQuery||this.ender||this.$||this,s=0;s<i.length;s++){var l=i[s];if(s===i.length-1)if(void 0===a[l])n(\"installing implementation at: \"+l),a[l]=o;else{n(\"Warning - extending package: \"+l);var c=a[l];a[l]=o;var d=a[l];for(var u in n(\"preserving old scope ... \"),c)c.hasOwnProperty(u)&&(n(\"will preserve: \"+u),d[u]=c[u])}else void 0===a[l]?(n(\"initialising new: \"+l),a[l]={}):n(\"using existing package: \"+l);a=a[l]}},n(\"MeadCo root namespace \"+t+\" loaded.\"),{log:n,warn:i,error:a,get version(){return t},get logEnabled(){return r},set logEnabled(e){r=e},get fetchEnabled(){return o},set fetchEnabled(e){o=e},createNS:function(t){var r=t.split(\".\"),o=e.scope.MeadCo;\"MeadCo\"===r[0]&&(r=r.slice(1));for(var n=0;n<r.length;n++){var i=r[n];void 0===o[i]&&(o[i]={}),o=o[i]}return o},set scope(t){e.scope=t},makeApiEndPoint:function(e,t){var r=e.indexOf(\"/api\");return-1===r?(e.lastIndexOf(\"/\")!==e.length-1&&(e+=\"/\"),e+=\"api/\"+t):e=e.substring(0,r)+\"/api/\"+t,e},makeServiceEndPoint:function(e,t){var r=e.indexOf(\"/api\");return-1===r?(e.lastIndexOf(\"/\")!==e.length-1&&(e+=\"/\"),e+=t):e=e.substring(0,r)+\"/\"+t,e},parseAjaxError:function(e,t,r,o){return s(e,t,r,o)},parseFetchError:function(e,t){const r=\"string\"==typeof t?t:t.message;return a(\"**warning: FETCH call failure in \"+e+\": \"+r),r}}}(),o=this,n=null;if(void 0!==o[e]&&(n=o[e]),o[e]=r,null!==n){var i=o[e];for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])}r.scope=o}(\"MeadCo\"),extendMeadCoNamespace(\"MeadCo.ScriptX.Print\",(function(){const e=\"1.15.2.4\",t=\"v1/printHtml\",r=\"v1/printPdf\",o=\"v1/printDirect\",n=\"v1/licensing\",i=\"v1/printer\";let a=\"\";const s=\"ScriptX.Services//PrintPreview.1\",l=\"[hold.clientside]\",c=\"[wait.response]\",d=\"[hold.ensureSpoolStatus]\",u={DEFAULT:0,INCHES:1,MM:2};var p={cookie:\"\"};let f={};const m=this;let g=[];const v={serviceUrl:\"\",pendingUrl:\"\",failedUrl:\"\",verifiedUrl:\"\",orchestratorPort:0,orchestratorKey:\"\",portsToTry:10,verifying:!1,trustVerifiedConnection:!0,undoTrust:function(){this.trustVerifiedConnection||\"\"===this.serviceUrl||(this.verifiedUrl=this.serviceUrl,this.pendingUrl=this.serviceUrl,this.serviceUrl=\"\")},get url(){if(\"\"!==this.verifiedUrl)return this.verifiedUrl;if(\"\"===this.serviceUrl&&\"\"!==this.pendingUrl){MeadCo.warn(\"[GET] servicesServer.url is not ready, performing synchronous search. Recommend code re-org to resolve the server earlier and asynchronously.\");var e=this;this.verifyUrl(this.pendingUrl,!1,(function(){return e.serviceUrl}),(function(){return\"\"}))}return this.serviceUrl},set url(e){MeadCo.log(\"servicesServer::setUrl: \"+e),this.IsChangingServer(e)&&(MeadCo.log(\"note set as pending\"),this.serviceUrl=\"\",this.pendingUrl=e)},setUrlAsync:function(e,t,r){MeadCo.log(\"servicesServer::urlAsync: \"+e),this.verifyUrl(e,!0,t,r)},verifyUrl:function(e,t,r,o){if(this.verifying&&t){MeadCo.warn(\"Verify called and verify in progress ....\");var n=this,i=e;window.setTimeout((function(){n.verifyUrl(i,t,r,o)}),1e3)}else if(this.IsChangingServer(e)&&!this.IsFailedConnection(e)){var a;n=this,i=e,MeadCo.log(\"servicesServer::verifyurl: \"+e+\", async: \"+t),\"number\"!=typeof this.orchestratorPort&&(this.orchestratorPort=parseInt(\"\"+this.orchestratorPort)),this.orchestratorPort>0?(MeadCo.log(\"Using request to Orchestrator on port: \"+this.orchestratorPort),n.verifying=!0,a=\"string\"==typeof this.orchestratorKey&&this.orchestratorKey.length>0?\"/api/v2?key=\"+this.orchestratorKey:\"/api/v1\",MeadCo.log(\"servicesServer::querying orchestrator: http://127.0.0.1:\"+this.orchestratorPort+a),m.jQuery&&!MeadCo.fetchEnabled?m.jQuery.ajax(\"http://127.0.0.1:\"+this.orchestratorPort+a,{method:\"GET\",dataType:\"json\",cache:!1,async:t}).done((function(e){MeadCo.log(\"orchestrator returned ScriptX.Services port: \"+e.HttpPort);var a=new URL(i);a.port=e.HttpPort,i=a.protocol+\"//\"+a.host+a.pathname,n.test(i,0,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!0)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i,n.verifying=!1,\"function\"==typeof o&&o(e)}))})).fail((function(e,t,r){n.verifying=!1,n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i;const a=MeadCo.parseAjaxError(\"Failed to connect with Orchestrator: \",e,t,r);MeadCo.warn(a),\"function\"==typeof o&&o(\"Failed to connect with Orchestrator: \"+a)})):fetch(\"http://127.0.0.1:\"+this.orchestratorPort+a).then((e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()})).then((e=>{MeadCo.log(\"orchestrator returned ScriptX.Services port: \"+e.HttpPort);var a=new URL(i);a.port=e.HttpPort,i=a.protocol+\"//\"+a.host+a.pathname,n.test(i,0,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!0)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i,n.verifying=!1,\"function\"==typeof o&&o(e)}))})).catch((t=>{n.verifying=!1,n.serviceUrl=\"\",n.pendingUrl=\"\",n.failedUrl=i;const r=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:verifyUrl - \"+e,t);\"function\"==typeof o&&o(\"Failed to connect with Orchestrator: \"+r)}))):(n.verifying=!0,n.test(i,n.portsToTry,t,(function(e){n.serviceUrl=e,n.pendingUrl=\"\",n.verifying=!1,r(e,!1)}),(function(e){n.serviceUrl=\"\",n.pendingUrl=\"\",n.verifying=!1;try{new URL(i),n.failedUrl=i}catch(e){}\"function\"==typeof o&&o('ScriptX.Services could not be found at \"'+i+'\". Is it installed and running?')})))}else this.IsFailedConnection(e)?\"function\"==typeof o?o(\"ScriptX.Services connection to: \"+e+\" is either invalid or has already failed and will not be re-tried.\"):MeadCo.warn(\"ScriptX.Services connection to: \"+e+\" has already failed and will not be re-tried.\"):r(this.serviceUrl,this.orchestratorPort>0)},test:function(e,t,r,o,i){if(e.length>0){const a=this;let s;try{if(s=new URL(e),\"http:\"!==s.protocol&&\"https:\"!==s.protocol)return void i(\"Invalid protocol: \"+e)}catch(t){return void i(\"Invalid URL: \"+e)}MeadCo.log(\"Test server requested: \"+e+\", port: \"+s.port);const l=MeadCo.makeApiEndPoint(s.href,n+\"/ping\");m.jQuery&&!MeadCo.fetchEnabled?(MeadCo.log(\".ajax() get: \"+l),m.jQuery.ajax(l,{method:\"GET\",dataType:\"json\",cache:!1,async:r}).done((function(e){const t=s.protocol+\"//\"+s.host+s.pathname;MeadCo.log(\"Test server succeed, resolve(\"+t+\")\"),o(t)})).fail((function(e,n,l){MeadCo.log(\"Test server failed: [\"+l+\"], \"+t+\", on: \"+s.hostname),t>0&&(\"localhost\"===s.hostname||\"127.0.0.1\"==s.hostname)?(s.port++,m.setTimeout(a.test(s.protocol+\"//\"+s.host+s.pathname,--t,r,o,i),1)):(l=MeadCo.parseAjaxError(\"MeadCo.ScriptX.Print.servicesServer.test:\",e,n,l),\"function\"==typeof i?(MeadCo.log(\"rejecting with: \"+l),i(l)):MeadCo.warn(\"failed with no reject function\"))}))):(MeadCo.log(\"fetch get: \"+l),r?fetch(l).then((e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()})).then((e=>{const t=s.protocol+\"//\"+s.host+s.pathname;MeadCo.log(\"Test server succeed, resolve(\"+t+\")\"),o(t)})).catch((e=>{MeadCo.log(\"Test server failed: [\"+e+\"], \"+t+\", on: \"+s.hostname),t>0&&(\"localhost\"===s.hostname||\"127.0.0.1\"==s.hostname)?(s.port++,m.setTimeout(a.test(s.protocol+\"//\"+s.host+s.pathname,--t,r,o,i),1)):(errorThrown=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print.servicesServer.test:\",e),\"function\"==typeof i?(MeadCo.log(\"rejecting with: \"+errorThrown),i(errorThrown)):MeadCo.warn(\"failed with no reject function\"))})):(MeadCo.error(\"Synchronous Ajax calls requires jQuery\"),\"function\"==typeof i&&i(\"Synchronous Ajax calls requires jQuery\")))}},call:function(e,t,r,o,n,i,a){const s=this;if(\"\"===this.serviceUrl&&\"\"!==this.pendingUrl)this.verifyUrl(this.pendingUrl,n,(function(){\"\"!==s.url?s.call(e,t,r,o,n,i,a):\"function\"==typeof a&&a(\"Server url verification failed to set url\")}),a);else if(\"\"!==this.serviceUrl){const l=MeadCo.makeApiEndPoint(this.serviceUrl,e);MeadCo.log(\"servicesServer.call() \"+t+\": \"+l);let c={method:t,cache:!1,async:n,jsonp:!1,dataType:\"json\",contentType:\"application/json\"};if(o&&(c.headers={Authorization:\"Basic \"+btoa(h+\":\")}),this.IsEmptyPayload(r)||(MeadCo.log(\"payload defined.\"),c.data=JSON.stringify(r)),m.jQuery&&!MeadCo.fetchEnabled)m.jQuery.ajax(l,c).done((function(e){return\"function\"==typeof i&&i(e),e})).fail((function(r,o,n){if(n=MeadCo.parseAjaxError(\"MeadCo.ScriptX.Print:\"+e+t,r,o,n),\"function\"!=typeof a)throw new Error(n);a(n)})).always((function(e,t,r){s.undoTrust()}));else if(n)c.headers=o?{Authorization:\"Basic \"+btoa(h+\":\"),\"Content-type\":\"application/json\"}:{\"Content-type\":\"application/json\"},fetch(l,{method:c.method,headers:c.headers,body:c.data,referrerPolicy:\"origin-when-cross-origin\",mode:\"cors\",credentials:\"omit\",cache:\"no-store\",redirect:\"error\",keepalive:!1}).then((r=>{if(s.undoTrust(),r.ok)return r.json();if(500==r.status||404==r.status)r.text().then((r=>{const o=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:\"+e+t,r);if(\"function\"!=typeof a)throw new Error(o);a(o)}));else{if(\"function\"!=typeof a)throw new Error(r.statusText);a(r.statusText)}})).then((e=>{e&&\"function\"==typeof i&&i(e)})).catch((r=>{const o=MeadCo.parseFetchError(\"MeadCo.ScriptX.Print:\"+e+t,r);if(\"function\"!=typeof a)throw new Error(o);a(o)}));else{if(\"function\"!=typeof a)throw new Error(\"Synchronous Ajax calls requires jQuery\");a(\"Synchronous Ajax calls requires jQuery\")}}else{if(\"function\"!=typeof a)throw new Error(\"MeadCo.ScriptX.Print : server connection is not defined.\");a(\"MeadCo.ScriptX.Print : server connection is not defined.\")}return!0},IsChangingServer:function(e){if(\"\"!==this.serviceUrl)try{var t=new URL(this.serviceUrl),r=new URL(e);return t.hostname!=r.hostname||t.port!=r.port&&0==this.orchestratorPort}catch(t){return MeadCo.error(\"Failed to construct URL(): \"+t.message+\", from: \"+this.serviceUrl+\", or: \"+e),MeadCo.error(\"Many errors will ensue\"),!1}return!0},IsEmptyPayload:e=>null===e||0===Object.keys(e).length&&e.constructor===Object,IsFailedConnection:function(e){if(this.failedUrl.length>0)try{var t=new URL(this.failedUrl),r=new URL(e);return t.hostname===r.hostname&&(MeadCo.warn(\"Attempt to use: \"+e+\" is noted as a failed connection and will not be retried\"),!0)}catch(t){return MeadCo.error(\"Testing IsFailed unable to construct URL(): \"+t.message+\", from: \"+this.failedUrl+\", or: \"+e),!0}return!1}};var h=\"\",b=!1,y=!1,C=[],S=null,P={URL:1,HTML:2,INNERHTML:4,STRING:8},M={UNKNOWN:0,QUEUEDTODEVICE:1,QUEUEDTOFILE:2,SOFTERROR:3,OK:4},w={REPORT:1,THROW:2},E=w.REPORT,F={CLOUD:1,ONPREMISE:2,WINDOWSPC:3},A={NOTSTARTED:0,QUEUED:1,STARTING:2,DOWNLOADING:3,DOWNLOADED:4,PRINTING:5,COMPLETED:6,PAUSED:7,PRINTPDF:8,ERROR:-1,ABANDONED:-2},T={DEFAULT:0,TRUE:1,FALSE:2},x={DEFAULT:0,SIMPLEX:1,VERTICAL:2,HORIZONTAL:3};function k(e){g.push(e),MeadCo.log(\"ScriptX.Print queueJob: \"+e.jobIdentifier+\", name: \"+e.jobName+\", jobCount: \"+g.length)}function N(){return MeadCo.log(\"ScriptX.Print jobCount: \"+g.length),g.length}function D(e){return g.find((t=>t.jobIdentifier===e))}function U(e){let t=D(e.jobIdentifier);t?Object.keys(e).forEach((function(r){t[r]=e[r]})):MeadCo.warn(\"Unable to find job: \"+e.jobIdentifier+\" to update it\")}function R(e){g=g.filter((t=>t.jobIdentifier!==e)),MeadCo.log(`ScriptX.Print removed job: ${e}, jobCount: ${g.length}`),0==g.length&&(j=0)}function L(e,t,r){\"function\"==typeof e.OnProgress&&e.OnProgress(t,r,e.UserData)}var I=\"\";function H(e,r,o,n,i,c,d){var u;MeadCo.log(\"started MeadCo.ScriptX.Print.print.printHtmlAtServer() Type: \"+e),e===P.URL&&MeadCo.log(\".. request print url: \"+r),u=\"\"===a?{}:a===s?JSON.parse(JSON.stringify({printerName:a})):JSON.parse(JSON.stringify(f[a]));var m={ContentType:e,Content:r,Settings:JSON.parse(JSON.stringify(o)),Device:u,ProtectedContentAccess:p,OnProgress:c,UserData:n},g={jobIdentifier:Date.now(),printerName:m.Device.printerName,jobName:l};k(g);var h=I;I=\"\";var b=d;return function(){return R(g.jobIdentifier),K(t,m,{fail:function(e){L(m,A.ERROR,e),MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof i&&i(\"Server error\")},queuedToFile:function(e){MeadCo.log(\"print is being queued to a file\"),L(m,A.QUEUED),Z(t,m,e.jobIdentifier,-1,(function(e){if(null!==e){MeadCo.log(\"download printed file is available\"),L(m,A.COMPLETED);var r=MeadCo.makeApiEndPoint(v.url,t+\"/download/\"+e.jobIdentifier);h.length>0&&(r+=\"/\"+h),b(r,e.jobIdentifier)}\"function\"==typeof i&&i(null===e?\"Server error\":null)}))},queuedToDevice:function(e){MeadCo.log(\"print was queued to device\"),L(m,A.QUEUED),Z(t,m,e.jobIdentifier,-1,(function(e){null!==e&&L(m,A.COMPLETED),\"function\"==typeof i&&i(null===e?\"Server error\":null)}))},softError:function(e){L(m,A.ERROR,e.message),MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"print has soft error\"),R(e.jobIdentifier),\"function\"==typeof i&&(MeadCo.log(\"Call fnDone\"),i(e.message))},ok:function(e){L(m,A.COMPLETED),MeadCo.log(\"printed ok, no further information\"),R(e.jobIdentifier),\"function\"==typeof i&&i(null)}})}}var O=0,j=0,X=750,q=1e4;function B(e,t,r,o,n,i){if(!t||\"string\"==typeof t&&0===t.length)return MeadCo.ScriptX.Print.reportError(\"Request to print no content - access denied?\"),\"function\"==typeof o&&o(\"Request to print no content\"),!1;var a=Date.now();return a-j>q&&(O=0),j=a,setTimeout(H(e,t,r,i,o,n,(function(e){window.open(e,\"_self\")})),O),O+=X,!0}function Q(e,t,o,n,i){let s;MeadCo.log(\"started MeadCo.ScriptX.Print.print.printPdfAtServer() document: \"+e+\", printerName: \"+a),s=\"\"===a?{}:JSON.parse(JSON.stringify(f[a]));const c={Document:e,Description:t.jobDescription,Settings:JSON.parse(JSON.stringify(t)),Device:s,ProtectedContentAccess:p,OnProgress:n,UserData:i};c.Settings.jobTitle=t.jobDescription;const d={jobIdentifier:Date.now(),printerName:c.Device.printerName,jobName:l};k(d);var u=I;return I=\"\",function(){return R(d.jobIdentifier),K(r,c,{fail:function(e){L(c,A.ERROR,e),MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof o&&o(\"Server error\")},queuedToFile:function(e){MeadCo.log(\"default handler on queued to file response\"),L(c,A.QUEUED),Z(r,c,e.jobIdentifier,-1,(function(e){if(null!==e){MeadCo.log(\"Will download printed file\"),L(c,A.COMPLETED);let t=MeadCo.makeApiEndPoint(v.url,r+\"/download/\"+e.jobIdentifier);u.length>0&&(t+=\"/\"+u),window.open(t,\"_self\")}\"function\"==typeof o&&o(null===e?\"Server error\":null)}))},queuedToDevice:function(e){MeadCo.log(\"print was queued to device\"),L(c,A.QUEUED),Z(r,c,e.jobIdentifier,-1,(function(e){null!==e&&L(c,A.COMPLETED),\"function\"==typeof o&&o(null===e?\"Server error\":null)}))},softError:function(e){L(c,A.ERROR,e.message),MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"printpdf call has soft error, remove job: \"+e.jobIdentifier),R(e.jobIdentifier),\"function\"==typeof o&&(MeadCo.log(\"Call fnDone\"),o(\"Server error\"))},ok:function(e){L(c,A.COMPLETED),MeadCo.log(\"printed ok, no further information\"),R(e.jobIdentifier),\"function\"==typeof o&&o(null)}})}}function W(e,t,r,o,n){if(!e||\"string\"==typeof e&&0===e.length)return MeadCo.ScriptX.Print.reportError(\"The document to print must be given.\"),\"function\"==typeof r&&r(\"Request to print no content\"),!1;const i=Date.now();return i-j>q&&(O=0),j=i,setTimeout(Q(e,t,r,o,n),O),O+=X,!0}function V(e,t,r){if(MeadCo.log(\"started MeadCo.ScriptX.Print.print.printDirectAtServer() Type: \"+e+\", printerName: \"+a),e===P.URL)MeadCo.log(\".. request print url: \"+t);else if(e!==P.STRING)return MeadCo.ScriptX.Print.reportError(\"Bad content type for direct printing\"),\"function\"==typeof r&&r(\"Bad content type for direct printing\"),!1;if(!t||\"string\"==typeof t&&0===t.length)return MeadCo.ScriptX.Print.reportError(\"Request to print no content - access denied?\"),\"function\"==typeof r&&r(\"Request to print no content\"),!1;if(\"\"===a)return MeadCo.ScriptX.Print.reportError(\"Request to print but no current printer defined.\"),\"function\"==typeof r&&r(\"Request to print but no current printer defined.\"),!1;const n={ContentType:e,Content:t,PrinterName:a,Settings:{jobTitle:\"Direct print\"},Device:f[a]};return K(o,n,{fail:function(e){MeadCo.ScriptX.Print.reportError(e),\"function\"==typeof r&&r(\"Server error\")},softError:function(e){MeadCo.ScriptX.Print.reportError(e.message),MeadCo.log(\"print has soft error\"),R(e.jobIdentifier),\"function\"==typeof r&&(MeadCo.log(\"Call fnDone\"),r(e.message))},ok:function(e){MeadCo.log(\"printed ok, no further information\"),R(e.jobIdentifier),\"function\"==typeof r&&r(null)}})}function z(e,t,r,o){\"string\"==typeof e&&e.length>0?(MeadCo.log(\"Print server requested: \"+e+\" with license: \"+t),h=\"string\"==typeof t&&t.length>0?t:h,a=\"\",f={},g=[],b=!1,C=[],\"function\"==typeof r?v.setUrlAsync(e,r,o):v.url=e):(MeadCo.log(\"Print server retained in setServer: \"+v.url+\" may update with license: {\"+t+\"} (if provided)\"),h=\"string\"==typeof t&&t.length>0?t:h)}function G(e,t){z(e,t),te({name:\"systemdefault\",async:!1}),_(\"\",!0,(function(e){S=e}))}function J(e,t,r,o){z(e,t,(function(e){te({name:\"systemdefault\",done:r,async:!0,fail:o}),_(\"\",!0,(function(e){S=e}))}),o)}function K(e,t,r){const o={jobIdentifier:Date.now(),printerName:t.Device.printerName,jobName:c};return MeadCo.log(\"printAtServer using: \"+e),k(o),$(e+\"/print\",\"POST\",t,!0,!0,(e=>{switch(MeadCo.log(\"Success response: \"+e.status),e.printerName=t.Device.printerName,e.jobName=\"string\"==typeof t.Settings.jobTitle&&t.Settings.jobTitle.length>0?t.Settings.jobTitle:\"server job\",k(e),R(o.jobIdentifier),e.status){case M.QUEUEDTOFILE:r.queuedToFile(e);break;case M.QUEUEDTODEVICE:r.queuedToDevice(e);break;case M.SOFTERROR:case M.UNKNOWN:r.softError(e);break;case M.OK:r.ok(e)}}),(e=>{R(o.jobIdentifier),\"function\"==typeof r.fail&&r.fail(e)}))}function _(e,t,r,o){return $(e,\"GET\",null,!0,t,r,o)}function $(e,t,r,o,n,i,a){return v.call(e,t,r,o,n,i,a)}function Y(e,t,r,o,n,i){switch(MeadCo.log(\"processMonitorResponse::jobStatus: \"+t.status),t.status){case A.COMPLETED:MeadCo.log(\"clear interval: \"+r),window.clearInterval(r),R(o),i(t);break;case A.NOTSTARTED:case A.DOWNLOADED:case A.DOWNLOADING:case A.PRINTING:case A.QUEUED:case A.STARTING:case A.PAUSED:case A.PRINTPDF:L(e,t.status,t.message),U(t),n>0&&++counter*interval>n&&(window.clearInterval(r),MeadCo.ScriptX.Print.reportError(\"unknown failure while printing.\"));break;case A.ERROR:case A.ABANDONED:MeadCo.log(\"error status in monitorJob so clear interval: \"+r),L(e,t.status,t.message),R(o),window.clearInterval(r),MeadCo.ScriptX.Print.reportError(\"The print failed with the error: \"+t.message),i(null);break;default:L(e,t.status,t.message),MeadCo.log(\"unknown status in monitorJob so clear interval: \"+r),R(o),window.clearInterval(r),i(null)}}function Z(e,t,r,o,n){MeadCo.log(\"monitorJob: \"+r);const i=1e3;let a=!1,s=window.setInterval((function(){a?MeadCo.log(\"** info : still waiting for last status request to complete\"):(a=!0,_(e+\"/status/\"+r,!0,(e=>{Y(t,e,s,r,o,n),a=!1}),(e=>{MeadCo.log(\"error: \"+e+\" in monitorJob so clear interval: \"+s),L(t,A.ERROR,e),R(r),window.clearInterval(s),n(null),a=!1})))}),i);MeadCo.log(\"intervalId: \"+s)}function ee(e){if(\"string\"==typeof e.printerName){if(e.isDefault)for(var t=0;t<f.length;t++)f[t].isDefault=!1;f[e.printerName]=e,e.isDefault&&0===a.length&&(a=e.printerName)}}function te(e){e.name=e.name.replace(/\\\\/g,\"||\"),MeadCo.log(\"Request get device info: \"+e.name),_(t+\"/deviceinfo/\"+encodeURIComponent(e.name)+\"/0\",e.async,(function(t){b=!0,ee(t),\"function\"==typeof e.done&&e.done(t)}),(function(t){\"systemdefault\"===e.name?(MeadCo.warn(\"request for systemdefault printer failed - please update to ScriptX.Services 2.11.1\"),e.name=\"default\",te(e)):(MeadCo.log(\"failed to getdevice: \"+t),\"function\"==typeof e.fail&&e.fail(t))}))}function re(e){return\"string\"==typeof e&&\"\"!==e?(void 0===f[e]&&te({name:e,async:!1,done:function(t){\"systemdefault\"===e.toLowerCase()&&(e=t.printerName)},fail:function(e){MeadCo.ScriptX.Print.reportError(e)}}),f[e]):{}}function oe(e,t,r){\"string\"==typeof e&&\"\"!==e?void 0===f[e]?te({name:e,async:!0,done:function(r){\"systemdefault\"===e.toLowerCase()&&(e=r.printerName),t(f[e])},fail:function(e){r(e)}}):t(f[e]):r(\"a printer name is required\")}function ne(e,t){console.warn(\"Synchronous calls to add/remove printer connections are not recommeneded as this will lock the browser UI. Consider using the asynchronous versions when working with in ScriptX.Services\");var r=MeadCo.ScriptX.Print.serviceDescription();r.serviceClass==F.WINDOWSPC&&r.serviceVersion.major>=2&&r.serviceVersion.minor>=19?$(i+\"/Connection/\"+encodeURIComponent(t),e,null,!0,!1):MeadCo.error(\"ScriptX.Services for Windows PC 2.19 or later is required for add/remove PrinterConnection()\")}function ie(e,t,r,o){MeadCo.ScriptX.Print.serviceDescriptionAsync((function(n){n.serviceClass==F.WINDOWSPC&&n.serviceVersion.major>=2&&n.serviceVersion.minor>=19?$(i+\"/Connection/\"+encodeURIComponent(t),e,null,!0,!0,r,o):(MeadCo.error(\"ScriptX.Services for Windows PC 2.19 or later is required for add/remove PrinterConnection()\"),o(\"add/remove PrinterConnection is not supported\"))}),o)}function ae(){if(MeadCo.log(\"MeadCo.ScriptX.Print ... looking for auto connect, already found?: \"+y),!y){var e=MeadCo.ScriptX.Print.HTML,t=MeadCo.ScriptX.Print,r=MeadCo.ScriptX.Print.Licensing;const o=document.querySelector(\"[data-meadco-subscription]\");if(o){const n=o.dataset;MeadCo.log(\"Auto connect susbcription to: \"+n.meadcoServer+\", or \"+n.meadcoPrinthtmlserver+\", with subscription: \"+n.meadcoSubscription+\", sync: \"+n.meadcoSyncinit+\", usefetch: \"+n.meadcoUsefetch);const i=\"false\"!==(\"\"+n.meadcoSyncinit).toLowerCase();if(i)MeadCo.fetchEnabled=!1;else{const e=\"\"+n.meadcoUsefetch;e.length>0&&(MeadCo.fetchEnabled=\"true\"===e.toLowerCase())}const a=n.meadcoServer;void 0===a&&(a=n.meadcoPrinthtmlserver),void 0===a?MeadCo.error(\"No server specified\"):(void 0!==r&&r.connect(a,n.meadcoSubscription),i?(MeadCo.warn(\"Synchronous connection is deprecated.jQuery is required for synchronous behaviour.To update to asynchronous behaviour please use data - meadco - syncinit='false'. Note that this may require additional code changes. Please see: https://www.meadroid.com/Developers/KnowledgeBank/HowToGuides/ScriptXServices/ThenToNow/Stage6\"),e.connect(a,n.meadcoSubscription)):(MeadCo.log(\"Async connectlite...\"),t.connectLite(a,n.meadcoSubscription)),y=!0)}else{const o=document.querySelector(\"[data-meadco-license]\");if(o)if(void 0===t||void 0===e||void 0===r)MeadCo.log(\"Not auto-connecting client license as print or printHtml or license API not present. Should be present on next attempt.\");else{const n=o.dataset;MeadCo.log(\"Auto connect client license to: \"+n.meadcoServer+\", with license: \"+n.meadcoLicense+\", path: \"+n.meadcoLicensePath+\", revision: \"+n.meadcoLicenseRevision+\", sync: \"+n.meadcoSyncinit+\", useFetch: \"+n.meadcoUsefetch+\", orchestrator: \"+n.meadcoOrchestrator+\", orchestratorKey: \"+n.meadcoOrchestratorKey+\", trustVerifiedConnection: \"+n.meadcoTrustVerifiedConnection);const i=\"false\"!==(\"\"+n.meadcoSyncinit).toLowerCase(),a=\"false\"!==(\"\"+n.meadcoReporterror).toLowerCase(),s=\"true\"==(\"\"+n.meadcoApplyLicense).toLowerCase(),l=n.meadcoServer;if(v.orchestratorPort=n.meadcoOrchestrator,v.orchestratorKey=n.meadcoOrchestratorKey,v.trustVerifiedConnection=\"false\"!==(\"\"+n.meadcoTrustVerifiedConnection).toLowerCase(),i)MeadCo.warn(\"Synchronous connection is deprecated. jQuery is required for synchronous behaviour. To update to asynchronous behaviour please use data-meadco-syncinit='false'. Note that this may require additional code changes. Please see: https://www.meadroid.com/Developers/KnowledgeBank/HowToGuides/ScriptXServices/ThenToNow/Stage6\"),MeadCo.fetchEnabled=!1,r.connect(l,n.meadcoLicense),void 0!==n.meadcoLicensePath&&void 0!==n.meadcoLicenseRevision&&(r.apply(n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath),0!=r.result&&a&&MeadCo.ScriptX.Print.reportError(r.errorMessage)),e.connect(l,n.meadcoLicense);else{MeadCo.log(\"Async connectlite...\");const e=\"\"+n.meadcoUsefetch;e.length>0&&(MeadCo.fetchEnabled=\"true\"===e.toLowerCase()),r.connectLite(l,n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath),t.connectLite(l,n.meadcoLicense),s&&r.applyAsync(n.meadcoLicense,n.meadcoLicenseRevision,n.meadcoLicensePath,(()=>{MeadCo.log(\"NOTE: license has been applied successfully from async processing of attribute with values\")}),(e=>{MeadCo.error(`Failed to apply the license: ${e}, error is: ${r.errorMessage}`),a&&MeadCo.ScriptX.Print.reportError(r.errorMessage)}))}y=!0}}}}return MeadCo.log(\"MeadCo.ScriptX.Print \"+e+\" loaded.\"),{ContentType:P,PrintStatus:A,ErrorAction:w,CollateOptions:T,DuplexOptions:x,MeasurementUnits:u,ServiceClasses:F,get onErrorAction(){return E},set onErrorAction(e){E=e},get orchestrator(){return v.orchestratorPort},set orchestrator(e){v.orchestratorPort=\"\"+e},get orchestratorKey(){return v.orchestratorKey},set orchestratorKey(e){v.orchestratorKey=e},get authorisationCookie(){return p.cookie},set authorisationCookie(e){p.cookie=e},get printerName(){return a},set printerName(e){e!==a&&e.name!==a&&(\"string\"==typeof e?void 0===f[e]?m.jQuery&&!MeadCo.fetchEnabled?te({name:e,done:function(e){a=e.printerName},async:!1,fail:function(e){MeadCo.ScriptX.Print.reportError(e)}}):(MeadCo.error(\"Asynchronous processing of set printerName required, synchronous calls to obtain device details will fail until this completes.\"),oe(e,(e=>{a=e.printerName}),(e=>{MeadCo.ScriptX.Print.reportError(e)})),\"\"===v.serviceUrl?MeadCo.ScriptX.Print.reportError(\"MeadCo.ScriptX.Print : server connection is not defined.\"):MeadCo.ScriptX.Print.reportError(\"Not Found\")):a=e:te(e))},setSystemDefaultPrinterAsync:function(e,r,o){if(void 0!==f.systemdefault&&f.systemdefault==e)return MeadCo.log(\"setSystemDefaultPrinterAsync() does NOT need to do anything\"),void r();e=(e=\"system::\"+e).replace(/\\\\/g,\"||\"),MeadCo.log(\"Request systemDefaultPrinterAsync: \"+e),$(t+\"/CurrentPrinter/\"+encodeURIComponent(e),\"PUT\",null,!0,!0,r,o)},get version(){return e},get serviceUrl(){return v.url},serviceVersion:function(){return this.serviceDescription().serviceVersion},serviceVersionAsync:function(e,t){this.serviceDescriptionAsync((function(t){e(t.serviceVersion)}),t)},get deviceSettings(){return\"\"!==a?f[a]:{}},set deviceSettings(e){ee(e)},deviceSettingsFor:function(e){return re(e)},deviceSettingsForAsync:function(e,t,r){oe(e,t,r)},useAttributes:function(){ae()},connect:function(e,t){G(e,t)},connectLite:function(e,t){z(e,t)},connectAsync:function(e,t,r,o){J(e,t,r,o)},connectTestAsync:function(e,t,r){v.verifyUrl(e,!0,t,r)},serviceDescription:function(){return S||_(\"\",!1,(function(e){S=e}),(function(e){MeadCo.ScriptX.Print.reportError(e.message)})),S},serviceDescriptionAsync:function(e,t){S?e(S):_(\"\",!0,(function(t){S=t,e(t)}),t)},connectDeviceAndPrinters:function(e,t){b=!0,ee(e),C=t},get isConnected(){return b},get availablePrinterNames(){return C},addPrinterConnection:function(e){ne(\"PUT\",e)},removePrinterConnection:function(e){ne(\"DELETE\",e)},addPrinterConnectionAsync:function(e,t,r){ie(\"PUT\",e,t,r)},removePrinterConnectionAsync:function(e,t,r){ie(\"DELETE\",e,t,r)},getFromServer:function(e,r,o,n){_(t+e,r,o,n)},printHtml:B,requestHtmlPreview:function(e,t,r,o,n){var i=a;a=s,H(e,t,r,{},o,(function(){}),n)(),a=i},printPdf:W,printDirect:V,parseAjaxError:function(e,t,r,o){return MeadCo.parseAjaxError(e,t,r,o)},parseFetchError:function(e,t){return MeadCo.parseFetchError(e,t)},reportError:function(e){switch(MeadCo.error(\"ReportError: \"+e),E){case w.REPORT:MeadCo.ScriptX.Print.reportServerError(e);break;case w.THROW:throw new Error(e)}},reportServerError:function(e){alert(\"There was an error in the printing service\\n\\n\"+e)},reportFeatureNotImplemented:function(e){MeadCo.log(\"Call to not implemented: \"+e),alert(e+\"\\n\\nis not available.\")},get queue(){return g},get activeJobs(){return this.queue.filter((e=>e.jobName!==l&&e.jobName!==c&&e.jobName!==d)).length},get clientSideJobs(){return this.queue.filter((e=>e.jobName==l||e.jobName==c||e.jobName==d)).length},get noJobsWaitingDelivery(){return this.queue.every((e=>e.jobName!==l&&e.jobName!==c&&e.jobName!==d))},ensureSpoolingStatus:function(){var e={jobIdentifier:Date.now(),printerName:\"ensureJobsPrinter\",jobName:d};return k(e),e},freeSpoolStatus:function(e){R(e.jobIdentifier)},get isSpooling(){return N()>0},waitForSpoolingComplete:function(e,t){if(MeadCo.log(\"Started WaitForSpoolingComplete(\"+e+\")\"),\"function\"!=typeof t)throw\"WaitForSpoolingComplete requires a completion callback\";var r=Date.now(),o=250,n=window.setInterval((function(){0===N()?(MeadCo.log(\"WaitForSpoolingComplete - complete\"),window.clearInterval(n),t(!0)):e>=0&&Date.now()-r>e&&(MeadCo.log(\"WaitForSpoolingComplete - timeout\"),window.clearInterval(n),t(0===N()))}),o)},waitForDeliveryComplete:function(e,t){if(MeadCo.log(\"Started waitForDeliveryComplete(\"+e+\")\"),\"function\"!=typeof t)throw\"waitForDeliveryComplete requires a completion callback\";const r=Date.now(),o=250,n=this,i=window.setInterval((()=>{n.noJobsWaitingDelivery?(MeadCo.log(\"waitForDeliveryComplete - complete\"),window.clearInterval(i),t(!0)):e>=0&&Date.now()-r>e&&(MeadCo.log(\"waitForDeliveryComplete - timeout\"),window.clearInterval(i),t(!1))}),o)},waitForDeliveryCompleteAsync:function(){const e=this;return new Promise((function(t,r){e.waitForDeliveryComplete(-1,t)}))},get queueTimeoutSpacing(){return X},set queueTimeoutSpacing(e){X=e},get queueGapResetTime(){return q},set queueGapResetTime(e){q=e},get jobFileName(){return I},set jobFileName(e){I=e},requestService:function(e,t,r,o,n,i,a){return $(e,t,r,o,n,i,a)},getService:function(e,t,r){return $(e,\"GET\",t,r,!1)},postService:function(e,t,r){return $(e,\"POST\",t,r,!1)},getServiceAsync:function(e,t,r,o,n){return $(e,\"GET\",t,r,!0,o,n)},postServiceAsync:function(e,t,r,o,n){return $(e,\"POST\",t,r,!0,o,n)}}})),extendMeadCoNamespace(\"MeadCo.ScriptX.Print.HTML\",(function(){var e,t,r=\"1.15.2.0\",o={DEFAULT:0,INCHES:1,MM:2},n={DEFAULT:0,LANDSCAPE:1,PORTRAIT:2},i={DEFAULT:0,ALL:1,ODD:2,EVEN:3},a={DEFAULT:0,TRUE:1,FALSE:2},s={header:null,footer:null,headerFooterFont:null,viewScale:0,locale:navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language,timezoneOffset:0,shortDateFormat:\"\",longDateFormat:\"\",printBackgroundColorsAndImages:!1,page:{orientation:n.PORTRAIT,units:MeadCo.ScriptX.Print.MeasurementUnits.DEFAULT,margins:{left:\"\",top:\"\",bottom:\"\",right:\"\"}},extraHeadersAndFooters:{},pageRange:\"\",printingPass:i.ALL,jobTitle:\"\",documentUrl:document.URL},l={set header(e){MeadCo.log(\"MeadCo.ScriptX.Print.HTML setting header: \"+e),e&&0===e.length&&(e=\"%20\"),s.header=e},get header(){return s.header&&\"%20\"!==s.header?s.header:\"\"},set footer(e){e&&0===e.length&&(e=\"%20\"),s.footer=e},get footer(){return s.footer&&\"%20\"!==s.footer?s.footer:\"\"},set headerFooterFont(e){e&&0===e.length&&(e=\"%20\"),s.headerFooterFont=e},get headerFooterFont(){return s.headerFooterFont&&\"%20\"!==s.headerFooterFont?s.headerFooterFont:\"\"},get locale(){return s.locale},set viewScale(e){s.viewScale=e},get viewScale(){return s.viewScale},set locale(e){s.locale=e},set shortDateFormat(e){s.shortDateFormat=e},set longDateFormat(e){s.longDateFormat=e},set printBackgroundColorsAndImages(e){s.printBackgroundColorsAndImages=e?a.TRUE:a.FALSE},get printBackgroundColorsAndImages(){return s.printBackgroundColorsAndImages===a.TRUE},extraHeadersAndFooters:{get allPagesHeader(){return s.extraHeadersAndFooters.allPagesHeader},set allPagesHeader(e){s.extraHeadersAndFooters.allPagesHeader=e},get allPagesFooter(){return s.extraHeadersAndFooters.allPagesFooter},set allPagesFooter(e){s.extraHeadersAndFooters.allPagesFooter=e},get firstPageHeader(){return s.extraHeadersAndFooters.firstPageHeader},set firstPageHeader(e){s.extraHeadersAndFooters.firstPageHeader=e},get firstPageFooter(){return s.extraHeadersAndFooters.firstPageFooter},set firstPageFooter(e){s.extraHeadersAndFooters.firstPageFooter=e},get extraFirstPageFooter(){return s.extraHeadersAndFooters.extraFirstPageFooter},set extraFirstPageFooter(e){s.extraHeadersAndFooters.extraFirstPageFooter=e},get allHeaderHeight(){return s.extraHeadersAndFooters.allHeaderHeight},set allHeaderHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";s.extraHeadersAndFooters.allHeaderHeight=e},get allFooterHeight(){return s.extraHeadersAndFooters.allFooterHeight},set allFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";s.extraHeadersAndFooters.allFooterHeight=e},get firstHeaderHeight(){return s.extraHeadersAndFooters.firstHeaderHeight},set firstHeaderHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";s.extraHeadersAndFooters.firstHeaderHeight=e},get firstFooterHeight(){return s.extraHeadersAndFooters.firstFooterHeight},set firstFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";s.extraHeadersAndFooters.firstFooterHeight=e},get extraFirstFooterHeight(){return s.extraHeadersAndFooters.extraFirstFooterHeight},set extraFirstFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";s.extraHeadersAndFooters.extraFirstFooterHeight=e}},page:{set orientation(e){s.page.orientation=e},get orientation(){return s.page.orientation},set units(e){s.page.units=e},get units(){return s.page.units},margins:{set left(e){s.page.margins.left=e},get left(){return s.page.margins.left},set top(e){s.page.margins.top=e},get top(){return s.page.margins.top},set bottom(e){s.page.margins.bottom=e},get bottom(){return s.page.margins.bottom},set right(e){s.page.margins.right=e},get right(){return s.page.margins.right}}},get pageRange(){return s.pageRange},set pageRange(e){s.pageRange=e},get printingPass(){return s.printingPass},set printingPass(e){if(!(\"number\"==typeof e&&e>=i.DEFAULT&&e<=i.EVEN))throw\"Invalid argument\";s.printingPass=e}};function c(e){return null!==e?((s=e).locale=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language,s.timezoneOffset=(new Date).getTimezoneOffset(),s.documentUrl=document.URL,MeadCo.log(\"Settings cache updated, .locale: [\"+s.locale+\"], .offset: \"+s.timezoneOffset),!0):(MeadCo.warn(\"Igoring attempt to updateSettingsWithServerDefaults with null\"),!1)}function d(){var e=window.location.port?\":\"+window.location.port:\"\";return window.location.protocol+\"//\"+window.location.hostname+e+window.location.pathname}function u(e){jQuery(\":checked\",e).each((function(){this.setAttribute(\"checked\",\"checked\")}));for(var t=\"text search number email datetime datetime-local date month week time tel url color range\".split(\" \"),r=t.length,o=0;o<r;o++)jQuery(\"input[type=\"+t[o]+\"]\",e).each((function(){this.setAttribute(\"value\",jQuery(this).val())}));jQuery(\"select\",e).each((function(){var e=jQuery(this);jQuery(\"option\",e).each((function(){e.val()===jQuery(this).val()&&this.setAttribute(\"selected\",\"selected\")}))})),jQuery(\"textarea\",e).each((function(){this.innerHTML=jQuery(this).val()}))}function p(e){e.querySelectorAll(\":checked\").forEach((e=>{e.setAttribute(\"checked\",\"checked\")})),\"text search number email datetime datetime-local date month week time tel url color range\".split(\" \").forEach((t=>{e.querySelectorAll(\"input[type=\"+t+\"]\").forEach((e=>{e.setAttribute(\"value\",e.value)}))})),e.querySelectorAll(\"select\").forEach((e=>{e.querySelectorAll(\"option\").forEach((t=>{t.removeAttribute(\"checked\"),e.value===t.value?t.setAttribute(\"selected\",\"selected\"):t.removeAttribute(\"selected\")}))})),e.querySelectorAll(\"textarea\").forEach((e=>{e.innerHTML=e.value}))}function f(e){u(e);var t=e.clone();if(jQuery(\"script\",t).remove(),jQuery(\"object\",t).remove(),!jQuery(\"head>base\",t).length){MeadCo.log(\"No base element, fabricating one to: \"+d());var r=jQuery(\"<base>\",{href:d()});jQuery(\"head\",t).prepend(r)}return t.html()}function m(e){p(e.documentElement);let t=e.documentElement.cloneNode(!0);if(t.querySelectorAll(\"object\").forEach((e=>e.remove())),t.querySelectorAll(\"script\").forEach((e=>e.remove())),null===t.querySelector(\"head>base\")){let e=document.createElement(\"base\");e.setAttribute(\"href\",d()),t.querySelector(\"head\").prepend(e)}return t.outerHTML}function g(){return this.jQuery&&!MeadCo.fetchEnabled?f(jQuery(\"html\")):m(document)}function v(e){if(this.jQuery&&!MeadCo.fetchEnabled){var t=jQuery(\"#\"+e);if(!t.length&&!(t=jQuery(\"iframe[name=\"+e+\"]\")).length)throw new Error(\"Unable to get frame content - frame does not exist\");return f(t.contents().find(\"html\"))}{let t=document.getElementById(e);if(null==t){if(t=window.frames[e],!t)throw new Error(\"Unable to get frame content - frame does not exist\")}else t=t.contentWindow;return m(t.document)}}function h(e,t,r,o,n,i){var a=s;return a.jobTitle=r,MeadCo.ScriptX.Print.printHtml(e,t,a,o,n,i)}function b(r,o){MeadCo.ScriptX.Print.deviceSettingsForAsync(\"systemdefault\",(n=>{t=n.printerName,e=MeadCo.ScriptX.Print.printerName,MeadCo.log(\"Starting preview html ... printer: \"+e);var i=document.getElementById(\"scriptXServices-PreviewWaitScreen\");if(null==i){(i=document.createElement(\"DIV\")).innerHTML=\"&shy;<style>.loader { background-color: rgba(0, 0, 0, 0.25); overflow: hidden; width: 100%; height: 100%; position: fixed;top: 0; left: 0; display: flex;  align-items:center; align-content:center; justify-content: center; z-index: 10000; } .loader__element { border-radius: 100%; border: 5px solid #555; margin: 10px} .loader__element:nth-child(1) { animation: preloader .6s ease-in-out alternate infinite; } .loader__element:nth-child(2) { animation: preloader .6s ease-in-out alternate .2s infinite; } .loader__element:nth-child(3) { animation: preloader .6s ease-in-out alternate .4s infinite; } @keyframes preloader { 100% { transform: scale(2); } }</style>\",document.body.appendChild(i.childNodes[1]),(i=document.createElement(\"DIV\")).setAttribute(\"id\",\"scriptXServices-PreviewWaitScreen\"),i.className=\"loader\";for(var a=0;a<3;a++){var l=document.createElement(\"SPAN\");l.className=\"loader__element\",i.appendChild(l)}document.body.appendChild(i)}else i.style.display=\"flex\";MeadCo.ScriptX.Print.requestHtmlPreview(r,o,s,(function(e){MeadCo.log(\"Preview procesing completed: \",e),i.style.display=\"none\"}),(function(r,o){var n=MeadCo.makeServiceEndPoint(MeadCo.ScriptX.Print.serviceUrl,\"v1/Preview/\"+o+\"/\"+encodeURIComponent(document.URL));MeadCo.log(\"Preview is available: \"+n+\", ... printer: \"+e);var i=document.getElementById(\"scriptXServices-PreviewFrame\");null==i&&((i=document.createElement(\"IFRAME\")).setAttribute(\"id\",\"scriptXServices-PreviewFrame\"),i.style.width=0,i.style.height=0,i.style.display=\"none\",i.style.visibility=\"hidden\",document.body.appendChild(i),window.addEventListener(\"message\",(function(r){MeadCo.log(\"message from: \"+r+\", ... printer: \"+e),\"preview-wired\"===r.data&&(MeadCo.log(\"preview is wired ... printer: \"+e),MeadCo.ScriptX.Print.setSystemDefaultPrinterAsync(e,(function(){MeadCo.log(\"system default printer set, request print preview\"),i.contentWindow.postMessage(\"preview\",MeadCo.ScriptX.Print.serviceUrl),window.setTimeout((function(){MeadCo.ScriptX.Print.setSystemDefaultPrinterAsync(t,(function(){}),(function(e){MeadCo.error(\"Preview failed to restore current printer after preview: \"+e),MeadCo.ScriptX.Print.reportError(e)}))}),500)}),(function(e){MeadCo.error(\"Preview failed to set current printer for preview: \"+e),MeadCo.ScriptX.Print.reportError(e)})))}))),i.setAttribute(\"src\",n)}))}),(e=>{MeadCo.error(e)}))}return MeadCo.log(\"MeadCo.ScriptX.Print.HTML \"+r+\" loaded.\"),{PageMarginUnits:o,PageOrientation:n,PrintingPasses:i,settings:l,get documentContentToPrint(){return g()},frameContentToPrint:function(e){return v(e)},printDocument:function(e,t,r){return h(MeadCo.ScriptX.Print.ContentType.INNERHTML,g(),document.title,e,t,r)},printFrame:function(e,t,r,o){return h(MeadCo.ScriptX.Print.ContentType.INNERHTML,v(e),document.title,t,r,o)},previewDocument:function(){b(MeadCo.ScriptX.Print.ContentType.INNERHTML,g())},previewFrame:function(e){b(MeadCo.ScriptX.Print.ContentType.INNERHTML,v(e))},printFromUrl:function(e,t,r,o){return h(MeadCo.ScriptX.Print.ContentType.URL,e,e,t,r,o)},printHtml:function(e,t,r,o){return h(MeadCo.ScriptX.Print.ContentType.HTML,e,\"HTML snippet\",t,r,o)},connectLite:function(e,t){MeadCo.ScriptX.Print.connectLite(e,t)},connect:function(e,t,r){MeadCo.warn(\"Print.HTML SYNC connection request\"),MeadCo.ScriptX.Print.connectLite(e,t),MeadCo.ScriptX.Print.getFromServer(\"/htmlPrintDefaults/?units=\"+s.page.units,!1,(function(e){MeadCo.log(\"got default html settings\"),c(e.settings),null!==e.device&&MeadCo.ScriptX.Print.connectDeviceAndPrinters(e.device,e.availablePrinters)}),r)},connectAsync:function(e,t,r,o){MeadCo.log(\"Print.HTML ASYNC connection request\"),MeadCo.ScriptX.Print.connectLite(e,t),MeadCo.ScriptX.Print.getFromServer(\"/htmlPrintDefaults/?units=\"+s.page.units,!0,(function(e){MeadCo.log(\"got default html settings\"),c(e.settings)?(null!==e.device&&MeadCo.ScriptX.Print.connectDeviceAndPrinters(e.device,e.availablePrinters),r(2)):o(\"Server did not respond with valid settings\")}),o)},get version(){return r}}})),extendMeadCoNamespace(\"MeadCo.ScriptX.Print.PDF\",(function(){var e=\"1.15.2.0\",t={DEFAULT:0,LANDSCAPE:1,PORTRAIT:2},r={DEFAULT:0,TRUE:1,FALSE:2},o={UNDEFINED:-1,NONE:0,FITTOPAPER:1,SHRINKLARGEPAGES:2},n={NORMAL:0,HIGH:1,LOSSLESS:2},i={jobDescription:\"\",pageRange:\"\",pageScaling:o.UNDEFINED,autoRotateCenter:r.DEFAULT,orientation:t.DEFAULT,monochrome:r.DEFAULT,normalise:r.DEFAULT,printQuality:n.NORMAL};function a(e,t,r,o){return MeadCo.ScriptX.Print.printPdf(e,i,t,r,o)}return MeadCo.log(\"MeadCo.ScriptX.Print.PDF \"+e+\" loaded.\"),{PageOrientation:t,BooleanOption:r,PdfPageScaling:o,PdfPrintQuality:n,settings:i,resetSettings:function(){i.jobDescription=\"\",i.pageRange=\"\",i.pageScaling=o.UNDEFINED,i.autoRotateCenter=r.DEFAULT,i.orientation=t.DEFAULT,i.monochrome=r.DEFAULT,i.normalise=r.DEFAULT,i.printQuality=n.NORMAL},print:function(e,t,r,o){return a(e,t,r,o)},connectLite:function(e,t){MeadCo.ScriptX.Print.connectLite(e,t)},connect:function(e,t){MeadCo.warn(\"Print.PDF SYNC connection request\"),MeadCo.ScriptX.Print.connectLite(e,t),MeadCo.ScriptX.Print.getFromServer(\"/htmlPrintDefaults/?units=\"+settingsCache.page.units,!1,(function(e){MeadCo.log(\"got default html settings\"),null!==e.device&&MeadCo.ScriptX.Print.connectDeviceAndPrinters(e.device,e.availablePrinters)}))},connectAsync:function(e,t,r,o){MeadCo.log(\"Print.PDF ASYNC connection request\"),MeadCo.ScriptX.Print.connectLite(e,t),MeadCo.ScriptX.Print.getFromServer(\"/htmlPrintDefaults\",!0,(function(e){MeadCo.log(\"got default html settings\"),null!==e.device?(MeadCo.ScriptX.Print.connectDeviceAndPrinters(e.device,e.availablePrinters),r()):o(\"Server did not respond with valid settings\")}),o)},get version(){return e}}})),function(e,t,r){if(this[e]!==r||null!==document.getElementById(e)){if(MeadCo.log(\"ScriptX.Services ScriptX.factory emulation believes it may not be requred.\"),this[e]!==r&&MeadCo.log(\"this[\"+e+\"] is defined\"),null!==document.getElementById(e)&&MeadCo.log(\"document.getElementById(\"+e+\") is defined\"),this[e].object!==r)return void MeadCo.log(\"this[\"+e+\"].object is defined -- not required!!!\");MeadCo.log(\"this[\"+e+\"].object is *not* defined\")}MeadCo.log(\"ScriptX.Services ScriptX.factory emulation believes it is requred.\");var o=function(){const e=\"1.15.2.2\",t=\"8.3.0.0\";let r=\"\";const o=MeadCo.ScriptX.Print,n=MeadCo;let i=this;function a(e){n.log(\"factory emulation :: \"+e)}return a(\"'factory' loaded \"+e),{log:a,GetComponentVersion:function(n,s,l,c,d){a(\"factory.object.getcomponentversion: \"+n);var u=e;switch(n.toLowerCase()){case\"scriptx.factory\":u=t;break;case\"scriptx.factory.services\":u=e;break;case\"scriptx.services\":if(\"\"===r&&void 0!==o){var p=o.onErrorAction;o.onErrorAction=o.ErrorAction.THROW;try{var f=o.serviceDescription();if(null!==f)if(\"string\"==typeof f.serviceVersion)r=f.serviceVersion;else{var m=f.serviceVersion;r=m.major+\".\"+m.minor+\".\"+m.build+\".\"+m.revision}}catch(t){r=e}o.onErrorAction=p}u=r;break;case\"meadco.secmgr\":try{u=i.secmgr.version}catch(e){u=\"0.0.0.0\"}break;case\"meadco.triprint\":try{u=MeadCo.ScriptX.Print.HTML.version}catch(e){u=\"0.0.0.0\"}}u=u.split(\".\"),s[0]=u[0],l[0]=u[1],c[0]=u[2],d[0]=u[3]},ComponentVersionString:function(e){var t=new Object,r=new Object,o=new Object,n=new Object;return i.factory.GetComponentVersion(e,t,r,o,n),t[0]+\".\"+r[0]+\".\"+o[0]+\".\"+n[0]},get ScriptXVersion(){return t},get SecurityManagerVersion(){return t},IsUniqueIDAvailable:function(e){return!1},UniqueID:function(e){return 0},ResetUniqueID:function(e){return 0},baseURL:function(e){var t=document.createElement(\"a\");return t.href=e,t.href},relativeURL:function(e){throw\"MeadCo.ScriptX.Print :: relativeUrl is not implemented.\\n\\nPlease see https://github.com/medialize/URI.js for an alternative.\"},OnDocumentComplete:function(e,t){void 0===e.contentWindow?t():e.addEventListener(\"load\",(function(e){t()}),{once:!0})},get rawPrinting(){var e=\"\",t=MeadCo.ScriptX.Print;function r(r,o){var n=!1;if(void 0!==t){var a=factory.printing.printer;factory.printing.printer=e,r===t.ContentType.URL&&(o=i.factory.baseURL(o)),n=t.printDirect(r,o),factory.printing.printer=a}return n}return{get printer(){return e},set printer(t){var r=factory.printing.printer;if(factory.printing.printer=t,factory.printing.printer!==t)throw\"Unknown printer\";factory.printing.printer=r,e=t},printString:function(e){return void 0!==t&&r(t.ContentType.STRING,e)},printDocument:function(e){return void 0!==t&&r(t.ContentType.URL,e)}}},Shutdown:function(){return null},extendFactoryNamespace:function(e,t){var r=t();a(\"MeadCo factory extending namespace: \"+e);for(var o=e.split(\".\"),n=i,s=0;s<o.length;s++){var l=o[s];s===o.length-1?void 0===n[l]?(a(\"installing implementation at: \"+l),n[l]=r):a(\"Warning - not overwriting package: \"+l):void 0===n[l]?(a(\"initialising new: \"+l),n[l]={}):a(\"using existing package: \"+l),n=n[l]}},keyPressCtrlP:function(e){e.ctrlKey&&80==e.keyCode&&!e.shiftKey&&(e.preventDefault(),a(\"ctrl-p being handled.\"),i.print())}}}();this[e]=o}(\"factory\"),\"function\"==typeof factory.extendFactoryNamespace&&factory.extendFactoryNamespace(\"factory.printing\",(function(){const e=MeadCo.ScriptX.Print.HTML,t=MeadCo.ScriptX.Print.PDF,r=e.settings,o=MeadCo.ScriptX.Print,n=[\"html://\",\"html4://\",\"html5://\"];let i=this,a=\"\";function s(e,t,r){void 0===e&&(e=!0);const n=o.ensureSpoolingStatus();let i=!1,a=null;if(e){if(MeadCo.ScriptX.Print.UI){if(MeadCo.ScriptX.Print.UI.PrinterSettings((function(e){if(e){MeadCo.log(\"promptAndPrint requesting print ...\");try{i=t(),r(i)}catch(e){a=e,MeadCo.error(e.message),r(!1)}}else r(!1);o.freeSpoolStatus(n)})),MeadCo.log(\"promptAndPrint exits ...\"),null!=a)throw a;return i}MeadCo.warn(\"prompted print requested but no UI library loaded. See: https://www.meadroid.com/Developers/KnowledgeBank/Articles/Dialogs\")}try{i=t(),r(i)}catch(e){a=e,MeadCo.error(e.message),r(!1)}finally{o.freeSpoolStatus(n)}if(null!==a)throw a;return i}function l(e){var t=n.find((function(t){return 0===e.indexOf(t)}));return\"string\"==typeof t?e.substring(t.length):\"\"}function c(t,r,o,n,a){var c=l(t);if(c.length>0){var d=\"<!doctype\";c.substr(0,d.length).toLowerCase()===d&&(c=c.substring(c.indexOf(\">\")+1))}else t=i.factory.baseURL(t);return s(r,(function(){return MeadCo.log(\"printHtmlContent requesting print ...\"),c.length>0?e.printHtml(c,null,n,a):e.printFromUrl(t,null,n,a)}),o)}function d(e,r,o,n,a){return void 0!==t?(e=i.factory.baseURL(e),s(r,(function(){return MeadCo.log(\"printPdfContent requesting print ...\"),t.print(e,null,n,a)}),o)):(MeadCo.error(\"MeadCo.ScriptX.Print.PDF is not available to ScriptX.Services factory emulation.\"),o(!1),!1)}i.factory.log(\"factory.Printing loaded.\");var u={get allPagesHeader(){return r.extraHeadersAndFooters.allPagesHeader},set allPagesHeader(e){r.extraHeadersAndFooters.allPagesHeader=e},get allPagesFooter(){return r.extraHeadersAndFooters.allPagesFooter},set allPagesFooter(e){r.extraHeadersAndFooters.allPagesFooter=e},get firstPageHeader(){return r.extraHeadersAndFooters.firstPageHeader},set firstPageHeader(e){r.extraHeadersAndFooters.firstPageHeader=e},get firstPageFooter(){return r.extraHeadersAndFooters.firstPageFooter},set firstPageFooter(e){r.extraHeadersAndFooters.firstPageFooter=e},get extraFirstPageFooter(){return r.extraHeadersAndFooters.extraFirstPageFooter},set extraFirstPageFooter(e){r.extraHeadersAndFooters.extraFirstPageFooter=e},get allHeaderHeight(){return r.extraHeadersAndFooters.allHeaderHeight},set allHeaderHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";r.extraHeadersAndFooters.allHeaderHeight=e},get allFooterHeight(){return r.extraHeadersAndFooters.allFooterHeight},set allFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";r.extraHeadersAndFooters.allFooterHeight=e},get firstHeaderHeight(){return r.extraHeadersAndFooters.firstHeaderHeight},set firstHeaderHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";r.extraHeadersAndFooters.firstHeaderHeight=e},get firstFooterHeight(){return r.extraHeadersAndFooters.firstFooterHeight},set firstFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";r.extraHeadersAndFooters.firstFooterHeight=e},get extraFirstFooterHeight(){return r.extraHeadersAndFooters.extraFirstFooterHeight},set extraFirstFooterHeight(e){if(\"number\"!=typeof e)throw\"Invalid argument\";r.extraHeadersAndFooters.extraFirstFooterHeight=e},get pageRange(){return r.pageRange},set pageRange(e){r.pageRange=e,void 0!==t&&(t.settings.pageRange=e)},get printingPass(){var t=\"\";switch(r.printingPass){case e.PrintingPasses.DEFAULT:case e.PrintingPasses.ALL:t=\"all\";break;case e.PrintingPasses.ODD:t=\"odd\";break;case e.PrintingPasses.EVEN:t=\"even\"}return t},set printingPass(t){var o=e.PrintingPasses.ALL;if(\"string\"==typeof t)switch(t.toLowerCase()){case\"odd\":o=e.PrintingPasses.ODD;break;case\"even\":o=e.PrintingPasses.EVEN;break;case\"odd&even\":case\"all\":o=e.PrintingPasses.ALL}r.printingPass=o},get pdfPrintMode(){return void 0!==t?t.settings.printQuality:0},set pdfPrintMode(e){void 0!==t&&(t.settings.printQuality=e)}};return void 0!==o?(o.useAttributes(),\"function\"==typeof i.print&&(i.factory.log(\"overwriting outerScope.print\"),i.print=function(){i.factory.log(\"window.print() called and being handled.\"),s(!0,(function(){return e.printDocument()}),(function(){}))}),null!=document.querySelector(\"[data-meadco-ctrlp='false']\")||(i.factory.log(\"using addEventListener('keydown',factory.keyPressCtrlP) for Ctrl-P\"),document.addEventListener(\"keydown\",factory.keyPressCtrlP))):MeadCo.error(\"MeadCo.ScriptX.Print is not available to ScriptX.Services factory emulation.\"),{set header(e){i.factory.log(\"set factory.printing.header: \"+e),r.header=e},get header(){return r.header},set footer(e){r.footer=e},get footer(){return r.footer},set headerFooterFont(e){r.headerFooterFont=e},get headerFooterFont(){return r.headerFooterFont},set orientation(t){switch(t.toLowerCase()){case\"landscape\":r.page.orientation=e.PageOrientation.LANDSCAPE;break;case\"portrait\":r.page.orientation=e.PageOrientation.PORTRAIT}},get orientation(){return r.page.orientation===e.PageOrientation.PORTRAIT?\"portrait\":\"landscape\"},set portrait(t){r.page.orientation=t?e.PageOrientation.PORTRAIT:e.PageOrientation.LANDSCAPE},get portrait(){return r.page.orientation===e.PageOrientation.PORTRAIT},set leftMargin(e){r.page.margins.left=e},get leftMargin(){return r.page.margins.left},set topMargin(e){r.page.margins.top=e},get topMargin(){return r.page.margins.top},set bottomMargin(e){r.page.margins.bottom=e},get bottomMargin(){return r.page.margins.bottom},set rightMargin(e){r.page.margins.right=e},get rightMargin(){return r.page.margins.right},set templateURL(e){},get templateURL(){return\"MeadCo://default\"},IsTemplateSupported:function(){return!0},PageSetup:function(e){\"function\"!=typeof e&&(MeadCo.warn(\"PageSetup API in ScriptX.Print Service is not synchronous, there is no return value.\"),e=function(e){MeadCo.log(\"PageSetupDlg: \"+e)}),MeadCo.ScriptX.Print.UI?MeadCo.ScriptX.Print.UI.PageSetup(e):(MeadCo.error(\"PageSetup dialog in ScriptX.Services needs a dialog implementation. See: https://www.meadroid.com/Developers/KnowledgeBank/Articles/Dialogs\"),e(!1))},PrintSetup:function(e){\"function\"!=typeof e&&(MeadCo.warn(\"PrintSetup API in ScriptX.Print Service is not synchronous, there is no return value.\"),e=function(e){MeadCo.log(\"PrintSetupDlg: \"+e)}),MeadCo.ScriptX.Print.UI?MeadCo.ScriptX.Print.UI.PrinterSettings(e):(MeadCo.error(\"PrintSettings dialog in ScriptX.Services needs a dialog implementation. See: https://www.meadroid.com/Developers/KnowledgeBank/Articles/Dialogs\"),e(!1))},Preview:function(t){if(t&&(\"object\"!=typeof t||t.id)||(t=null),null!==t){var r=\"string\"==typeof t?t:t.id;return e.previewFrame(r)}e.previewDocument()},Print:function(t,r,o){return o||(o=function(e){MeadCo.log(\"A print has started: \"+e)}),r&&(\"object\"!=typeof r||r.id)||(r=null),s(t,(function(){if(null!==r){var t=\"string\"==typeof r?r:r.id;return e.printFrame(t)}return e.printDocument()}),o)},PrintHTML:function(e,t,r){return void 0===r&&(r=function(e){}),c(e,t,r)},PrintHTMLEx:function(e,t,r,o,n){return void 0===n&&(n=function(e){}),c(e,t,n,r,o)},PrintPDF:function(e,r,o,n,i,a){return void 0===a&&(a=function(e){}),void 0!==t?(t.resetSettings(),void 0!==e.pagescaling?t.settings.pageScaling=e.pagescaling:t.settings.pageScaling=o?t.PdfPageScaling.SHRINKLARGEPAGES:t.PdfPageScaling.UNDEFINED,void 0!==e.autorotatecenter?t.settings.autoRotateCenter=e.autorotatecenter?t.BooleanOption.TRUE:t.BooleanOption.FALSE:t.settings.autoRotateCenter=t.BooleanOption.DEFAULT,void 0!==e.orientation?t.settings.orientation=1===e.orientation?t.PageOrientation.PORTRAIT:t.PageOrientation.LANDSCAPE:t.settings.orientation=this.portrait?t.PageOrientation.PORTRAIT:t.PageOrientation.LANDSCAPE,void 0!==e.pages?t.settings.pageRange=e.pages:t.settings.pageRange=void 0!==n&&void 0!==i&&-1!==n&&-1!==i?n+\"-\"+i:\"\",void 0!==e.monochrome?t.settings.monochrome=e.monochrome?t.BooleanOption.TRUE:t.BooleanOption.FALSE:t.settings.monochrome=t.BooleanOption.DEFAULT,void 0!==e.normalise||void 0!==e.normalize?t.settings.normalise=e.normalise||e.normalize?t.BooleanOption.TRUE:t.BooleanOption.FALSE:t.settings.normalise=t.BooleanOption.DEFAULT,void 0!==e.printMode?t.settings.printQuality=e.printMode:void 0!==e.printQuality&&(t.settings.printQuality=e.printQuality),void 0!==e.jobname&&(t.settings.jobDescription=e.jobname),void 0!==e.jobName&&(t.settings.jobDescription=e.jobName),d(e.url,r,a)):(MeadCo.error(\"MeadCo.ScriptX.Print.PDF is not available to ScriptX.Services factory emulation.\"),a(!1),!1)},BatchPrintPDF:function(e,t){this.BatchPrintPDFEx(e,(function(){}),\"BatchPrintPDF\",t)},BatchPrintPDFEx:function(e,o,n,i){if(void 0===i&&(i=function(e){}),void 0!==t)return t.resetSettings(),t.settings.pageRange=u.pageRange,t.settings.pageScaling=-1===r.viewScale?t.PdfPageScaling.SHRINKLARGEPAGES:t.PdfPageScaling.UNDEFINED,t.settings.orientation=this.portrait?t.PageOrientation.PORTRAIT:t.PageOrientation.LANDSCAPE,t.settings.printQuality=u.pdfPrintMode,void d(e,!1,i,o,n);MeadCo.error(\"MeadCo.ScriptX.Print.PDF is not available to ScriptX.Services factory emulation.\"),i(!1)},set units(e){this.SetMarginMeasure(e)},get units(){return this.GetMarginMeasure()},set paperSize(e){o.deviceSettings.paperSizeName=e},get paperSize(){return o.deviceSettings.paperSizeName},set paperSource(e){o.deviceSettings.paperSourceName=e},get paperSource(){return o.deviceSettings.paperSourceName},set paperSource2(e){o.deviceSettings.paperSourceName=e},get paperSource2(){return o.deviceSettings.paperSourceName},get pageWidth(){return o.deviceSettings.paperPageSize.width},get pageHeight(){return o.deviceSettings.paperPageSize.height},set copies(e){o.deviceSettings.copies=e},get copies(){return o.deviceSettings.copies},set collate(e){o.deviceSettings.collate=!0===e||1===e?o.CollateOptions.TRUE:o.CollateOptions.FALSE},get collate(){return o.deviceSettings.collate===o.CollateOptions.TRUE},set duplex(e){o.deviceSettings.duplex=e},get duplex(){return o.deviceSettings.duplex},set duplex2(e){o.deviceSettings.duplex=e},get duplex2(){return o.deviceSettings.duplex},set onafterprint(e){o.reportFeatureNotImplemented(\"onafterprint\",e)},set onbeforeprint(e){o.reportFeatureNotImplemented(\"onbeforeprint\",e)},set onbeforeunload(e){a=e,window.addEventListener(\"beforeunload\",(async t=>{MeadCo.log(\"beforeunload handler running\"),MeadCo.ScriptX.Print.noJobsWaitingDelivery?MeadCo.log(\"no jobs are waiting client side\"):(MeadCo.log(\"jobs are waiting client side, will prompt user (custom text is not supported by modern browsers)\"),t.returnValue=e,t.preventDefault())}))},get onbeforeunload(){return a},set onpagesetup(e){o.reportFeatureNotImplemented(\"onpagesetup\",e)},set onuserpagesetup(e){o.reportFeatureNotImplemented(\"onuserpagesetup\",e)},set onuserprint(e){o.reportFeatureNotImplemented(\"onuserprint\",e)},set onuserprintpreview(e){o.reportFeatureNotImplemented(\"onuserprintpreview\",e)},DefaultPrinter:function(){return o.deviceSettingsFor(\"systemdefault\").printerName},AddPrinterConnection:function(e){o.addPrinterConnection(e)},RemovePrinterConnection:function(e){o.removePrinterConnection(e)},AddPrinterConnectionAsync:function(e,t){o.addPrinterConnectionAsync(e,t,(function(e){o.reportError(e)}))},RemovePrinterConnectionAsync:function(e,t){o.removePrinterConnectionAsync(e,t,(function(e){o.reportError(e)}))},get CurrentPrinter(){return o.printerName},set CurrentPrinter(e){this.currentPrinter=e},get currentPrinter(){return o.printerName},set currentPrinter(e){if(\"string\"==typeof e){var t=o.onErrorAction;o.onErrorAction=o.ErrorAction.THROW;try{o.printerName=e,o.onErrorAction=t}catch(e){throw o.onErrorAction=t,e}}},get printer(){return o.printerName},set printer(e){if(\"string\"==typeof e){var t=o.onErrorAction;o.onErrorAction=o.ErrorAction.THROW;try{o.printerName=e,o.onErrorAction=t}catch(e){o.onErrorAction=t}}},set printToFileName(e){o.deviceSettings.printToFileName=e},get printBackground(){return r.printBackgroundColorsAndImages},set printBackground(e){r.printBackgroundColorsAndImages=e},get viewScale(){return r.viewScale},set viewScale(e){r.viewScale=e},set unprintableLeft(e){o.deviceSettings.unprintableMargins.left=e},get unprintableLeft(){return o.deviceSettings.unprintableMargins.left},set unprintableRight(e){o.deviceSettings.unprintableMargins.right=e},get unprintableRight(){return o.deviceSettings.unprintableMargins.right},set unprintableTop(e){o.deviceSettings.unprintableMargins.top=e},get unprintableTop(){return o.deviceSettings.unprintableMargins.top},set unprintableBottom(e){o.deviceSettings.unprintableMargins.bottom=e},get unprintableBottom(){return o.deviceSettings.unprintableMargins.bottom},EnumPrinters:function(e){var t=o.availablePrinterNames;if(t&&0!==t.length){if(e<t.length)return t[e]}else if(0===e)return this.CurrentPrinter;return\"\"},EnumJobs:function(e,t,r){var n,i=o.queue,a=new Array;for(e=e.toLowerCase(),n=0;n<i.length;n++)i[n].printerName.toLowerCase()===e&&a.push(i[n]);return t<a.length?(r.name=a[t].jobName,a[t].status):0},GetJobsCount:function(e){var t,r=o.queue,n=0;for(e=e.toLowerCase(),t=0;t<r.length;t++)r[t].printerName.toLowerCase()===e&&n++;return n},printerControl:function(e){return{get Forms(){return o.deviceSettingsFor(e).forms},get Bins(){return o.deviceSettingsFor(e).bins},get forms(){return o.deviceSettingsFor(e).forms},get bins(){return o.deviceSettingsFor(e).bins},get name(){return e},get status(){return o.deviceSettingsFor(e).port},get port(){return o.deviceSettingsFor(e).port},get attributes(){return o.deviceSettingsFor(e).attributes},get serverName(){return o.deviceSettingsFor(e).serverName},get shareName(){return o.deviceSettingsFor(e).shareName},get location(){return o.deviceSettingsFor(e).location},get isLocal(){return o.deviceSettingsFor(e).isLocal},get isNetwork(){return o.deviceSettingsFor(e).isNetwork},get isShared(){return o.deviceSettingsFor(e).isShared},get Jobs(){o.reportFeatureNotImplemented(\"printerControl.Jobs\")},Purge:function(){o.reportFeatureNotImplemented(\"printerControl.Purge()\")},Pause:function(){o.reportFeatureNotImplemented(\"printerControl.Pause()\")},Resume:function(){o.reportFeatureNotImplemented(\"printerControl.Resume()\")}}},GetMarginMeasure:function(){return r.page.units===o.MeasurementUnits.INCHES?2:1},SetMarginMeasure:function(e){r.page.units=2===e?o.MeasurementUnits.INCHES:o.MeasurementUnits.MM},SetPrintScale:function(e){r.viewScale=e},IsSpooling:function(){return o.isSpooling},OwnQueue:function(){return null},SetPageRange:function(e,t,n){e&&o.reportFeatureNotImplemented(\"SetPageRange selection only\"),r.pageRange=t+\"-\"+n},SetPreviewZoom:function(){o.reportFeatureNotImplemented(\"SetPreviewZoom\")},Sleep:function(){o.reportFeatureNotImplemented(\"Sleep\")},TotalPrintPages:function(){o.reportFeatureNotImplemented(\"TotalPrintPages\")},WaitForSpoolingComplete:function(e,t){o.waitForSpoolingComplete(e,t)},enhancedFormatting:u,PolyfillInit:function(){return MeadCo.ScriptX.Print.isConnected||e.connect(\"\",\"\",(function(e){MeadCo.warn(\"Services server connection failed: \"+e)})),MeadCo.ScriptX.Print.isConnected},PolyfillInitAsync:function(t,r){MeadCo.ScriptX.Print.isConnected?t(2):e.connectAsync(\"\",\"\",t,r)},get PolyfillAuthorisationCookie(){return MeadCo.ScriptX.Print.authorisationCookie},set PolyfillAuthorisationCookie(e){MeadCo.ScriptX.Print.authorisationCookie=e}}})),\"function\"==typeof factory.extendFactoryNamespace&&factory.extendFactoryNamespace(\"factory.object\",(function(){var e=this;return e.factory.log(\"factory.object loaded.\"),e.factory})),\"function\"==typeof factory.extendFactoryNamespace&&factory.extendFactoryNamespace(\"factory.object.js\",(function(){return this.factory.log(\"factory.object.js loaded.\"),{FormatNumber:function(e){return isNaN(e)?0:\"string\"==typeof e?Number(e):e}}})),function(e,t,r){\"use strict\";if(e){var o=e.createNS(\"MeadCo.ScriptX.Print.UI\");o.version=\"1.15.2.0\",e.log(\"MeadCo.ScriptX.Print.UI version is: \"+o.version),o.PageSetup=function(e){if(!t.fn.modal&&!bootstrap.Modal)return console.error(\"MeadCo.ScriptX.Print.UI requires bootstrap Modal\"),void e(!1);var r=!1,o=\"\",n=(t.fn.modal.Constructor.VERSION||\"\").split(\" \")[0].split(\".\")[0];if(t.fn.selectpicker&&\"3\"===n&&(o=\"selectpicker\"),!t(\"#dlg-printoptions\").length){var i;switch(console.log(\"UI.PageSetup bootstrap modal version: \"+t.fn.modal.Constructor.VERSION+\", major: \"+n),n){case\"3\":i='<style>.modal-dialog legend { font-size: 1.2em; font-weight: bold; margin-bottom: 10px; } .modal-dialog fieldset { padding-bottom: 0px; } .modal-dialog .options-modal-body { padding-bottom: 0px !important; } .modal-dialog .checkbox2 {  padding-top: 0px !important; min-height: 0px !important; } .modal-dialog .radio2 { padding-top: 0px !important; min-height: 0px !important; } </style><div class=\"modal fade\" id=\"dlg-printoptions\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button><h4 class=\"modal-title\">Page setup</h4></div><div class=\"modal-body form-horizontal options-modal-body\"><fieldset><legend>Paper</legend><div class=\"form-group\"><label class=\"col-md-4 control-label\" for=\"fld-papersize\">Size</label><div class=\"col-md-8\"><select class=\"'+o+' form-control show-tick\" id=\"fld-papersize\"></select></div></div><div class=\"form-group\"><div class=\"col-md-offset-4 col-md-8\"><div class=\"radio2\"><label class=\"radio-inline\"><input type=\"radio\" value=\"2\" id=\"fld-portrait\" name=\"fld-orientation\"> Portrait</label><label class=\"radio-inline\"><input type=\"radio\" value=\"1\" id=\"fld-landscape\" name=\"fld-orientation\"> Landscape</label></div></div></div><div class=\"form-group\"><div class=\"col-md-offset-4 col-md-8\"><div class=\"checkbox2\"><label class=\"checkbox-inline\"><input type=\"checkbox\" name=\"fld-shrinktofit\" id=\"fld-shrinktofit\"> Shrink to fit</label></div></div></div><div class=\"form-group\"><div class=\"col-md-offset-4 col-md-8\"><div class=\"checkbox2\"><label class=\"checkbox-inline\"><input type=\"checkbox\" name=\"fld-printbackground\" id=\"fld-printbackground\"> Print background colour and images</label></div></div></div></fieldset><fieldset><legend>Margins</legend><div class=\"form-group\"><div class=\"col-md-offset-4 col-md-8\"><div class=\"radio2\"><label class=\"radio-inline\"><input type=\"radio\" value=\"2\" id=\"fld-millimetres\" name=\"fld-measure\"> Millimetres</label><label class=\"radio-inline\"><input type=\"radio\" value=\"1\" id=\"fld-inches\" name=\"fld-measure\"> Inches</label></div></div></div><div class=\"form-group\"><label class=\"control-label col-md-4\">Left</label><div class=\"col-md-3\"><input name=\"fld-marginL\" id=\"fld-marginL\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div><label class=\"control-label col-md-2\">Top</label><div class=\"col-md-3\"><input name=\"fld-marginT\" id=\"fld-marginT\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div><div class=\"form-group\"><label class=\"control-label col-md-4\">Right</label><div class=\"col-md-3\"><input name=\"fld-marginR\" id=\"fld-marginR\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div><label class=\"control-label col-md-2\">Bottom</label><div class=\"col-md-3\"><input name=\"fld-marginB\" id=\"fld-marginB\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div></fieldset><fieldset><legend>Headers and footers</legend><div class=\"form-group\"><label class=\"control-label col-md-4\">Header</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-header\" id=\"fld-header\" class=\"form-control\" style=\"max-width: none !important;\" /></div></div><div class=\"form-group\"><label class=\"control-label col-md-4\">Footer</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-footer\" id=\"fld-footer\" class=\"form-control\" style=\"max-width: none !important;\" /></div></div></fieldset></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-saveoptions\">OK</button><button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button></div></div>\\x3c!-- /.modal-content --\\x3e</div>\\x3c!-- /.modal-dialog --\\x3e</div>\\x3c!-- /.modal --\\x3e';break;case\"4\":i='<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" id=\"dlg-printoptions\"><div class=\"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg\" role = \"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h5 class=\"modal-title\">Page setup</h5><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div><div class=\"modal-body\"><div class=\"container-fluid\"><fieldset><legend>Paper</legend><div class=\"form-group row\"><label for=\"fld-papersize\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Size</label><div class=\"col-md-8\"><select class=\"'+o+' form-control col-form-label-sm custom-select custom-select-sm\" id=\"fld-papersize\"></select></div></div><div class=\"form-group row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"2\" id=\"fld-portrait\" name=\"fld-orientation\" /><label class=\"form-check-label\" for=\"fld-portrait\">Portrait</label></div><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"1\" id=\"fld-landscape\" name=\"fld-orientation\" /><label class=\"form-check-label\" for=\"fld-portrait\">Landscape</label></div></div></div><div class=\"form-group row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-shrinktofit\" id=\"fld-shrinktofit\"><label class=\"form-check-label\" for=\"fld-shrinktofit\">Shrink to fit</label></div></div></div><div class=\"form-group row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-printbackground\" id=\"fld-printbackground\"><label class=\"form-check-label\" for=\"fld-printbackground\">Print background colour and images</label></div></div></div></fieldset><fieldset><legend>Margins</legend><div class=\"form-group row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"2\" id=\"fld-millimetres\" name=\"fld-measure\" /><label class=\"form-check-label\" for=\"fld-millimetres\">Millimetres</label></div><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"1\" id=\"fld-inches\" name=\"fld-measure\" /><label class=\"form-check-label\" for=\"fld-inches\">Inches</label></div></div></div><div class=\"form-group row\"><label class=\"col-md-4 col-form-label text-right col-form-label-sm\">Left</label><div class=\"col-md-3\"><div class=\"input-group spinner\" data-trigger=\"spinner\"><input name=\"fld-marginL\" id=\"fld-marginL\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div><label class=\"col-md-2 col-form-label text-right col-form-label-sm\">Top</label><div class=\"col-md-3\"><div class=\"input-group spinner\" data-trigger=\"spinner\"><input name=\"fld-marginT\" id=\"fld-marginT\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div></div><div class=\"form-group row\"><label class=\"col-md-4 col-form-label text-right col-form-label-sm\">Right</label><div class=\"col-md-3\"><div class=\"input-group spinner\" data-trigger=\"spinner\"><input name=\"fld-marginR\" id=\"fld-marginR\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div><label class=\"col-md-2 col-form-label text-right col-form-label-sm\">Bottom</label><div class=\"col-md-3\"><div class=\"input-group spinner\" data-trigger=\"spinner\"><input name=\"fld-marginB\" id=\"fld-marginB\" type=\"text\" class=\"form-control text-right\" data-rule=\"measure\" value=\"1\" /></div></div></div></fieldset><fieldset><legend>Headers and footers</legend><div class=\"form-group row\"><label for=\"fld-header\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Header</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-header\" id=\"fld-header\" class=\"form-control form-control-sm\" /></div></div><div class=\"form-group row\"><label for=\"fld-footer\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Footer</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-footer\" id=\"fld-footer\" class=\"form-control form-control-sm\" /></div></div></fieldset></div></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-saveoptions\">OK</button><button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button></div></div></div></div>';break;case\"5\":i='<div class=\"modal\" tabindex=\"-1\" id=\"dlg-printoptions\"><div class=\"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg\" role = \"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h5 class=\"modal-title\">Page setup</h5><button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\"></span></button></div><div class=\"modal-body\"><div class=\"bs-component\"><fieldset><legend>Paper</legend><div class=\"row\"><label for=\"fld-papersize\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Size</label><div class=\"col-md-8\"><select class=\"'+o+' form-select form-select-sm\" id=\"fld-papersize\"></select></div></div><div class=\"row mt-2\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"2\" id=\"fld-portrait\" name=\"fld-orientation\" /><label class=\"form-check-label\" for=\"fld-portrait\">Portrait</label></div><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"1\" id=\"fld-landscape\" name=\"fld-orientation\" /><label class=\"form-check-label\" for=\"fld-portrait\">Landscape</label></div></div></div><div class=\"row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-shrinktofit\" id=\"fld-shrinktofit\"><label class=\"form-check-label\" for=\"fld-shrinktofit\">Shrink to fit</label></div></div></div><div class=\"row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-printbackground\" id=\"fld-printbackground\"><label class=\"form-check-label\" for=\"fld-printbackground\">Print background colour and images</label></div></div></div></fieldset><fieldset><legend>Margins</legend><div class=\"row\"><div class=\"col-md-8 offset-md-4\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"2\" id=\"fld-millimetres\" name=\"fld-measure\" /><label class=\"form-check-label\" for=\"fld-millimetres\">Millimetres</label></div><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"radio\" value=\"1\" id=\"fld-inches\" name=\"fld-measure\" /><label class=\"form-check-label\" for=\"fld-inches\">Inches</label></div></div></div><div class=\"row mt-2\"><label class=\"col-md-4 col-form-label text-right col-form-label-sm\">Left</label><div class=\"col-md-3\"><div class=\"input-group\"><input name=\"fld-marginL\" id=\"fld-marginL\" type=\"number\" min=\"0\" max=\"30\" step=\"0.1\" class=\"form-control text-right form-control-sm\" data-rule=\"measure\" value=\"1\" /></div></div><label class=\"col-md-2 col-form-label text-right col-form-label-sm\">Top</label><div class=\"col-md-3\"><div class=\"input-group\"><input name=\"fld-marginT\" id=\"fld-marginT\" type=\"number\" min=\"0\" max=\"30\" step=\"0.1\" class=\"form-control text-right form-control-sm\" data-rule=\"measure\" value=\"1\" /></div></div></div><div class=\"row mt-2\"><label class=\"col-md-4 col-form-label text-right col-form-label-sm\">Right</label><div class=\"col-md-3\"><div class=\"input-group\"><input name=\"fld-marginR\" id=\"fld-marginR\" type=\"number\" min=\"0\" max=\"30\" step=\"0.1\" class=\"form-control text-right form-control-sm\" value=\"1\" data-rule=\"measure\"/></div></div><label class=\"col-md-2 col-form-label text-right col-form-label-sm\">Bottom</label><div class=\"col-md-3\"><div class=\"input-group\"><input name=\"fld-marginB\" id=\"fld-marginB\" type=\"number\" min=\"0\" max=\"30\" step=\"0.1\" class=\"form-control text-right form-control-sm\" value=\"1\" data-rule=\"measure\"/></div></div></div></fieldset><fieldset class=\"mt-2\"><legend>Headers and footers</legend><div class=\"row\"><label for=\"fld-header\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Header</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-header\" id=\"fld-header\" class=\"form-control form-control-sm\" /></div></div><div class=\"row mt-2\"><label for=\"fld-footer\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Footer</label><div class=\"col-md-8\"><input type=\"text\" name=\"fld-footer\" id=\"fld-footer\" class=\"form-control form-control-sm\" /></div></div></fieldset></div></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-saveoptions\">OK</button><button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button></div></div></div></div>';break;default:return console.error(\"Unknown version of bootstrap: \"+n),void e(!1)}t(\"body\").append(i)}t('[name=\"fld-measure\"]').off(\"change\").on(\"change\",(function(){const e=\"5\"===n?\"number\":\"text\";switch(t(this).val()){case\"2\":t(`#dlg-printoptions input[type=${e}][data-rule=measure]`).each((function(){var e;(e=t(this)).val((2540*parseFloat(e.val())/100).toFixed(2))}));break;case\"1\":t(`#dlg-printoptions input[type=${e}][data-rule=measure]`).each((function(){var e;(e=t(this)).val((100*parseFloat(e.val())/2540).toFixed(2))}))}})),t(\"#btn-saveoptions\").off(\"click\").on(\"click\",(function(e){e.preventDefault(),function(){var e=t(\"#dlg-printoptions\"),r=MeadCo.ScriptX.Print.HTML.settings;e.length&&(r.page.orientation=e.find('[name=\"fld-orientation\"]:checked').val(),r.printBackgroundColorsAndImages=e.find(\"#fld-printbackground\").prop(\"checked\"),r.viewScale=e.find(\"#fld-shrinktofit\").prop(\"checked\")?-1:100,r.page.units=parseInt(e.find('[name=\"fld-measure\"]:checked').val()),r.page.margins.left=e.find(\"#fld-marginL\").val(),r.page.margins.top=e.find(\"#fld-marginT\").val(),r.page.margins.right=e.find(\"#fld-marginR\").val(),r.page.margins.bottom=e.find(\"#fld-marginB\").val(),r.header=e.find(\"#fld-header\").val(),r.footer=e.find(\"#fld-footer\").val(),MeadCo.ScriptX.Print.deviceSettings.paperSizeName=t(\"#fld-papersize\").val())}(),r=!0,t(\"#dlg-printoptions\").modal(\"hide\")})),t(\"#dlg-printoptions\").off(\"hidden.bs.modal\").on(\"hidden.bs.modal\",(function(){\"function\"==typeof e&&e(r)}));var a=t(\"#dlg-printoptions\"),s=MeadCo.ScriptX.Print.HTML.settings;a.find('[name=\"fld-orientation\"]').val([s.page.orientation]),a.find(\"#fld-printbackground\").prop(\"checked\",s.printBackgroundColorsAndImages),a.find(\"#fld-shrinktofit\").prop(\"checked\",-1==s.viewScale),a.find('[name=\"fld-measure\"]').val([s.page.units]),a.find(\"#fld-marginL\").val(s.page.margins.left),a.find(\"#fld-marginT\").val(s.page.margins.top),a.find(\"#fld-marginR\").val(s.page.margins.right),a.find(\"#fld-marginB\").val(s.page.margins.bottom),a.find(\"#fld-header\").val(s.header),a.find(\"#fld-footer\").val(s.footer);var l=MeadCo.ScriptX.Print,c=t(\"#fld-papersize\"),d=l.deviceSettingsFor(l.printerName).forms;for(var u in t(\"#fld-papersize > option\").remove(),d)c.append(\"<option>\"+d[u]+\"</option>\");c.hasClass(\"selectpicker\")&&c.selectpicker(\"refresh\"),c.val(MeadCo.ScriptX.Print.deviceSettings.paperSizeName),a.modal(\"show\"),c.hasClass(\"selectpicker\")&&c.selectpicker(\"refresh\")},o.PrinterSettings=function(e){if(!t.fn.modal&&!bootstrap.Modal)return console.error(\"MeadCo.ScriptX.Print.UI requires bootstrap Modal\"),void e(!1);var r=!1,o=\"\",a=(t.fn.modal.Constructor.VERSION||\"\").split(\" \")[0].split(\".\")[0];if(t.fn.selectpicker&&\"3\"===a&&(o=\"selectpicker\"),!t(\"#dlg-printersettings\").length){var s;switch(console.log(\"UI.PageSetup bootstrap modal version: \"+t.fn.modal.Constructor.VERSION),a){case\"3\":s='<style>.modal-dialog legend { font-size: 1.2em; font-weight: bold; margin-bottom: 10px; } .modal-dialog fieldset { padding-bottom: 0px; } .modal-dialog .options-modal-body { padding-bottom: 0px !important; } .modal-dialog .checkbox2 {  padding-top: 0px !important; min-height: 0px !important; } .modal-dialog .radio2 { padding-top: 0px !important; min-height: 0px !important; } </style><div class=\"modal fade\" id=\"dlg-printersettings\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button><h4 class=\"modal-title\">Print</h4></div><div class=\"modal-body form-horizontal options-modal-body\"><div class=\"form-group\"><label class=\"col-md-4 control-label\" for=\"fld-printerselect\">Printer</label><div class=\"col-md-8\"><select class=\"'+o+' form-control show-tick\" id=\"fld-printerselect\"></select></div></div><div class=\"form-group\"><label class=\"col-md-4 control-label\" for=\"fld-papersource\">Paper source</label><div class=\"col-md-8\"><select class=\"'+o+' form-control show-tick\" id=\"fld-papersource\"></select></div></div><div class=\"form-group\"><label class=\"control-label col-md-4\">Copies</label><div class=\"col-md-3\"><input name=\"fld-copies\" id=\"fld-copies\" type=\"text\" class=\"form-control text-right\" data-rule=\"quantity\" value=\"1\" /></div><div class=\"col-md-5\"><div class=\"checkbox2\"><label class=\"checkbox-inline\"><input type=\"checkbox\" name=\"fld-collate\" id=\"fld-collate\"> Collate</label></div></div></div></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-savesettings\">Print</button><button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button></div></div>\\x3c!-- /.modal-content --\\x3e</div>\\x3c!-- /.modal-dialog --\\x3e</div>\\x3c!-- /.modal --\\x3e';break;case\"4\":s='<div class=\"modal fade\" id=\"dlg-printersettings\"><div class=\"modal-dialog modal-dialog-scrollable modal-dialog-centered\" role = \"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h5 class=\"modal-title\">Print</h5><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div><div class=\"modal-body\"><div class=\"container-fluid\"><div class=\"form-group row\"><label for=\"fld-printerselect\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Printer</label><div class=\"col-md-8\"><select class=\"'+o+' form-control col-form-label-sm custom-select custom-select-sm\" id=\"fld-printerselect\"></select></div></div><div class=\"form-group row\"><label for=\"fld-papersource\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Paper source</label><div class=\"col-md-8\"><select class=\"'+o+' form-control col-form-label-sm custom-select custom-select-sm\" id=\"fld-papersource\"></select></div></div><div class=\"form-group row align-items-center\"><label for=\"fld-copies\" class=\"col-md-4 col-form-label text-right col-form-label-sm\">Copies</label><div class=\"col-md-3\"><input name=\"fld-copies\" id=\"fld-copies\" type=\"text\" class=\"form-control form-control-sm text-right\" data-rule=\"quantity\" value=\"1\" /></div><div class=\"col-md-5\"><div class=\"form-check form-check-inline\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-collate\" id=\"fld-collate\"><label class=\"form-check-label\" for=\"fld-collate\">Collate</label></div></div></div></div></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-savesettings\">Print</button><button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button></div></div></div></div >';break;case\"5\":s='<div class=\"modal\" id=\"dlg-printersettings\"><div class=\"modal-dialog role = \"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h5 class=\"modal-title\">Print</h5><button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\"></span></button></div><div class=\"modal-body\"><div class=\"bs-component\"><div class=\"row\"><label for=\"fld-printerselect\" class=\"col-md-4 form-label text-right col-form-label-sm\">Printer</label><div class=\"col-md-8\"><select class=\"'+o+' form-select form-select-sm\" id=\"fld-printerselect\"></select></div></div><div class=\"row mt-2\"><label for=\"fld-papersource\" class=\"col-md-4 form-label text-right col-form-label-sm\">Paper source</label><div class=\"col-md-8\"><select class=\"'+o+' form-select form-select-sm\" id=\"fld-papersource\"></select></div></div><div class=\"row g-3\" style=\"margin-top:-8px\"><label for=\"fld-copies\" class=\"col-md-4 form-label text-right col-form-label-sm\">Copies</label><div class=\"col-md-3\"><input name=\"fld-copies\" id=\"fld-copies\" type=\"number\" min=\"1\" max=\"5\" step=\"1\" class=\"form-control form-control-sm text-right\" data-rule=\"quantity\" value=\"1\" /></div><div class=\"col-md-5\"><div class=\"form-check\" style=\"margin-top: 4px\"><input class=\"form-check-input\" type=\"checkbox\" name=\"fld-collate\" id=\"fld-collate\"><label class=\"form-check-label\" for=\"fld-collate\">Collate</label></div></div></div></div></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-primary\" id=\"btn-savesettings\">Print</button><button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button></div></div></div></div >';break;default:return console.error(\"Unknown version of bootstrap: \"+a),void e(!1)}t(\"body\").append(s),t(\"#dlg-printersettings #fld-printerselect\").change((function(e){n(t(this).val())}))}if(t(\"#btn-savesettings\").off(\"click\").on(\"click\",(function(e){e.preventDefault(),function(){var e=t(\"#dlg-printersettings\"),r=MeadCo.ScriptX.Print;if(e.length){var o=r.onErrorAction;r.onErrorAction=r.ErrorAction.THROW;try{r.printerName=t(\"#fld-printerselect\").val(),r.onErrorAction=o}catch(e){r.onErrorAction=o}var n=r.deviceSettings;n.paperSourceName=t(\"#fld-papersource\").val(),n.collate=e.find(\"#fld-collate\").prop(\"checked\")?r.CollateOptions.TRUE:r.CollateOptions.FALSE,n.copies=e.find(\"#fld-copies\").val()}}(),r=!0,t(\"#dlg-printersettings\").modal(\"hide\")})),t(\"#dlg-printersettings\").off(\"hidden.bs.modal\").on(\"hidden.bs.modal\",(function(){\"function\"==typeof e&&e(r)})),function(){var e=MeadCo.ScriptX.Print,r=t(\"#fld-printerselect\"),o=e.availablePrinterNames;t(\"#fld-printerselect > option\").remove();for(var i=0;i<o.length;i++)r.append(\"<option>\"+o[i]);r.val(e.printerName),r.hasClass(\"selectpicker\")?r.selectpicker(\"refresh\"):n(e.printerName)}(),function(){var e=MeadCo.ScriptX.Print,r=e.deviceSettings;i();var o=t(\"#dlg-printersettings\");o.find(\"#fld-collate\").prop(\"checked\",r.collate===e.CollateOptions.TRUE),o.find(\"#fld-copies\").val(r.copies)}(),\"5\"===a){new bootstrap.Modal(document.getElementById(\"dlg-printersettings\"),{backdrop:\"static\",keyboard:!1,show:!1}).show()}else t(\"#dlg-printersettings\").modal(\"show\");\"selectpicker\"===o&&t(\"#dlg-printersettings .selectpicker\").selectpicker(\"refresh\")}}function n(e){var t=MeadCo.ScriptX.Print,r=t.printerName,o=t.deviceSettings.paperSourceName,n=t.onErrorAction;t.onErrorAction=t.ErrorAction.THROW;try{t.printerName=e,i()}catch(e){alert(\"Sorry, an error has occurred:\\n\\n\"+e.message)}try{t.printerName=r,t.deviceSettings.paperSourceName=o}catch(e){alert(\"Sorry, an error has occurred restoring current printer settings:\\n\\n\"+e.message)}t.onErrorAction=n}function i(){var e=MeadCo.ScriptX.Print;e.deviceSettingsForAsync(e.printerName,(e=>{var r=e.bins,o=t(\"#fld-papersource\");t(\"#fld-papersource > option\").remove();for(var n=0;n<r.length;n++)o.append(\"<option>\"+r[n]);o.val(e.paperSourceName),o.hasClass(\"selectpicker\")&&o.selectpicker(\"refresh\")}),(e=>{MeadCo.ScriptX.Print.reportError(e)}))}}(window.MeadCo=window.MeadCo||null,jQuery);\n//# sourceMappingURL=meadco-scriptxservicesprintUI.min.js.map\n"]}